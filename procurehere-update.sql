--PROCUREHRE VERSION 1.0-SNAPSHOT
 
ALTER TABLE PROC_OWNER_SETTINGS ADD SUPPLIER_CHARGE_START_DATE TIMESTAMP;

ALTER TABLE PROC_PR MODIFY COLUMN SUPPLIER_TEL_NO varchar(55) NULL ;

ALTER TABLE PROC_OWNER_SETTINGS ADD BUY_SUBS_EXP_REMINDER NUMBER(6);

ALTER TABLE PROC_OWNER_SETTINGS ADD SUPP_SUBS_EXP_REMINDER NUMBER(6);

ALTER TABLE PROC_SUBSCRIPTION ADD (REMINDER_SENT NUMBER(1));

ALTER TABLE PROC_SUPPLIER_SUBSCRIPTION ADD (REMINDER_SENT NUMBER(1));


--PROCUREHRE VERSION 1.0.0
--Business Unit CR

CREATE TABLE "PROC_BUSINESS_UNIT" 
   ("ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"CONTENT_TYPE" VARCHAR2(160 CHAR), 
	"CREATED_DATE" TIMESTAMP (6) NOT NULL ENABLE, 
	"DISPLAY_NAME" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"FILE_DATA" BLOB, 
	"FILE_NAME" VARCHAR2(200 CHAR), 
	"FILE_SIZE_KB" NUMBER(10,0), 
	"LINE1" VARCHAR2(64 CHAR), 
	"LINE2" VARCHAR2(64 CHAR), 
	"LINE3" VARCHAR2(64 CHAR), 
	"LINE4" VARCHAR2(64 CHAR), 
	"LINE5" VARCHAR2(64 CHAR), 
	"LINE6" VARCHAR2(64 CHAR), 
	"LINE7" VARCHAR2(64 CHAR), 
	"MODIFIED_DATE" TIMESTAMP (6), 
	"STATUS" VARCHAR2(255 CHAR), 
	"BUSINESS_UNIT_NAME" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"TANENT_ID" VARCHAR2(64 CHAR), 
	"CREATED_BY_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"MODIFIED_BY_ID" VARCHAR2(64 CHAR), 
	 PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
 	ENABLE, CONSTRAINT "FK_BUS_UNIT_BUY_CODE" FOREIGN KEY ("TANENT_ID")
	  REFERENCES "PROC_BUYER" ("BUYER_ID") ENABLE, 
	 CONSTRAINT "FK_BUS_UNIT_CREATED_BY" FOREIGN KEY ("CREATED_BY_ID")
	  REFERENCES "PROC_USER" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUS_UNIT_MODIFIED_BY" FOREIGN KEY ("MODIFIED_BY_ID")
	  REFERENCES "PROC_USER" ("ID") ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 LOB ("FILE_DATA") STORE AS SECUREFILE (
  ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES );


ALTER TABLE PROC_PR ADD (BUSINESS_UNIT_ID varchar2(64));

ALTER TABLE PROC_PR ADD CONSTRAINT FK_PR_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID);

 
ALTER TABLE PROC_RFA_EVENTS ADD BUSINESS_UNIT_ID VARCHAR2(64);

ALTER TABLE PROC_RFI_EVENTS ADD BUSINESS_UNIT_ID VARCHAR2(64);

ALTER TABLE PROC_RFP_EVENTS ADD BUSINESS_UNIT_ID VARCHAR2(64);

ALTER TABLE PROC_RFQ_EVENTS ADD BUSINESS_UNIT_ID VARCHAR2(64);
  
ALTER TABLE PROC_RFT_EVENTS ADD BUSINESS_UNIT_ID VARCHAR2(64);

--


 
  -- Added urgent flag in event --
  
ALTER TABLE PROC_RFA_EVENTS ADD (URGENT_EVENT NUMBER(1));

ALTER TABLE PROC_RFI_EVENTS ADD (URGENT_EVENT NUMBER(1));

ALTER TABLE PROC_RFP_EVENTS ADD (URGENT_EVENT NUMBER(1));

ALTER TABLE PROC_RFQ_EVENTS ADD (URGENT_EVENT NUMBER(1));
  
ALTER TABLE PROC_RFT_EVENTS ADD (URGENT_EVENT NUMBER(1));

ALTER TABLE PROC_PR ADD (URGENT_PR NUMBER(1));

ALTER TABLE PROC_AUCTION_BIDS ADD (IP_ADDRESS varchar(50));

-- Push Notifications - Mobile Device Ids.
ALTER TABLE PROC_USER ADD DEVICE_ID VARCHAR2(150);

-- Approval User Column Added in Comments Table --

ALTER TABLE PROC_PR_COMMENTS ADD (APPROVAL_USER_ID varchar2(64));

ALTER TABLE PROC_PR_COMMENTS ADD CONSTRAINT FK_PR_APP_USER_COM_AP_ID FOREIGN KEY (APPROVAL_USER_ID) REFERENCES PROC_PR_APPROVAL_USER (ID);

ALTER TABLE PROC_RFT_COMMENTS ADD (APPROVAL_USER_ID varchar2(64));

ALTER TABLE PROC_RFT_COMMENTS ADD CONSTRAINT FK_RFT_APP_USER_COM_AP_ID FOREIGN KEY (APPROVAL_USER_ID) REFERENCES PROC_RFT_APPROVAL_USER (ID);

ALTER TABLE PROC_RFA_COMMENTS ADD (APPROVAL_USER_ID varchar2(64));

ALTER TABLE PROC_RFA_COMMENTS ADD CONSTRAINT FK_RFA_APP_USER_COM_AP_ID FOREIGN KEY (APPROVAL_USER_ID) REFERENCES PROC_RFA_APPROVAL_USER (ID);

ALTER TABLE PROC_RFQ_COMMENTS ADD (APPROVAL_USER_ID varchar2(64));

ALTER TABLE PROC_RFQ_COMMENTS ADD CONSTRAINT FK_RFQ_APP_USER_COM_AP_ID FOREIGN KEY (APPROVAL_USER_ID) REFERENCES PROC_RFQ_APPROVAL_USER (ID);

ALTER TABLE PROC_RFP_COMMENTS ADD (APPROVAL_USER_ID varchar2(64));

ALTER TABLE PROC_RFP_COMMENTS ADD CONSTRAINT FK_RFP_APP_USER_COM_AP_ID FOREIGN KEY (APPROVAL_USER_ID) REFERENCES PROC_RFP_APPROVAL_USER (ID);

ALTER TABLE PROC_RFI_COMMENTS ADD (APPROVAL_USER_ID varchar2(64));

ALTER TABLE PROC_RFI_COMMENTS ADD CONSTRAINT FK_RFI_APP_USER_COM_AP_ID FOREIGN KEY (APPROVAL_USER_ID) REFERENCES PROC_RFI_APPROVAL_USER (ID);


-- drop FK Relation from comments tables

ALTER TABLE PROC_PR_COMMENTS DROP CONSTRAINT FK_PR_APP_USER_COM_AP_ID;

ALTER TABLE PROC_RFT_COMMENTS DROP CONSTRAINT FK_RFT_APP_USER_COM_AP_ID;

ALTER TABLE PROC_RFA_COMMENTS DROP CONSTRAINT FK_RFA_APP_USER_COM_AP_ID;

ALTER TABLE PROC_RFI_COMMENTS DROP CONSTRAINT FK_RFI_APP_USER_COM_AP_ID;

ALTER TABLE PROC_RFQ_COMMENTS DROP CONSTRAINT FK_RFQ_APP_USER_COM_AP_ID;

ALTER TABLE PROC_RFP_COMMENTS DROP CONSTRAINT FK_RFP_APP_USER_COM_AP_ID;


--PR DESCRIPTION LENGTH --
ALTER TABLE PROC_PR MODIFY DESCRIPTION VARCHAR2(1050) ;



-- RFX ID SETTING TABLES --

CREATE TABLE PROC_ID_SETTINGS (
	ID VARCHAR2(64),
	ID_DATE_PATTERN VARCHAR2(64),
	ID_DELIMITER VARCHAR2(64),
	ID_PREFIX VARCHAR2(64),
	ID_SEQUENCE NUMBER(10,0),
	ID_TYPE VARCHAR2(16),
	ID_PADDING_LENGTH NUMBER(10,0),
	TENANT_ID VARCHAR2(64),
	CONSTRAINT  PRIMARY KEY (ID)
) ;


INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f81c15ba01fc8015bcc3bb277004e', 'PR'    ,'MMYYYY'	   , '/'         , 'PR' ,270,  NULL, '2c9f81c15ba01fc8015bcc3bb277004e');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f81c15ba01fc8015bcc3bb2770041', 'RFI'    ,'MMdd'	   , '/'         , 'RFI' ,1,  NULL, '2c9f81c15ba01fc8015bcc3bb277004e');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f81c15ba01fc8015bcc3bb2770042', 'RFP'    ,'MMdd'	   , '/'         , 'RFP' ,1,  NULL, '2c9f81c15ba01fc8015bcc3bb277004e');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f81c15ba01fc8015bcc3bb2770043', 'RFQ'    ,'MMdd'	   , '/'         , 'RFQ' ,1,  NULL, '2c9f81c15ba01fc8015bcc3bb277004e');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f81c15ba01fc8015bcc3bb2770045', 'RFT'    ,'MMdd'	   , '/'         , 'RFT' ,1,  NULL, '2c9f81c15ba01fc8015bcc3bb277004e');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f81c15ba01fc8015bcc3bb2770046', 'RFA'    ,'MMdd'	   , '/'         , 'RFA' , 2 ,  NULL, '2c9f81c15ba01fc8015bcc3bb277004e');




INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9fc3785deaa44e015e12daba3604f1', 'PR'    ,'YY'	   , '/'         , 'PR' ,1,  6, '2c9fc3785deaa44e015e12daba3604fd');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9fc3785deaa44e015e12daba3604f2', 'RFI'    ,'MMdd'	   , '/'         , 'RFI' ,1,  NULL, '2c9fc3785deaa44e015e12daba3604fd');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9fc3785deaa44e015e12daba3604f3', 'RFP'    ,'MMdd'	   , '/'         , 'RFP' ,1,  NULL, '2c9fc3785deaa44e015e12daba3604fd');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9fc3785deaa44e015e12daba3604f4', 'RFQ'    ,'MMdd'	   , '/'         , 'RFQ' ,1,  NULL, '2c9fc3785deaa44e015e12daba3604fd');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9fc3785deaa44e015e12daba3604f5', 'RFT'    ,'MMdd'	   , '/'         , 'RFT' ,1,  NULL, '2c9fc3785deaa44e015e12daba3604fd');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9fc3785deaa44e015e12daba3604f6', 'RFA'    ,'MMdd'	   , '/'         , 'RFA' , NULL ,  NULL, '2c9fc3785deaa44e015e12daba3604fd');




INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f8cc15b6aa455015b6aa5d0aa1b81', 'PR'    ,'MMYYYY'	   , '/'         , 'PR' ,1,  NULL, '2c9f8cc15b6aa455015b6aa5d0aa1b82');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f8cc15b6aa455015b6aa5d0aa1b82', 'RFI'    ,'MMdd'	   , '/'         , 'RFI' ,1,  NULL, '2c9f8cc15b6aa455015b6aa5d0aa1b82');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f8cc15b6aa455015b6aa5d0aa1b83', 'RFP'    ,'MMdd'	   , '/'         , 'RFP' ,1,  NULL, '2c9f8cc15b6aa455015b6aa5d0aa1b82');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f8cc15b6aa455015b6aa5d0aa1b84', 'RFQ'    ,'MMdd'	   , '/'         , 'RFQ' ,3,  NULL, '2c9f8cc15b6aa455015b6aa5d0aa1b82');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f8cc15b6aa455015b6aa5d0aa1b85', 'RFT'    ,'MMdd'	   , '/'         , 'RFT' ,1,  NULL, '2c9f8cc15b6aa455015b6aa5d0aa1b82');

INSERT INTO PROC_PROD_DB.PROC_ID_SETTINGS
	  (ID,  ID_TYPE,ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE,  ID_PADDING_LENGTH, TENANT_ID)
VALUES('2c9f8cc15b6aa455015b6aa5d0aa1b86', 'RFA'    ,'MMdd'	   , '/'         , 'RFA' , NULL ,  NULL, '2c9f8cc15b6aa455015b6aa5d0aa1b82');









ALTER TABLE PROC_ID_SETTINGS ADD (MODIFIED_BY varchar2(64));

ALTER TABLE PROC_ID_SETTINGS ADD CONSTRAINT FK_ID_SETTING_MOD_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID);

ALTER TABLE PROC_ID_SETTINGS ADD MODIFIED_DATE TIMESTAMP;


--BUYER PACKAGE --


  CREATE TABLE "PROC_BUYER_PLAN" 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"CREATED_DATE" TIMESTAMP (6) NOT NULL ENABLE, 
	"DESCRIPTION" VARCHAR2(2000 CHAR), 
	"MODIFIED_DATE" TIMESTAMP (6), 
	"PLAN_NAME" VARCHAR2(128 CHAR) NOT NULL ENABLE, 
	"PLAN_ORDER" NUMBER(10,0) NOT NULL ENABLE, 
	"PLAN_STATUS" VARCHAR2(32 CHAR) NOT NULL ENABLE, 
	"PLAN_TYPE" VARCHAR2(32 CHAR) NOT NULL ENABLE, 
	"SHORT_DESCRIPTION" VARCHAR2(150 CHAR) NOT NULL ENABLE, 
	"CREATED_BY" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"CURRENCY_CODE" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"MODIFIED_BY" VARCHAR2(64 CHAR), 
	 PRIMARY KEY ("ID"),
	 CONSTRAINT "FK_BUY_PLAN_CREATED_BY" FOREIGN KEY ("CREATED_BY")
	  REFERENCES "PROC_USER" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUY_PLAN_CURRENCY" FOREIGN KEY ("CURRENCY_CODE")
	  REFERENCES "PROC_CURRENCY" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUY_PLAN_MODIFIED_BY" FOREIGN KEY ("MODIFIED_BY")
	  REFERENCES "PROC_USER" ("ID") ENABLE
   )



CREATE TABLE "PROC_PLAN_RANGE" 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"DISPLAY_LABEL" VARCHAR2(100 CHAR), 
	"PRICE" NUMBER(20,4) NOT NULL ENABLE, 
	"RANGE_END" NUMBER(10,0) NOT NULL ENABLE, 
	"RANGE_START" NUMBER(10,0) NOT NULL ENABLE, 
	"BUYER_PLAN_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	 PRIMARY KEY ("ID"),
	 CONSTRAINT "FK_BUY_PLAN_RANGE" FOREIGN KEY ("BUYER_PLAN_ID")
	  REFERENCES "PROC_BUYER_PLAN" ("ID") ENABLE
   );





CREATE TABLE "PROC_PLAN_PERIOD" 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"PLAN_DISCOUNT" NUMBER(10,0) NOT NULL ENABLE, 
	"PLAN_DURATION" NUMBER(10,0) NOT NULL ENABLE, 
	"BUYER_PLAN_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	 PRIMARY KEY ("ID"),
	 CONSTRAINT "FK_BUY_PLAN_PERIOD" FOREIGN KEY ("BUYER_PLAN_ID")
	  REFERENCES "PROC_BUYER_PLAN" ("ID") ENABLE
   );


  CREATE TABLE "PROC_BUYER_SUBSCRIPTION" 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"ACTIVATED_DATE" TIMESTAMP (6), 
	"CANCELLED_DATE" TIMESTAMP (6), 
	"CREATED_DATE" TIMESTAMP (6), 
	"CURRENCY_CODE" VARCHAR2(3 CHAR), 
	"END_DATE" TIMESTAMP (6), 
	"EVENT_QUANTITY" NUMBER(10,0), 
	"PLAN_TYPE" VARCHAR2(32 CHAR) NOT NULL ENABLE, 
	"PRICE_AMOUNT" NUMBER(20,4) NOT NULL ENABLE, 
	"PRICE_DISCOUNT" NUMBER(20,4), 
	"PROMO_CODE_DISCOUNT" NUMBER(20,4), 
	"START_DATE" TIMESTAMP (6), 
	"SUBSCRIPTION_CANCEL_REASON" VARCHAR2(255 CHAR), 
	"SUBSCRIPTION_STATUS" VARCHAR2(255 CHAR), 
	"TOTAL_PRICE_AMOUNT" NUMBER(20,4) NOT NULL ENABLE, 
	"USER_QUANTITY" NUMBER(10,0), 
	"BUYER_ID" VARCHAR2(64 CHAR), 
	"NEXT_SUBSCRIPTION_ID" VARCHAR2(64 CHAR), 
	"BUYER_PLAN_ID" VARCHAR2(64 CHAR), 
	"PERIOD_ID" VARCHAR2(64 CHAR), 
	"RANGE_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	 PRIMARY KEY ("ID"),
	 CONSTRAINT "FK_BUY_SUB_ID" FOREIGN KEY ("BUYER_ID")
	  REFERENCES "PROC_BUYER" ("BUYER_ID") ENABLE, 
	 CONSTRAINT "FK_BUY_NEXT_SUBS_ID" FOREIGN KEY ("NEXT_SUBSCRIPTION_ID")
	  REFERENCES "PROC_BUYER_SUBSCRIPTION" ("ID") ENABLE, 
	 CONSTRAINT "FK_SUBS_BUY_PLAN_ID" FOREIGN KEY ("BUYER_PLAN_ID")
	  REFERENCES "PROC_BUYER_PLAN" ("ID") ENABLE, 
	 CONSTRAINT "FK_SUBS_PERIOD_ID" FOREIGN KEY ("PERIOD_ID")
	  REFERENCES "PROC_PLAN_PERIOD" ("ID") ENABLE, 
	 CONSTRAINT "FK_SUBS_RANGE_ID" FOREIGN KEY ("RANGE_ID")
	  REFERENCES "PROC_PLAN_RANGE" ("ID") ENABLE
   );

  
  CREATE TABLE "PROC_PROMOTIONAL_CODE" 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"CREATED_DATE" TIMESTAMP (6) NOT NULL ENABLE, 
	"DISCOUNT_TYPE" VARCHAR2(32 CHAR) NOT NULL ENABLE, 
	"EFFECTIVE_DATE" DATE NOT NULL ENABLE, 
	"EXPIRY_DATE" DATE NOT NULL ENABLE, 
	"IN_USE" NUMBER(1,0) NOT NULL ENABLE, 
	"PROMO_CODE" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"PROMO_DISCOUNT" NUMBER(10,0) NOT NULL ENABLE, 
	"PROMO_NAME" VARCHAR2(250 CHAR) NOT NULL ENABLE, 
	"STATUS" VARCHAR2(32 CHAR) NOT NULL ENABLE, 
	"USAGE_COUNT" NUMBER(10,0), 
	"USAGE_LIMIT" NUMBER(10,0), 
	"USAGE_LIMIT_TYPE" VARCHAR2(32 CHAR), 
	"BUYER_ID" VARCHAR2(64 CHAR), 
	"CREATED_BY" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	 PRIMARY KEY ("ID"),
	 CONSTRAINT "FK_PROMO_CODE_BUYER_ID" FOREIGN KEY ("BUYER_ID")
	  REFERENCES "PROC_BUYER" ("BUYER_ID") ENABLE, 
	 CONSTRAINT "FK_PROMO_CODE_CREATED_BY" FOREIGN KEY ("CREATED_BY")
	  REFERENCES "PROC_USER" ("ID") ENABLE
   );

--subscription drop tables -- 

ALTER TABLE PROC_SUBSCRIPTION DROP CONSTRAINT FK_SUBS_BUYER_ID;

ALTER TABLE PROC_SUBSCRIPTION DROP CONSTRAINT FK_SUBS_PLAN_ID;

ALTER TABLE PROC_SUBSCRIPTION DROP CONSTRAINT FK_SUBS_NEXT_SUBS_ID;

ALTER TABLE PROC_SUBSCRIPTION DROP CONSTRAINT FK_SUBS_PAY_TX_ID;


ALTER TABLE PROC_PAYMENT_TRANSACTION DROP CONSTRAINT FK_TRANS_SUBSC_ID;

ALTER TABLE PROC_PAYMENT_TRANSACTION DROP CONSTRAINT FK_PAY_TX_PLAN_ID;


ALTER TABLE PROC_BUYER_PACKAGE DROP CONSTRAINT FK_BUY_PACK_PLAN_ID;


ALTER TABLE PROC_BUYER DROP CONSTRAINT FK_BUY_PLAN_ID;

ALTER TABLE PROC_BUYER DROP CONSTRAINT FK_BUY_SUBSCRIPTION_ID;

DROP TABLE PROC_SUBSCRIPTION;


ALTER TABLE PROC_PLAN DROP CONSTRAINT FK_PLAN_CURRENCY;

ALTER TABLE PROC_PLAN DROP CONSTRAINT FK_PLAN_CREATED_BY;

ALTER TABLE PROC_PLAN DROP CONSTRAINT FK_PLAN_MODIFIED_BY;

DROP TABLE PROC_PLAN;

-- Delete Column From Existing Table For Buyer Package--

ALTER TABLE PROC_BUYER_PACKAGE DROP COLUMN PLAN_ID;


ALTER TABLE PROC_BUYER DROP COLUMN PLAN_ID;

ALTER TABLE PROC_BUYER DROP COLUMN SUBSCRIPTION_ID;


ALTER TABLE PROC_PAYMENT_TRANSACTION DROP COLUMN PLAN_ID;

ALTER TABLE PROC_PAYMENT_TRANSACTION DROP COLUMN SUBSCRIPTION_ID;


-- Add Column In Existing Table For Buyer Package--

ALTER TABLE PROC_PAYMENT_TRANSACTION MODIFY AMOUNT DECIMAL(10,2);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD PRICE_AMOUNT DECIMAL(20,4);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD PRICE_DISCOUNT DECIMAL(20,4);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD PROMO_CODE_DISCOUNT DECIMAL(20,4);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD TOTAL_PRICE_AMOUNT DECIMAL(20,4);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD PROMOTIONAL_CODE_ID VARCHAR2(64);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD CONSTRAINT FK__PAY_TRANS_PROMO_ID FOREIGN KEY (PROMOTIONAL_CODE_ID) REFERENCES PROC_PROMOTIONAL_CODE (ID);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD BUYER_SUBSCRIPTION_ID VARCHAR2(64);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD CONSTRAINT FK_TRANS__BUY_SUBSC_ID FOREIGN KEY (BUYER_SUBSCRIPTION_ID) REFERENCES PROC_BUYER_SUBSCRIPTION (ID);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD BUYER_PLAN_ID VARCHAR2(64);

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD CONSTRAINT FK_PAY_TX_BUYER_PLAN_ID FOREIGN KEY (BUYER_PLAN_ID) REFERENCES PROC_BUYER_PLAN (ID);


ALTER TABLE PROC_BUYER_PACKAGE ADD BUYER_PLAN_ID VARCHAR2(64);

ALTER TABLE PROC_BUYER_PACKAGE ADD CONSTRAINT FK_BUYER_PACK_PLAN_ID FOREIGN KEY (BUYER_PLAN_ID) REFERENCES PROC_BUYER_PLAN (ID);


ALTER TABLE PROC_BUYER ADD BUYER_PLAN_ID VARCHAR2(64);

ALTER TABLE PROC_BUYER ADD CONSTRAINT FK_BUYER_PLAN_ID FOREIGN KEY (BUYER_PLAN_ID) REFERENCES PROC_BUYER_PLAN (ID);

ALTER TABLE PROC_BUYER ADD BUYER_SUBSCRIPTION_ID VARCHAR2(64);

ALTER TABLE PROC_BUYER ADD CONSTRAINT FK_BUYER_SUBS_ID FOREIGN KEY (BUYER_SUBSCRIPTION_ID) REFERENCES PROC_BUYER_SUBSCRIPTION (ID);


ALTER TABLE PROC_BUYER_PACKAGE ADD (EXP_REM_BFR_30_DAY NUMBER(1));

ALTER TABLE PROC_BUYER_PACKAGE ADD (EXP_REM_BFR_15_DAY NUMBER(1));

ALTER TABLE PROC_BUYER_PACKAGE ADD (EXP_REM_BFR_7_DAY NUMBER(1));

ALTER TABLE PROC_BUYER_PACKAGE ADD (USER_DA_REM_BFR_2_DAY NUMBER(1));

ALTER TABLE PROC_BUYER_SUBSCRIPTION ADD (IMMEDIATE_EFFECT NUMBER(1));

--SET ALL ACCOUNT DEFAULT FALSE--
--UPDATE PROC_BUYER_PACKAGE set EXP_REM_BFR_30_DAY = 0 , EXP_REM_BFR_15_DAY = 0, EXP_REM_BFR_7_DAY = 0, USER_DA_REM_BFR_2_DAY = 0;



ALTER TABLE PROC_BUYER_SUBSCRIPTION MODIFY START_DATE TIMESTAMP (6);

ALTER TABLE PROC_BUYER_SUBSCRIPTION MODIFY END_DATE TIMESTAMP (6);


ALTER TABLE PROC_BUYER_PACKAGE MODIFY START_DATE TIMESTAMP (6);

ALTER TABLE PROC_BUYER_PACKAGE MODIFY END_DATE TIMESTAMP (6);

--subscription schedular should run every hour--
--UPDATE QRTZ_CRON_TRIGGERS  SET CRON_EXPRESSION='0 0 * * * ?' WHERE TRIGGER_NAME ='subscriptionMonitorJobTrigger';


--AXA PR/PO CR--
ALTER TABLE PROC_PR ADD (IS_PO NUMBER(1));

--UPDATE PROC_PR set IS_PO = 1 where PO_NUMBER is NOT NULL;

ALTER TABLE PROC_PR ADD (IS_PO_REPORT_SENT NUMBER(1));

CREATE TABLE "PROC_PO_DOCUMENTS" 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"CONTENT_TYPE" VARCHAR2(160 CHAR), 
	"DESCRIPTION" VARCHAR2(300 CHAR), 
	"FILE_DATA" BLOB, 
	"FILE_NAME" VARCHAR2(500 CHAR), 
	"FILE_SIZE" NUMBER(10,0), 
	"UPLOAD_DATE" TIMESTAMP (6), 
	"DOC_TYPE" VARCHAR2(32 CHAR), 
	"PR_ID" VARCHAR2(64 CHAR), 
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "FK_PO_DOCUMENT" FOREIGN KEY ("PR_ID")
	  REFERENCES "PROC_PR" ("ID")
	  );

CREATE TABLE "PROC_PR_AUDIT" 
   ("ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"ACTION_TYPE" VARCHAR2(255 CHAR) NOT NULL ENABLE, 
	"ACTION_DATE" TIMESTAMP (6) NOT NULL ENABLE, 
	"THE_DESCRIPTION" VARCHAR2(3000 CHAR), 
	"ACTION_BY" VARCHAR2(64 CHAR), 
	"TENANT_ID" VARCHAR2(64 CHAR), 
	"PR_ID" VARCHAR2(64 CHAR), 
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "FKFBDHTI6F2FQ5R2BFFIEPBNAR9" FOREIGN KEY ("ACTION_BY")
	  REFERENCES "PROC_USER" ("ID") ENABLE, 
	 CONSTRAINT "FKMQ8A796QG5SN4T73SHEL7NVG9" FOREIGN KEY ("TENANT_ID")
	  REFERENCES "PROC_BUYER" ("BUYER_ID") ENABLE, 
	 CONSTRAINT "FK_PR_AUDIT" FOREIGN KEY ("PR_ID")
	  REFERENCES "PROC_PR" ("ID") ENABLE);
	  
	  
--SUPPLIER_NOTE_DOCS Enhancements--

	 CREATE TABLE "PROC_SUPPLIER_NOTE_DOCS"    
	 ("ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 	
	 "CONTENT_TYPE" VARCHAR2(160 CHAR), 	
	 "DESCRIPTION" VARCHAR2(300 CHAR), 	
	 "FILE_DATA" BLOB, 	
	 "FILE_NAME" VARCHAR2(500 CHAR), 	
	 "FILE_SIZE" NUMBER(10,0), 	
	 "UPLOAD_DATE" TIMESTAMP (6), 	
	 "TENANT_TYPE" VARCHAR2(30 CHAR), 	
	 "UPLOAD_TENANT_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 	
	 "IS_VISIBLE" NUMBER(1,0), 	
	 "CREATED_BY" VARCHAR2(64 CHAR), 	
	 "SUPPLIER_ID" VARCHAR2(64 CHAR), 	
	 PRIMARY KEY ("ID"), 	 
	 CONSTRAINT "FK_SUP_NOTES_CREATED_BY" FOREIGN KEY ("CREATED_BY")	  
	 REFERENCES "PROC_USER" ("ID") , 	 
	 CONSTRAINT "FK_SUP_NOTES_DOCS" FOREIGN KEY ("SUPPLIER_ID")	  
	 REFERENCES "PROC_SUPPLIER" ("SUPPLIER_ID") ) ; 
	 
	 
	 -- Buyer subscription Notification Reminder Enhancements --
	 
	 ALTER TABLE PROC_BUYER_PACKAGE ADD (EXP_REM_BFR_6_MONTH NUMBER(1));

	 ALTER TABLE PROC_BUYER_PACKAGE ADD (EXP_REM_BFR_3_MONTH NUMBER(1));
	 
	 ALTER TABLE PROC_BUYER_PACKAGE ADD (USER_DA_REM_BFR_30_DAY NUMBER(1));
	 
	 ALTER TABLE PROC_BUYER_PACKAGE ADD (USER_DA_REM_BFR_15_DAY NUMBER(1));
	 
	 ALTER TABLE PROC_BUYER_PACKAGE ADD (USER_DA_REM_BFR_7_DAY NUMBER(1));
	 
	--SET ALL ACCOUNT DEFAULT FALSE--
	
	 --UPDATE PROC_BUYER_PACKAGE set EXP_REM_BFR_6_MONTH = 0 , EXP_REM_BFR_3_MONTH = 0;
	 
	 --UPDATE PROC_BUYER_PACKAGE set USER_DA_REM_BFR_30_DAY = 0 , USER_DA_REM_BFR_15_DAY = 0, USER_DA_REM_BFR_7_DAY = 0 ;
	 
	 -- settlement currency --
	 
	ALTER TABLE PROC_PAYMENT_TRANSACTION ADD ADDITIONAL_TAX_DESC VARCHAR2(200); 
	
	ALTER TABLE PROC_PAYMENT_TRANSACTION ADD ADDITIONAL_TAX DECIMAL(20,4);
	
	ALTER TABLE PROC_PAYMENT_TRANSACTION ADD EXCHANGE_RATE VARCHAR2(20);

	 -- Recurring Payments --
	
	ALTER TABLE PROC_BUYER_SUBSCRIPTION ADD PAYMENT_PROFILE_ID VARCHAR2(64);
	
	ALTER TABLE PROC_BUYER_SUBSCRIPTION ADD (AUTO_CHARGE_SUBSCRIPTION NUMBER(1));

	ALTER TABLE PROC_BUYER_SUBSCRIPTION ADD RECURRING_CANCEL_DATE TIMESTAMP (6);
	
	ALTER TABLE PROC_BUYER_SUBSCRIPTION ADD RECURRING_CANCEL_REMARKS VARCHAR2(2000);
	
	ALTER TABLE PROC_USER ADD BQ_PAGE_LENGTH NUMBER(3);

	--UPDATE PROC_USER set BQ_PAGE_LENGTH = 50 where TENANT_TYPE = 2;	  
	
	ALTER TABLE PROC_OWNER_SETTINGS ADD BUY_SUB_NOT_ADMIN_EMAIL VARCHAR2(500);
	
	
	-- BUYER SUBSCRIPTION CR USING BASE PRICE
	
	ALTER TABLE PROC_BUYER_PLAN ADD BASE_PRICE DECIMAL(20,4);

    ALTER TABLE PROC_BUYER_PLAN ADD BASE_USERS NUMBER(6);
    
    -- FREE APPROVER CR
	
	ALTER TABLE PROC_BUYER_PACKAGE ADD NO_OF_APPROVERS NUMBER(6) DEFAULT 0;
	
	ALTER TABLE PROC_USER ADD USER_TYPE VARCHAR2(32) DEFAULT 'NORMAL_USER';
	
	ALTER TABLE PROC_USER_ROLE ADD (READ_ONLY NUMBER(1)) DEFAULT 0;
	
	--Run first time to update existing users 
	--UPDATE PROC_USER set USER_TYPE = 'NORMAL_USER' where TENANT_TYPE = 2;
	--UPDATE PROC_BUYER_PACKAGE set NO_OF_APPROVERS = 0;
	--UPDATE PROC_USER_ROLE set READ_ONLY = 0;

	SELECT 'INSERT INTO PROC_USER_ROLE(ROLE_ID, CREATED_DATE, ACCOUNT_DELETED, MODIFIED_DATE, ROLE_DESCRIPTION, ROLE_NAME, ROLE_STATUS, TENANT_ID, CREATED_BY, USER_LAST_MODIFIED_BY, READ_ONLY) VALUES(''' || BUYER_ID || ''', TIMESTAMP ''2018-02-10 00:00:00.000'', 0, NULL, ''Buyer Approver User Role only for approver user type can''''t be modify or delete'', ''BUYER APPROVER USER'', ''ACTIVE'', ''' || BUYER_ID  || ''', NULL, NULL, 1);'
	FROM PROC_BUYER;

	SELECT 'INSERT INTO PROC_ROLE_ACL_MAPPING(ROLE_ID, ACL_ID) VALUES(''' || BUYER_ID || ''', ''ROLE_BUYER_USER_APPROVER''); INSERT INTO PROC_ROLE_ACL_MAPPING(ROLE_ID, ACL_ID) VALUES(''' || BUYER_ID || ''', ''ROLE_USER'');'
	FROM PROC_BUYER;

	--INSERT INTO PROC_USER_ROLE(ROLE_ID, CREATED_DATE, ACCOUNT_DELETED, MODIFIED_DATE, ROLE_DESCRIPTION, ROLE_NAME, ROLE_STATUS, TENANT_ID, CREATED_BY, USER_LAST_MODIFIED_BY, READ_ONLY)
	--VALUES('11111', TIMESTAMP '2018-02-10 00:00:00.000', 0, NULL, 'Buyer Approver User Role only for approver user type can''t be modify or delete', 'BUYER APPROVER USER', 'ACTIVE', 'tenantId', NULL, NULL, 1);

    --INSERT INTO PROC_ROLE_ACL_MAPPING(ROLE_ID, ACL_ID) VALUES('11111', 'ROLE_BUYER_USER_APPROVER');

	
	-- -------------------------
	--     SAP-INTEGRATION 
	-- -------------------------
	
	ALTER TABLE PROC_PRODUCT_ITEM ADD HISTORIC_PRICING_REF_NO VARCHAR2(30);
	
	ALTER TABLE PROC_PRODUCT_ITEM ADD PURCHASE_GROUP_CODE VARCHAR2(30);
	
	ALTER TABLE PROC_PRODUCT_ITEM ADD BRAND VARCHAR2(500);
	
	ALTER TABLE PROC_RFT_EVENTS ADD DELIVERY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFA_EVENTS ADD DELIVERY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFI_EVENTS ADD DELIVERY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFP_EVENTS ADD DELIVERY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFQ_EVENTS ADD DELIVERY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD FAV_VENDOR_CODE VARCHAR2(100);
	
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM ADD FIELD5 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM ADD FIELD6 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM ADD FIELD7 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM ADD FIELD8 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM ADD FIELD9 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM ADD FIELD10 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM ADD FIELD5 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM ADD FIELD6 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM ADD FIELD7 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM ADD FIELD8 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM ADD FIELD9 VARCHAR2(100);
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM ADD FIELD10 VARCHAR2(100);
	
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM ADD FIELD5 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM ADD FIELD6 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM ADD FIELD7 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM ADD FIELD8 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM ADD FIELD9 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM ADD FIELD10 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM ADD FIELD5 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM ADD FIELD6 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM ADD FIELD7 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM ADD FIELD8 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM ADD FIELD9 VARCHAR2(100);
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM ADD FIELD10 VARCHAR2(100);
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM ADD FIELD5 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM ADD FIELD6 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM ADD FIELD7 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM ADD FIELD8 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM ADD FIELD9 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM ADD FIELD10 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM ADD FIELD5 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM ADD FIELD6 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM ADD FIELD7 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM ADD FIELD8 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM ADD FIELD9 VARCHAR2(100);
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM ADD FIELD10 VARCHAR2(100);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM ADD FIELD5 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM ADD FIELD6 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM ADD FIELD7 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM ADD FIELD8 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM ADD FIELD9 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM ADD FIELD10 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM ADD FIELD5 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM ADD FIELD6 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM ADD FIELD7 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM ADD FIELD8 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM ADD FIELD9 VARCHAR2(100);
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM ADD FIELD10 VARCHAR2(100);
	
	
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD5_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD5_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD5_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD5_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD5_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD5_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD5_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD5_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD5_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD5_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD6_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD6_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD6_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD6_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD6_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD6_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD6_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD6_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD6_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD6_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD7_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD7_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD7_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD7_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD7_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD7_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD7_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD7_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD7_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD7_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD8_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD8_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD8_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD8_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD8_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD8_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD8_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD8_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD8_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD8_VISIBLE NUMBER(1);
	
	
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD9_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD9_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD9_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD9_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD9_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD9_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD9_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD9_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD9_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD9_VISIBLE NUMBER(1);
	
	
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD10_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD10_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD10_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD10_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_EVENT_BQ ADD FIELD10_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD10_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD10_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD10_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD10_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD FIELD10_VISIBLE NUMBER(1);
	

	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD5_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD5_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD5_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD5_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD5_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD5_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD5_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD5_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD5_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD5_VISIBLE NUMBER(1);
	

	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD6_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD6_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD6_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD6_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD6_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD6_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD6_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD6_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD6_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD6_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD7_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD7_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD7_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD7_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD7_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD7_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD7_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD7_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD7_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD7_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD8_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD8_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD8_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD8_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD8_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD8_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD8_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD8_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD8_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD8_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD9_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD9_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD9_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD9_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD9_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD9_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD9_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD9_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD9_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD9_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD10_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD10_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD10_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD10_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_EVENT_BQ ADD FIELD10_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD10_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD10_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD10_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD10_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD FIELD10_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD5_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD5_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD5_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD5_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD5_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD5_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD5_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD5_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD5_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD5_VISIBLE NUMBER(1);
	
	
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD6_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD6_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD6_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD6_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD6_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD6_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD6_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD6_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD6_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD6_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD7_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD7_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD7_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD7_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD7_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD7_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD7_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD7_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD7_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD7_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD8_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD8_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD8_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD8_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD8_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD8_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD8_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD8_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD8_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD8_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD9_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD9_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD9_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD9_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD9_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD9_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD9_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD9_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD9_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD9_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD10_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD10_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD10_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD10_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_EVENT_BQ ADD FIELD10_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD10_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD10_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD10_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD10_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD FIELD10_VISIBLE NUMBER(1);
	
	
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD5_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD5_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD5_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD5_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD5_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD5_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD5_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD5_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD5_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD5_VISIBLE NUMBER(1);
	
	
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD6_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD6_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD6_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD6_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD6_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD6_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD6_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD6_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD6_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD6_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD7_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD7_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD7_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD7_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD7_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD7_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD7_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD7_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD7_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD7_VISIBLE NUMBER(1);
	
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD8_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD8_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD8_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD8_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD8_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD8_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD8_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD8_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD8_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD8_VISIBLE NUMBER(1);
	
	
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD9_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD9_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD9_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD9_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD9_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD9_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD9_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD9_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD9_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD9_VISIBLE NUMBER(1);
	
	
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD10_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD10_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD10_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD10_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_EVENT_BQ ADD FIELD10_VISIBLE NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD10_LABEL VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD10_FILLEDBY VARCHAR2(32);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD10_SHOW_SUPPLIER NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD10_REQUIRED NUMBER(1);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD FIELD10_VISIBLE NUMBER(1);
	
	
	-- Table for ERP SETUP 
	CREATE TABLE PROC_ERP_SETUP (
	ID VARCHAR2(64),
	ERP_URL VARCHAR2(500),
	IS_ERP_ENABLE NUMBER(1,0),
	TENANT_ID VARCHAR2(64),
	EVENT_TYPE VARCHAR2(255),
	RFA_TEMPLATE_ID VARCHAR2(64),
	RFT_TEMPLATE_ID VARCHAR2(64),
	RFP_TEMPLATE_ID VARCHAR2(64),
	RFQ_TEMPLATE_ID VARCHAR2(64),
	APP_ID VARCHAR2(150),
  	 PRIMARY KEY (ID),
	CONSTRAINT FK70UI0X6GX57T7LS38G8JOQWKD FOREIGN KEY (RFA_TEMPLATE_ID) REFERENCES PROC_RFX_TEMPLATE(ID),
	CONSTRAINT FK7G6SL0LYO67VCKI1B8O92P0X2 FOREIGN KEY (RFP_TEMPLATE_ID) REFERENCES PROC_RFX_TEMPLATE(ID),
	CONSTRAINT FKLV3DPQ69O16WVEGL87RSH97WU FOREIGN KEY (RFT_TEMPLATE_ID) REFERENCES PROC_RFX_TEMPLATE(ID),
	CONSTRAINT FKSJ828W29MD1STTE8EHRR1FBP9 FOREIGN KEY (RFQ_TEMPLATE_ID) REFERENCES PROC_RFX_TEMPLATE(ID)
    );
	
    
    -- Table for ERP AUDIT 
    CREATE TABLE PROC_ERP_AUDIT (
	ID VARCHAR2(64),
	ACTION_TYPE VARCHAR2(255),
	ACTION_DATE TIMESTAMP,
	PAYLOAD CLOB,
	RESPONSE_MSG VARCHAR2(3000),
	TENANT_ID VARCHAR2(255),
	ACTION_BY VARCHAR2(64),
    PRIMARY KEY (ID),
	CONSTRAINT FKQIXF11XVXDGT2PQ2B4N992NI1 FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID)
	) ;

	
	-- Event Awards
	CREATE TABLE PROC_RFA_EVENT_AWARD (
	ID VARCHAR2(64),
	AWARD_CRITERIA VARCHAR2(255),
	AWARD_REMARKS VARCHAR2(1000),
	CREATED_DATE TIMESTAMP,
	GRAND_TOTAL_PRICE NUMBER(20,6),
	MODIFIED_DATE TIMESTAMP,
	TOTAL_AWARD_PRICE NUMBER(20,6),
	TOTAL_SUPPLIER_PRICE NUMBER(20,6),
	CREATED_BY VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	BQ_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK9X6M3KBVRFAAM02YSG3OWCEVS FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKJVTPS1CVNN1B0WYL4ADIU2842 FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFA_EVENT_AWD FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID),
	CONSTRAINT FK_RFA_EVNT_AWD_BQ FOREIGN KEY (BQ_ID) REFERENCES PROC_RFA_EVENT_BQ(ID)
	) ;
	
	
	CREATE TABLE PROC_RFP_EVENT_AWARD (
	ID VARCHAR2(64),
	AWARD_CRITERIA VARCHAR2(255),
	AWARD_REMARKS VARCHAR2(1000),
	CREATED_DATE TIMESTAMP,
	GRAND_TOTAL_PRICE NUMBER(20,6),
	MODIFIED_DATE TIMESTAMP,
	TOTAL_AWARD_PRICE NUMBER(20,6),
	TOTAL_SUPPLIER_PRICE NUMBER(20,6),
	CREATED_BY VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	BQ_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK5LD8I153614DUOV3SHUS0GQ9U FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKQFK8NS7OMH7RK763O8JX0XS0F FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFP_EVENT_AWD FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFP_EVENTS(ID),
	CONSTRAINT FK_RFP_EVNT_AWD_BQ FOREIGN KEY (BQ_ID) REFERENCES PROC_RFP_EVENT_BQ(ID)
	) ;
	
	CREATE TABLE PROC_RFQ_EVENT_AWARD (
	ID VARCHAR2(64),
	AWARD_CRITERIA VARCHAR2(255),
	AWARD_REMARKS VARCHAR2(1000),
	CREATED_DATE TIMESTAMP,
	GRAND_TOTAL_PRICE NUMBER(20,6),
	MODIFIED_DATE TIMESTAMP,
	TOTAL_AWARD_PRICE NUMBER(20,6),
	TOTAL_SUPPLIER_PRICE NUMBER(20,6),
	CREATED_BY VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	BQ_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK9RY3X1CQDXS4T5QJ0RJA7W5IA FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKN90UJQPXA9GLSOMQO18V7TKHG FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFQ_EVENT_AWD FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID),
	CONSTRAINT FK_RFQ_EVNT_AWD_BQ FOREIGN KEY (BQ_ID) REFERENCES PROC_RFQ_EVENT_BQ(ID)
	) ;

	CREATE TABLE PROC_RFT_EVENT_AWARD (
	ID VARCHAR2(64),
	AWARD_CRITERIA VARCHAR2(255),
	AWARD_REMARKS VARCHAR2(1000),
	CREATED_DATE TIMESTAMP,
	GRAND_TOTAL_PRICE NUMBER(20,6),
	MODIFIED_DATE TIMESTAMP,
	TOTAL_AWARD_PRICE NUMBER(20,6),
	TOTAL_SUPPLIER_PRICE NUMBER(20,6),
	CREATED_BY VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	BQ_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK7G7NQENDQ2TMRD8QJVVLJ343J FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKN87GOKNWQFNGDNQP816WFXSDY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFT_EVENT_AWD FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID),
	CONSTRAINT FK_RFT_EVNT_AWD_BQ FOREIGN KEY (BQ_ID) REFERENCES PROC_RFT_EVENT_BQ(ID)
	) ;

	
	-- Award Details
	CREATE TABLE PROC_RFA_EVENT_AWARD_DETAILS (
	EVENT_AWARD_ID VARCHAR2(64),
	AWARDED_PRICE NUMBER(20,6),
	ORIGINAL_PRICE NUMBER(20,6),
	TAX NUMBER(16,4),
	TAX_TYPE VARCHAR2(255),
	TOTAL_PRICE NUMBER(20,6),
	SUPPLIER_ID VARCHAR2(64),
	BQ_ITEM_ID VARCHAR2(64),
	EVENT_AWARD VARCHAR2(64),
	PRIMARY KEY (EVENT_AWARD_ID),
	CONSTRAINT FKRXNQISRQE2LYOFGO5L1FO12WT FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID),
	CONSTRAINT FK_RFA_EVNT_AWD_BQ_ITEM FOREIGN KEY (BQ_ITEM_ID) REFERENCES PROC_RFA_EVENT_BQ_ITEM(ID),
	CONSTRAINT FK_RFA_EVNT_AWD_DT FOREIGN KEY (EVENT_AWARD) REFERENCES PROC_RFA_EVENT_AWARD(ID)
	) ;
	
	CREATE TABLE PROC_RFP_EVENT_AWARD_DETAILS (
	EVENT_AWARD_ID VARCHAR2(64),
	AWARDED_PRICE NUMBER(20,6),
	ORIGINAL_PRICE NUMBER(20,6),
	TAX NUMBER(16,4),
	TAX_TYPE VARCHAR2(255),
	TOTAL_PRICE NUMBER(20,6),
	SUPPLIER_ID VARCHAR2(64),
	BQ_ITEM_ID VARCHAR2(64),
	EVENT_AWARD VARCHAR2(64),
	PRIMARY KEY (EVENT_AWARD_ID),
	CONSTRAINT FKOLFVMKBG8EB0546LKLYSD33KT FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID),
	CONSTRAINT FK_RFP_EVNT_AWD_BQ_ITEM FOREIGN KEY (BQ_ITEM_ID) REFERENCES PROC_RFP_EVENT_BQ_ITEM(ID),
	CONSTRAINT FK_RFP_EVNT_AWD_DT FOREIGN KEY (EVENT_AWARD) REFERENCES PROC_RFP_EVENT_AWARD(ID)
	) ;

	
	CREATE TABLE PROC_RFQ_EVENT_AWARD_DETAILS (
	EVENT_AWARD_ID VARCHAR2(64),
	AWARDED_PRICE NUMBER(20,6),
	ORIGINAL_PRICE NUMBER(20,6),
	TAX NUMBER(16,4),
	TAX_TYPE VARCHAR2(255),
	TOTAL_PRICE NUMBER(20,6),
	SUPPLIER_ID VARCHAR2(64),
	BQ_ITEM_ID VARCHAR2(64),
	EVENT_AWARD VARCHAR2(64),
	PRIMARY KEY (EVENT_AWARD_ID),
	CONSTRAINT FKA8UD88IOHY9D3A2VOK6SJEN30 FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID),
	CONSTRAINT FK_RFQ_EVNT_AWD_BQ_ITEM FOREIGN KEY (BQ_ITEM_ID) REFERENCES PROC_RFQ_EVENT_BQ_ITEM(ID),
	CONSTRAINT FK_RFQ_EVNT_AWD_DT FOREIGN KEY (EVENT_AWARD) REFERENCES PROC_RFQ_EVENT_AWARD(ID)
	) ;
	
	CREATE TABLE PROC_RFT_EVENT_AWARD_DETAILS (
	EVENT_AWARD_ID VARCHAR2(64),
	AWARDED_PRICE NUMBER(20,6),
	ORIGINAL_PRICE NUMBER(20,6),
	TAX NUMBER(16,4),
	TAX_TYPE VARCHAR2(255),
	TOTAL_PRICE NUMBER(20,6),
	SUPPLIER_ID VARCHAR2(64),
	BQ_ITEM_ID VARCHAR2(64),
	EVENT_AWARD VARCHAR2(64),
	PRIMARY KEY (EVENT_AWARD_ID),
	CONSTRAINT FKLMUNPYG9CVFKYE4IDVN8S5YV FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID),
	CONSTRAINT FK_RFT_EVNT_AWD_BQ_ITEM FOREIGN KEY (BQ_ITEM_ID) REFERENCES PROC_RFT_EVENT_BQ_ITEM(ID),
	CONSTRAINT FK_RFT_EVNT_AWD_DT FOREIGN KEY (EVENT_AWARD) REFERENCES PROC_RFT_EVENT_AWARD(ID)
	) ;

	ALTER TABLE PROC_PR ADD ERP_DOC_NO VARCHAR2(64);
	ALTER TABLE PROC_PR ADD ERP_STATUS VARCHAR2(64);
	ALTER TABLE PROC_PR ADD ERP_MESSAGE VARCHAR2(1050);
	ALTER TABLE PROC_PR ADD IS_FINAL_APPROVED NUMBER(1);
	--INSERT INTO PROC_ERP_SETUP
	--(ID, ERP_URL, IS_ERP_ENABLE, TENANT_ID, EVENT_TYPE, RFA_TEMPLATE_ID, RFT_TEMPLATE_ID, RFP_TEMPLATE_ID, RFQ_TEMPLATE_ID, APP_ID)
	--VALUES('11111', 'http://ep.westports.com.my/erpagent', 1, '====tenantId===', 'Request for Auction', '==RfaTemplateId====', NULL, NULL, NULL, '284c6798089445cf444516eea037feff1ad25dbe27ef7800a22dd2888ba6aa34');

	
	
	
	-- Table FOR Award Audit
	CREATE TABLE PROC_RFT_EVENT_AWARD_AUDIT (
	ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	THE_DESCRIPTION VARCHAR2(3000),
	AUDIT_SNAPSHOT BLOB,
	AUDIT_EXCEL_SNAPSHOT BLOB,
	ACTION_BY VARCHAR2(64),
	TENANT_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FKFBAUFVIY28NVQ2YJFGJERHCQI FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKHN77KPS6EMG7VCA3DUYO2VX4L FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_RFT_AWD_AUDIT_EVNT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID)
	);

	CREATE TABLE PROC_RFP_EVENT_AWARD_AUDIT (
	ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	THE_DESCRIPTION VARCHAR2(3000),
	AUDIT_SNAPSHOT BLOB,
	AUDIT_EXCEL_SNAPSHOT BLOB,
	ACTION_BY VARCHAR2(64),
	TENANT_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FKFBAUFVIY28NVQ2YJFGJERYCQI FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKHN77KPS6EMG7VCA3DUYO2OX4L FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_RFP_AWD_AUDIT_EVNT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFP_EVENTS(ID)
	);
	
	CREATE TABLE PROC_RFQ_EVENT_AWARD_AUDIT (
	ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	THE_DESCRIPTION VARCHAR2(3000),
	AUDIT_SNAPSHOT BLOB,
	AUDIT_EXCEL_SNAPSHOT BLOB,
	ACTION_BY VARCHAR2(64),
	TENANT_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FKFBAUFVIY28NVQ2YJFPJERHCQI FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKHN77KPS6EMG7VCA3DRYO2VX4L FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_RFQ_AWD_AUDIT_EVNT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID)
	);
	
	CREATE TABLE PROC_RFA_EVENT_AWARD_AUDIT (
	ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	THE_DESCRIPTION VARCHAR2(3000),
	AUDIT_SNAPSHOT BLOB,
	AUDIT_EXCEL_SNAPSHOT BLOB,
	ACTION_BY VARCHAR2(64),
	TENANT_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FKFBAUFVIY28NVQ1YJFGJERHCQI FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKHN77KPS6EMG8VCA3DUYO2VX4L FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_RFA_AWD_AUDIT_EVNT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID)
	);
	
	-- Add Rfx table for multiple industry categories.
				CREATE TABLE PROC_RFA_EVENT_INDUS_CAT (
			  EVENT_ID VARCHAR2(64) NOT NULL ENABLE,
			  IND_CAT_ID VARCHAR2(64) NOT NULL ENABLE
			);
			CREATE TABLE PROC_RFI_EVENT_INDUS_CAT (
			  EVENT_ID VARCHAR2(64) NOT NULL ENABLE,
			  IND_CAT_ID VARCHAR2(64) NOT NULL ENABLE
			);
			CREATE TABLE PROC_RFP_EVENT_INDUS_CAT (
			  EVENT_ID VARCHAR2(64) NOT NULL ENABLE,
			  IND_CAT_ID VARCHAR2(64) NOT NULL ENABLE
			);
			CREATE TABLE PROC_RFQ_EVENT_INDUS_CAT (
			  EVENT_ID VARCHAR2(64) NOT NULL ENABLE,
			  IND_CAT_ID VARCHAR2(64) NOT NULL ENABLE
			);
			CREATE TABLE PROC_RFT_EVENT_INDUS_CAT (
			  EVENT_ID VARCHAR2(64) NOT NULL ENABLE,
			  IND_CAT_ID VARCHAR2(64) NOT NULL ENABLE
			);

	
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD SUPPLIER_BASED_ON_CATEG NUMBER(1);
	
	ALTER TABLE PROC_ERP_SETUP ADD IS_GENERATE_PO NUMBER(1);
	
	ALTER TABLE PROC_ERP_SETUP ADD CREATE_EVENT_AUTO NUMBER(1);

	ALTER TABLE PROC_ERP_AUDIT ADD PR_NO VARCHAR2(64);
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD AUTO_POPULATE_SUPPLIER NUMBER(1);
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD READ_ONLY_SUPPLIER NUMBER(1);
	
	
	ALTER TABLE PROC_RFA_EVENTS ADD IS_AWARDED NUMBER(1);

	ALTER TABLE PROC_RFI_EVENTS ADD IS_AWARDED NUMBER(1);

	ALTER TABLE PROC_RFP_EVENTS ADD IS_AWARDED NUMBER(1);

	ALTER TABLE PROC_RFQ_EVENTS ADD IS_AWARDED NUMBER(1);

	ALTER TABLE PROC_RFT_EVENTS ADD IS_AWARDED NUMBER(1);
	
	ALTER TABLE PROC_PR ADD IS_ERP_TRANSFER NUMBER(1);
	
	ALTER TABLE PROC_BUYER_SETTINGS ADD ERP_NOTIFICATION_EMAILS VARCHAR2(600);

	
	ALTER TABLE PROC_RFA_EVENTS ADD ERP_DOC_NO VARCHAR2(64);

	ALTER TABLE PROC_RFI_EVENTS ADD ERP_DOC_NO VARCHAR2(64);

	ALTER TABLE PROC_RFP_EVENTS ADD ERP_DOC_NO VARCHAR2(64);

	ALTER TABLE PROC_RFQ_EVENTS ADD ERP_DOC_NO VARCHAR2(64);

	ALTER TABLE PROC_RFT_EVENTS ADD ERP_DOC_NO VARCHAR2(64);

	ALTER TABLE PROC_BUYER ADD ERP_ENABLE NUMBER(1) DEFAULT 0;
	
	-- -------------------------
	--     AXA Running Number -- 
	-- -------------------------
	
	
	ALTER TABLE PROC_ID_SETTINGS ADD ID_SETTING_TYPE VARCHAR2(100);
	
	ALTER TABLE PROC_ID_SETTINGS ADD ID_SETTING_PATTERN VARCHAR2(250);

	ALTER TABLE PROC_BUSINESS_UNIT ADD ID_SEQUENCE NUMBER(10);

	ALTER TABLE PROC_BUSINESS_UNIT ADD BUSINESS_UNIT_CODE VARCHAR2(4);

	CREATE TABLE PROC_RFQ_EVENT_AWARD_AUDIT (
	ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	THE_DESCRIPTION VARCHAR2(3000),
	AUDIT_SNAPSHOT BLOB,
	AUDIT_EXCEL_SNAPSHOT BLOB,
	ACTION_BY VARCHAR2(64),
	TENANT_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FKFBAUFVIY28NVQ2YJFPJERHCQI FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKHN77KPS6EMG7VCA3DRYO2VX4L FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_RFQ_AWD_AUDIT_EVNT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID)
	);
	
	------------------------------
	---FREE TRAIL Enquiry Table---
	------------------------------

	CREATE TABLE PROC_FREE_TRIAL_ENQUIRY ( 
	ID VARCHAR2(64),
	SIGNUP_DATE TIMESTAMP,
	CREATED_DATE TIMESTAMP,
	FOLLOWUP_EMAIL_DATE TIMESTAMP,
	EMAIL_ID VARCHAR2(250),
	IP_ADDRESS VARCHAR2(100),
	USER_NAME VARCHAR2(250),
	FOLLOWUP_EMAIL_SENT NUMBER(1),
	PRIMARY KEY (ID)
	);
	--------------------------------------------
	--PH-41 RFX AND PR TEMPLATE TEAM MEMBERS TABLE----
	--------------------------------------------

	CREATE TABLE PROC_TEMPLATE_PR_TEAM (
	ID varchar(64) NOT NULL,
	USER_ID varchar(255) NOT NULL,
	MEMBER_TYPE varchar(255) NOT NULL,
	PR_TEMPLATE_ID varchar(64),
	PRIMARY KEY (ID),
	foreign key (USER_ID) references PROC_USER(id),
	constraint FK_TMPL_PR_TEAM_MEMBERS_ID foreign key (PR_TEMPLATE_ID) references PROC_PR_TEMPLATE(ID));



	CREATE TABLE PROC_TEMPLATE_EVENT_TEAM (
	ID VARCHAR(64) NOT NULL,
	USER_ID varchar(255) NOT NULL,
	MEMBER_TYPE varchar(255) NOT NULL,
	RFX_TEMPLATE_ID varchar(64),
	PRIMARY KEY(ID),
	foreign key (USER_ID) references  PROC_USER(id),
	constraint FK_TMPL_EVENT_TEAM_MEMBERS_ID foreign key (RFX_TEMPLATE_ID) references PROC_RFX_TEMPLATE(ID));
	
	
	---------------------------
	--------- GST CR	 ------
	---------------------------
	
	ALTER TABLE PROC_BUYER_PLAN ADD TAX DECIMAL(20,4) default 0;
	
	ALTER TABLE PROC_SUPPLIER_PLAN ADD TAX DECIMAL(20,4) default 0;
	
	
	--------------------------------------------------
	--------- Create Hidden plan for Free trail ------
	--------------------------------------------------
	 
--	INSERT INTO PROC_BUYER_PLAN
-- (ID, CREATED_DATE, DESCRIPTION, MODIFIED_DATE, PLAN_NAME, PLAN_ORDER, PLAN_STATUS, PLAN_TYPE, SHORT_DESCRIPTION, CREATED_BY, CURRENCY_CODE, MODIFIED_BY, BASE_PRICE, BASE_USERS, TAX)
-- VALUES('2c9fa58b5e6fbb8a015e6fc4f9980008', TIMESTAMP '2017-06-18 07:08:53.526000', NULL, NULL, 'FREETRIAL', 3, 'HIDDEN', 'PER_USER', 'Free Trial', '2c9fa58b5ca1b4dc015ca1b546d80002', '2c9fa58b5ca1b4dc015ca1b5f81d1b6a', NULL, NULL, 9999, 0);


-- INSERT INTO PROC_PLAN_RANGE
-- (ID, DISPLAY_LABEL, PRICE, RANGE_END, RANGE_START, BUYER_PLAN_ID)
-- VALUES('2c9fa58b6180679a016188cdaba1007', '1 to 9999', 0, 9999, 1, '2c9fa58b5e6fbb8a015e6fc4f9980008');

	-------------------------
	------Free Trial--------
	--------------------------
	
	ALTER TABLE PROC_BUYER_SUBSCRIPTION ADD IS_TRIAL NUMBER(1); -- set true for trail buyers
	
	ALTER TABLE PROC_PAYMENT_TRANSACTION ADD IS_CAPTURE_PAYMENT NUMBER(1); -- set false for trail buyers
	
	-- ----------------------------------------------------------------
	-- FREE TRIAL ENHANCEMENTS DATED: 24th AUG 2018 (EMAIL FROM CONRAD)
	-- Added by Nitin on 27th Aug 2018
	-- ----------------------------------------------------------------

	ALTER TABLE PROC_BUYER ADD POSTCODE VARCHAR2(15)

	
	
	
	--------------------------------------------------
	--------- Auction Console Setting for Buyer-------
	--------------------------------------------------
	
	ALTER TABLE PROC_AUCTION_RULES ADD AUCTION_BUY_CON_PRICE_TYPE VARCHAR2(100);
	
	ALTER TABLE PROC_AUCTION_RULES ADD AUCTION_BUY_CON_VENDER_TYPE VARCHAR2(100);
	
	ALTER TABLE PROC_AUCTION_RULES ADD AUCTION_BUY_CON_RANK_TYPE VARCHAR2(100);
	
	
	
	----------------------------------
	---------Closing Account----------
	----------------------------------
	
	
	ALTER TABLE PROC_BUYER_SETTINGS ADD IS_ACCOUNT_CLOSE NUMBER(1) default 0;

	ALTER TABLE PROC_BUYER_SETTINGS ADD CLOSE_REQUEST_DATE TIMESTAMP;
	
	ALTER TABLE PROC_BUYER_SETTINGS ADD REQUEST_CANCAL_DATE TIMESTAMP;
	
	ALTER TABLE PROC_BUYER_SETTINGS ADD IS_DATA_EXPORT NUMBER(1) default 0;

	ALTER TABLE PROC_BUYER_SETTINGS ADD EXPORT_DATE TIMESTAMP;
	
	ALTER TABLE PROC_BUYER_SETTINGS ADD EXPORT_URL VARCHAR2(1000);
	
	ALTER TABLE PROC_BUYER_SETTINGS ADD USER_REQUESTED_BY VARCHAR2(64);
	
	ALTER TABLE PROC_BUYER_SETTINGS ADD CONSTRAINT FK_BUYERSET_REQUEST_BY FOREIGN KEY (USER_REQUESTED_BY) REFERENCES PROC_USER (ID);

	
	
		
	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD IS_ACCOUNT_CLOSE NUMBER(1) default 0;

	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD CLOSE_REQUEST_DATE TIMESTAMP;
	
	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD REQUEST_CANCAL_DATE TIMESTAMP;

	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD IS_DATA_EXPORT NUMBER(1) default 0;

	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD EXPORT_DATE TIMESTAMP;
	
	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD EXPORT_URL VARCHAR2(1000);

	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD USER_REQUESTED_BY VARCHAR2(64);
	
	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD CONSTRAINT FK_SUPPSET_REQUEST_BY FOREIGN KEY (USER_REQUESTED_BY) REFERENCES PROC_USER (ID);

	
	
	ALTER TABLE PROC_BUYER_SETTINGS ADD IS_REQUEST_BACKUP NUMBER(1) default 0;
	
	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD IS_REQUEST_BACKUP NUMBER(1) default 0;
	
	
	
	-----------------------------------------------
	--------- Wesports New Requirement CR	 ------
	-----------------------------------------------
	
	
	ALTER TABLE PROC_RFT_EVENTS ADD CONCLUDE_DATE TIMESTAMP;
	ALTER TABLE PROC_RFA_EVENTS ADD CONCLUDE_DATE TIMESTAMP;
	ALTER TABLE PROC_RFI_EVENTS ADD CONCLUDE_DATE TIMESTAMP;
	ALTER TABLE PROC_RFP_EVENTS ADD CONCLUDE_DATE TIMESTAMP;
	ALTER TABLE PROC_RFQ_EVENTS ADD CONCLUDE_DATE TIMESTAMP;
	
	
	ALTER TABLE PROC_RFT_EVENTS ADD CONCLUDE_BY VARCHAR2(64);
	ALTER TABLE PROC_RFT_EVENTS ADD CONSTRAINT FK_RFT_CONCLUDE_BY_ID FOREIGN KEY (CONCLUDE_BY) REFERENCES PROC_USER (ID);
	
	ALTER TABLE PROC_RFI_EVENTS ADD CONCLUDE_BY VARCHAR2(64);
	ALTER TABLE PROC_RFI_EVENTS ADD CONSTRAINT FK_RFI_CONCLUDE_BY_ID FOREIGN KEY (CONCLUDE_BY) REFERENCES PROC_USER (ID);

	ALTER TABLE PROC_RFP_EVENTS ADD CONCLUDE_BY VARCHAR2(64);
	ALTER TABLE PROC_RFP_EVENTS ADD CONSTRAINT FK_RFP_CONCLUDE_BY_ID FOREIGN KEY (CONCLUDE_BY) REFERENCES PROC_USER (ID);
	
	ALTER TABLE PROC_RFQ_EVENTS ADD CONCLUDE_BY VARCHAR2(64);
	ALTER TABLE PROC_RFQ_EVENTS ADD CONSTRAINT FK_RFQ_CONCLUDE_BY_ID FOREIGN KEY (CONCLUDE_BY) REFERENCES PROC_USER (ID);
	
	ALTER TABLE PROC_RFA_EVENTS ADD CONCLUDE_BY VARCHAR2(64);
	ALTER TABLE PROC_RFA_EVENTS ADD CONSTRAINT FK_RFA_CONCLUDE_BY_ID FOREIGN KEY (CONCLUDE_BY) REFERENCES PROC_USER (ID);
	
	
	----------------------------------------------------
	-------- Audit Trail        ------------------------
	----------------------------------------------------
	ALTER TABLE PROC_BUYER_AUDIT_TRAIL ADD MODULE_TYPE VARCHAR2(32);
	ALTER TABLE PROC_OWNER_AUDIT_TRAIL ADD MODULE_TYPE VARCHAR2(32);
	ALTER TABLE PROC_SUPPLIER_AUDIT_TRAIL ADD MODULE_TYPE VARCHAR2(32);
	ALTER TABLE PROC_FINANCE_AUDIT_TRAIL ADD MODULE_TYPE VARCHAR2(32);
	
	
	
	
	
	
	ALTER TABLE PROC_RFA_EVENT_CQ_ITEM ADD IS_SUPPLIER_ATTACH_REQUIRED NUMBER(1) default 0;
	ALTER TABLE PROC_RFI_EVENT_CQ_ITEM ADD IS_SUPPLIER_ATTACH_REQUIRED NUMBER(1) default 0;
	ALTER TABLE PROC_RFP_EVENT_CQ_ITEM ADD IS_SUPPLIER_ATTACH_REQUIRED NUMBER(1) default 0;
	ALTER TABLE PROC_RFQ_EVENT_CQ_ITEM ADD IS_SUPPLIER_ATTACH_REQUIRED NUMBER(1) default 0;
	ALTER TABLE PROC_RFT_EVENT_CQ_ITEM ADD IS_SUPPLIER_ATTACH_REQUIRED NUMBER(1) default 0;
	
	------------------------------------------------------------------------------------------------
	--------PH-80 Extend the Subscription of Buyer AXA AFFIN GENERAL INSURANCE BERHAD---------------
	------------------------------------------------------------------------------------------------
	
	INSERT	INTO PROC_PROD_DB.PROC_BUYER_SUBSCRIPTION (	ID,ACTIVATED_DATE,CANCELLED_DATE,CREATED_DATE,CURRENCY_CODE,END_DATE,EVENT_QUANTITY,PLAN_TYPE,PRICE_AMOUNT,	PRICE_DISCOUNT,	PROMO_CODE_DISCOUNT,START_DATE,SUBSCRIPTION_CANCEL_REASON,SUBSCRIPTION_STATUS,TOTAL_PRICE_AMOUNT,USER_QUANTITY,BUYER_ID,NEXT_SUBSCRIPTION_ID,BUYER_PLAN_ID,PERIOD_ID,RANGE_ID,IMMEDIATE_EFFECT,PAYMENT_PROFILE_ID,AUTO_CHARGE_SUBSCRIPTION,RECURRING_CANCEL_DATE,RECURRING_CANCEL_REMARKS,IS_TRIAL)
	VALUES('2c9fc3785deaa44e015e12daba3604fc',TIMESTAMP '2017-08-24 06:07:58.148000',NULL,TIMESTAMP '2017-08-24 06:07:58.144000',NULL,TIMESTAMP '2018-09-04 00:00:00.059000',9999,'PER_USER',0,	NULL,NULL,TIMESTAMP '2017-08-24 00:00:00.000000',NULL,'ACTIVE',	0,4,'2c9fc3785deaa44e015e12daba3604fd',	NULL,'2c9fde455eb8bb1b015ec143700a00d0','2c9fde455eb8bb1b015ec143700a00d3','1111111',0,	NULL,NULL,NULL,	NULL,NULL);

	
	
	----------------------------------------------------
	--------PR ITEM SCREEN RESTRUCTURING----------------
	----------------------------------------------------
	
	ALTER TABLE PROC_PR_ITEM ADD FREE_ITEM_TEXT_ENTERED NUMBER(1) default 0;
	
	ALTER TABLE PROC_PR_ITEM ADD UOM_ID VARCHAR2(64);
	ALTER TABLE PROC_PR_ITEM ADD CONSTRAINT FK_PR_UOM_ID FOREIGN KEY (UOM_ID) REFERENCES PROC_BUYER_UOM (ID);

	ALTER TABLE PROC_PR_ITEM ADD PRODUCT_CATEGORY_ID VARCHAR2(64);
	ALTER TABLE PROC_PR_ITEM ADD CONSTRAINT FK_PR_ITEM_CAT_ID FOREIGN KEY (PRODUCT_CATEGORY_ID) REFERENCES PROC_PRODUCT_CATEGORY (ID);
	

	CREATE
	TABLE
		PROC_FAV_SUPP_PRD_CAT(
			FAV_SUPP_ID VARCHAR2(64),
			PRODUCT_CAT_ID VARCHAR2(64),
			FOREIGN KEY (FAV_SUPP_ID) REFERENCES PROC_FAVOURITE_SUPPLIER(FAV_SUPPLIER_ID),
			FOREIGN KEY (PRODUCT_CAT_ID) REFERENCES PROC_PRODUCT_CATEGORY(ID)
		)


	
	
	
	
	
	------------------------------------------------------------------------------------------------
	--------production issue fixed duplicate category created --------------------------------------
	------------------------------------------------------------------------------------------------
	SELECT * FROM PROC_INDUSTRY_CATEGORY  left   WHERE ID IN ('2c9fde4565a9f93f0165f08bdf6b3343','2c9fde4565a9f93f0165f08bdf6b3341','2c9fde4565a9f93f0165f08bdf6e3347','2c9fde4565a9f93f0165f08bdf6b333d','2c9fde4565a9f93f0165f08bdf6c3345','2c9fde4565a9f93f0165f08bdf6b333f')
	SELECT * FROM PROC_RFQ_EVENT_INDUS_CAT WHERE IND_CAT_ID IN ('2c9fde4565a9f93f0165f08bdf6b3343','2c9fde4565a9f93f0165f08bdf6b3341','2c9fde4565a9f93f0165f08bdf6e3347','2c9fde4565a9f93f0165f08bdf6b333d','2c9fde4565a9f93f0165f08bdf6c3345','2c9fde4565a9f93f0165f08bdf6b333f')
	SELECT * FROM PROC_RFT_EVENT_INDUS_CAT WHERE IND_CAT_ID IN ('2c9fde4565a9f93f0165f08bdf6b3343','2c9fde4565a9f93f0165f08bdf6b3341','2c9fde4565a9f93f0165f08bdf6e3347','2c9fde4565a9f93f0165f08bdf6b333d','2c9fde4565a9f93f0165f08bdf6c3345','2c9fde4565a9f93f0165f08bdf6b333f')
	SELECT * FROM PROC_RFP_EVENT_INDUS_CAT WHERE IND_CAT_ID IN ('2c9fde4565a9f93f0165f08bdf6b3343','2c9fde4565a9f93f0165f08bdf6b3341','2c9fde4565a9f93f0165f08bdf6e3347','2c9fde4565a9f93f0165f08bdf6b333d','2c9fde4565a9f93f0165f08bdf6c3345','2c9fde4565a9f93f0165f08bdf6b333f')
	SELECT * FROM PROC_RFA_EVENT_INDUS_CAT WHERE IND_CAT_ID IN ('2c9fde4565a9f93f0165f08bdf6b3343','2c9fde4565a9f93f0165f08bdf6b3341','2c9fde4565a9f93f0165f08bdf6e3347','2c9fde4565a9f93f0165f08bdf6b333d','2c9fde4565a9f93f0165f08bdf6c3345','2c9fde4565a9f93f0165f08bdf6b333f')
	SELECT * FROM PROC_RFI_EVENT_INDUS_CAT WHERE IND_CAT_ID IN ('2c9fde4565a9f93f0165f08bdf6b3343','2c9fde4565a9f93f0165f08bdf6b3341','2c9fde4565a9f93f0165f08bdf6e3347','2c9fde4565a9f93f0165f08bdf6b333d','2c9fde4565a9f93f0165f08bdf6c3345','2c9fde4565a9f93f0165f08bdf6b333f')
	SELECT * FROM PROC_FAV_SUPP_IND_CAT WHERE IND_CAT_ID IN ('2c9fde4565a9f93f0165f08bdf6b3343','2c9fde4565a9f93f0165f08bdf6b3341','2c9fde4565a9f93f0165f08bdf6e3347','2c9fde4565a9f93f0165f08bdf6b333d','2c9fde4565a9f93f0165f08bdf6c3345','2c9fde4565a9f93f0165f08bdf6b333f')
	SELECT * FROM PROC_FAV_SUPP_IND_CAT WHERE IND_CAT_ID ='2c9fde4565a9f93f0165f08bdf6b3343'
	DELETE FROM PROC_INDUSTRY_CATEGORY WHERE CATEGORY_CODE='3012' AND ID <> '2c9fde4565a9f93f0165f08bdf6b3343'
	SELECT CATEGORY_CODE, count(*) FROM PROC_INDUSTRY_CATEGORY GROUP BY CATEGORY_CODE HAVING count(CATEGORY_CODE) > 1

	
	
	------------------------------------------------------------------------------------------------
	--------PH-89 Supplier Registration Verification - ZCUBE DESIGNS SDN BHD------------------------
	------------------------------------------------------------------------------------------------
	buyerId: 2c9fde4565a9f93f0165e25d351a2923
	supplier Id:2c9fde4565a9f93f0165cc39e0471ebe

	SELECT * FROM PROC_BUYER WHERE LOGIN_EMAIL ='zcube.info@gmail.com' AND COMPANY_NAME ='Zcube designs sdn bhd'
	SELECT * FROM PROC_SUPPLIER WHERE LOGIN_EMAIL ='zcube.info@gmail.com' AND COMPANY_NAME ='zcube designs sdn bhd'
	SELECT * FROM PROC_USER WHERE TENANT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	select * from PROC_BUYER WHERE BUYER_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_BUYER WHERE BUYER_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_BUYER_ADDRESS where BUYER_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_BUSINESS_UNIT where TANENT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_INDUSTRY_CATEGORY where TANENT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	/*set BUYER_PACKAGE null*/
	DELETE from PROC_BUYER_PACKAGE where BUYER_ID ='2c9fde4565a9f93f0165e25d351a2923'
	/*set PROC_BUYER_SUBSCRIPTION null*/
	DELETE from PROC_BUYER_SUBSCRIPTION where BUYER_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_COST_CENTER where TANENT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_PRODUCT_ITEM where TENANT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_PRODUCT_CATEGORY where TENANT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_BUYER_UOM where BUYER_ID ='2c9fde4565a9f93f0165e25d351a2923'
	select * from PROC_USER where BUYER_ID ='2c9fde4565a9f93f0165e25d351a2923' or TENANT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_SECURITY_TOKEN where USER_TOKEN ='2c9fde4565a9f93f0165e25d35282926'
	DELETE from PROC_BUYER_AUDIT_TRAIL WHERE TENANT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_BUYER_NOTIFICATION WHERE TENANT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_NOTIFICATION_MESSAGE WHERE TENANT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	DELETE from PROC_USER where BUYER_ID ='2c9fde4565a9f93f0165e25d351a2923' or TENANT_ID ='2c9fde4565a9f93f0165e25d351a2923'
	
	COMMIT
	
	
	------------------------------------------------------------------------------------------------
	--------PH-107 [Enhancement] Increase ipAddress field limit-------------------------------------
	------------------------------------------------------------------------------------------------
	ALTER TABLE PROC_FREE_TRIAL_ENQUIRY MODIFY IP_ADDRESS VARCHAR2(500) ;
	
	
	------------------------------------------------------------------------------------------------
	--------PH-95 RFQ Running Number Formatting-----------------------------------------------------
	------------------------------------------------------------------------------------------------
	ALTER TABLE PROC_ERP_SETUP ADD ERP_SEQ_NO NUMBER(3);
	ALTER TABLE PROC_ERP_SETUP ADD ERP_SEQ_MONTH NUMBER(2);


	------------------------------------------------------------------------------------------------
	--------Return RFQ response from SAP to PH------------------------------------------------------
	------------------------------------------------------------------------------------------------
	ALTER TABLE PROC_RFT_EVENTS ADD ERP_AWARD_REF_ID VARCHAR2(500);
	ALTER TABLE PROC_RFT_EVENTS ADD ERP_AWARD_RESPONSE VARCHAR2(2000);
		
	ALTER TABLE PROC_RFA_EVENTS ADD ERP_AWARD_REF_ID VARCHAR2(500);
	ALTER TABLE PROC_RFA_EVENTS ADD ERP_AWARD_RESPONSE VARCHAR2(2000);
		
	ALTER TABLE PROC_RFP_EVENTS ADD ERP_AWARD_REF_ID VARCHAR2(500);
	ALTER TABLE PROC_RFP_EVENTS ADD ERP_AWARD_RESPONSE VARCHAR2(2000);
		
	ALTER TABLE PROC_RFQ_EVENTS ADD ERP_AWARD_REF_ID VARCHAR2(500);
	ALTER TABLE PROC_RFQ_EVENTS ADD ERP_AWARD_RESPONSE VARCHAR2(2000);

	------------------------------------------------------------------------------------------------
	--------------------------------- Additional Tax Field   ---------------------------------------
	------------------------------------------------------------------------------------------------
	ALTER TABLE PROC_RFT_EVENTS ADD  IS_ERP_ENABLE  NUMBER(1) default 0;
	ALTER TABLE PROC_RFA_EVENTS ADD  IS_ERP_ENABLE  NUMBER(1) default 0;
	ALTER TABLE PROC_RFI_EVENTS ADD  IS_ERP_ENABLE  NUMBER(1) default 0;
	ALTER TABLE PROC_RFP_EVENTS ADD  IS_ERP_ENABLE  NUMBER(1) default 0;
	ALTER TABLE PROC_RFQ_EVENTS ADD  IS_ERP_ENABLE  NUMBER(1) default 0;
	
	
	
	
	
	------------------------------------------------------------------------------------------------
	---------------------------------PH-108 Close Supplier Account----------------------------------
	------------------------------------------------------------------------------------------------
	SELECT * FROM PROC_USER WHERE LOGIN_ID ='HONGJOO.TAN@CUMMINS.COM'
	SELECT * FROM PROC_SUPPLIER WHERE SUPPLIER_ID='2c9fde455bfab15f015c196f738c0000'
	UPDATE PROC_PROD_DB.PROC_SUPPLIER SET SUPPLIER_STATUS='SUSPPENDED' WHERE SUPPLIER_ID='2c9fde455bfab15f015c196f738c0000';

	
	
	
	
	------------------------------------------------------------------------------------------------
	------------PH-109 Supplier Request to update Company Login Email to include (.sg)--------------
	------------------------------------------------------------------------------------------------
	SELECT * FROM PROC_USER WHERE LOGIN_ID ='SF_SOLUTIONS@SINGNET.COM'
	OLD:SF_SOLUTIONS@SINGNET.COM
	UPDATE PROC_USER SET LOGIN_ID='SF_SOLUTIONS@SINGNET.COM.SG' WHERE ID='2c9fde455c779012015d2faa49780c83';

	SELECT * FROM PROC_SUPPLIER WHERE SUPPLIER_ID='2c9fde455c779012015d2fa29e0f0c7f'
	OLD:sf_solutions@singnet.com
	UPDATE PROC_SUPPLIER SET LOGIN_EMAIL='sf_solutions@singnet.com.sg' WHERE SUPPLIER_ID='2c9fde455c779012015d2fa29e0f0c7f';

	
	
	------------------------------------------------------------------------------------------------
	------------PH-110 Remove Supplier JIR ENGINEERING SDN BHD from the Free Trial Buyer List	----
	------------------------------------------------------------------------------------------------
	SELECT * FROM PROC_BUYER WHERE COMPANY_NAME ='JIR ENGINEERING SDN BHD'
	buyerID='2c9fde45647ef58801648c3aac4c0640'
	SELECT * FROM PROC_USER WHERE TENANT_ID ='2c9fde45647ef58801648c3aac4c0640'
	userid='2c9fde45647ef58801648c3aac580643'
	DELETE from PROC_BUYER_ADDRESS where BUYER_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_BUSINESS_UNIT where TANENT_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_INDUSTRY_CATEGORY where TANENT_ID ='2c9fde45647ef58801648c3aac4c0640'
	/*set BUYER_PACKAGE null*/
	DELETE from PROC_BUYER_PACKAGE where BUYER_ID ='2c9fde45647ef58801648c3aac4c0640'
	/*set PROC_BUYER_SUBSCRIPTION null*/
	DELETE from PROC_BUYER_SUBSCRIPTION where BUYER_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_COST_CENTER where TANENT_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_PRODUCT_ITEM where TENANT_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_PRODUCT_CATEGORY where TENANT_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_BUYER_UOM where BUYER_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_SECURITY_TOKEN where USER_TOKEN ='2c9fde45647ef58801648c3aac580643'
	DELETE from PROC_BUYER_AUDIT_TRAIL WHERE TENANT_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_BUYER_NOTIFICATION WHERE TENANT_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_NOTIFICATION_MESSAGE WHERE TENANT_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_USER where BUYER_ID ='2c9fde45647ef58801648c3aac4c0640' or TENANT_ID ='2c9fde45647ef58801648c3aac4c0640'
	DELETE from PROC_BUYER WHERE BUYER_ID ='2c9fde45647ef58801648c3aac4c0640'	
	
	--===========INVOICE FINANCE=============
	
	ALTER TABLE PROC_ACCESS_RIGHTS ADD (FOR_FINANCE_COMPANY NUMBER(1));
	
	
	--create table for finace company
	
	

	
	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD (IS_SHARE_ALL_PO NUMBER(1));
	
	
ALTER TABLE PROC_SUPPLIER_SETTINGS ADD (PO_SHARE VARCHAR2(20));
	
	
	CREATE TABLE PROC_FINANCE_COMPANY (
	FINANCE_COMPANY_ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	CITY VARCHAR2(64),
	COMMUNICATION_EMAIL VARCHAR2(128),
	COMPANY_CONTACT_NUMBER VARCHAR2(16),
	COMPANY_NAME VARCHAR2(128),
	COMPANY_REGISTRATION_NUMBER VARCHAR2(128),
	COMPANY_WEBSITE VARCHAR2(128),
	CREATED_DATE TIMESTAMP,
	FAX_NUMBER VARCHAR2(16),
	FULL_NAME VARCHAR2(128),
	ADRESS_LINE1 VARCHAR2(64),
	ADRESS_LINE2 VARCHAR2(64),
	LOGIN_EMAIL VARCHAR2(128),
	MOBILE_NUMBER VARCHAR2(16),
	PASSWORD VARCHAR2(64),
	IS_REGISTRATION_COMPLETE NUMBER(1,0),
	REGISTRATION_COMPLETE_DATE TIMESTAMP,
	FINANCE_COMPANY_STATUS VARCHAR2(255),
	SUSPENDED_REMARKS VARCHAR2(250),
	TERMS_OF_USE_ACCEPTED NUMBER(1,0),
	TERMS_OF_USE_ACCEPTED_DATE TIMESTAMP,
	YEAR_OF_ESTABLISHED NUMBER(10,0),
	ACTION_BY VARCHAR2(64),
	COMPANY_STATUS VARCHAR2(64),
	REGISTRATION_COUNTRY VARCHAR2(64),
	STATE_ID VARCHAR2(64),
	CONSTRAINT PK_FINANCE_COMPANY_ID PRIMARY KEY (FINANCE_COMPANY_ID),
	CONSTRAINT FK_FAINACE_ACTION_BY FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_FAINACE_COMP_STATUS FOREIGN KEY (COMPANY_STATUS) REFERENCES PROC_COMPANYSTATUS(ID),
	CONSTRAINT FK_FAINACE_REGISTERED_COUNTRY FOREIGN KEY (REGISTRATION_COUNTRY) REFERENCES PROC_COUNTRIES(ID),
	CONSTRAINT FK_FAINACE_STATE FOREIGN KEY (STATE_ID) REFERENCES PROC_STATE(ID)
	) ;
	
	
	ALTER TABLE PROC_USER ADD FINANCE_COMPANY_ID VARCHAR2(64);

	
		ALTER TABLE PROC_USER ADD CONSTRAINT FK_USER_FINANCE_COMPANY_ID FOREIGN KEY (FINANCE_COMPANY_ID) REFERENCES PROC_FINANCE_COMPANY (FINANCE_COMPANY_ID);

ALTER TABLE PROC_SUPPLIER_SETTINGS ADD PROC_SUPPLIER_FINANCE_ID VARCHAR2(64);

	ALTER TABLE PROC_SUPPLIER_SETTINGS ADD CONSTRAINT PROC_SUP_FIN_ID FOREIGN KEY (PROC_SUPPLIER_FINANCE_ID) REFERENCES PROC_FINANCE_COMPANY (FINANCE_COMPANY_ID); 
	
	
	
	
	-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL
CREATE TABLE PROC_FINANCE_NOTIFICATION (
	ID VARCHAR2(64),
	CREATED_DATE TIMESTAMP,
	MESSAGE_TEXT VARCHAR2(2000),
	NOTIFICATIONTYPE VARCHAR2(255),
	IS_PROCESSED NUMBER(1,0),
	PROCESSED_DATE TIMESTAMP,
	MESSAGE_SUBJECT VARCHAR2(250),
	TENANT_ID VARCHAR2(64),
	URL_LINK VARCHAR2(2000),
	CREATED_BY VARCHAR2(64),
	MESSAGE_TO VARCHAR2(64),
	CONSTRAINT SYS_C0026843 PRIMARY KEY (ID),
	CONSTRAINT FKJTL23T0WS5DWINLS2H0M8BUWN FOREIGN KEY (MESSAGE_TO) REFERENCES PROC_USER(ID),
	CONSTRAINT FKTN1NLI6EU4BXF2NO6O2NKCW0B FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID)
) ;




-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL
CREATE TABLE PROC_FINANCE_AUDIT_TRAIL (
	ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	ACTIVITY VARCHAR2(16),
	DESCRIPTION VARCHAR2(3000),
	TENANT_ID VARCHAR2(64),
	ACTION_BY VARCHAR2(64),
	CONSTRAINT SYS_C0026833 PRIMARY KEY (ID),
	CONSTRAINT FKBP5BHD4OXPB09PSBP32NN8ASQ FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID)
) ;
CREATE INDEX IDX_FINANCE_AUDIT ON PROC_FINANCE_AUDIT_TRAIL (TENANT_ID) ;



-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL
CREATE TABLE PROC_FINANCE_PO (
	ID VARCHAR2(64),
	CREATED_DATE TIMESTAMP,
	STATUS VARCHAR2(255),
	PO_TYPE VARCHAR2(255),
	MODIFIED_DATE TIMESTAMP,
	PAYMENT_DATE TIMESTAMP,
	REFERENCE_NUMBER VARCHAR2(64),
	REFERRAL_FEE NUMBER(20,4),
	REMARK VARCHAR2(255),
	REQUESTED_DATE TIMESTAMP,
	SHARED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	FINANCE_ID VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	PO_ID VARCHAR2(64),
	SUPPLIER_ID VARCHAR2(64),
	CONSTRAINT SYS_C0026846 PRIMARY KEY (ID),
	CONSTRAINT FKHNTCUWJDYBUBR7FNB71UMI6XL FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKQOO8EDUU55KQ1O18TGGNRBWCB FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_PR_FIN_COMP_MAP_ID FOREIGN KEY (FINANCE_ID) REFERENCES PROC_FINANCE_COMPANY(FINANCE_COMPANY_ID),
	CONSTRAINT FK_PR_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PR(ID),
	CONSTRAINT FK_PR_SUPPLIER_FINANCE_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID)
) ;





-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL
CREATE TABLE PROC_FINANCE_PO_AUDIT (
	ID VARCHAR2(64),
	ACTION_TYPE VARCHAR2(255),
	ACTION_DATE TIMESTAMP,
	THE_DESCRIPTION VARCHAR2(3000),
	REFERRAL_FEE NUMBER(20,4),
	REMARK VARCHAR2(255),
	ACTION_BY VARCHAR2(64),
	TENANT_ID VARCHAR2(64),
	FINANCE_PO_ID VARCHAR2(64),
	CONSTRAINT SYS_C0026850 PRIMARY KEY (ID),
	CONSTRAINT FKCQIQUP1JK6AI0A8OOMMNILE8X FOREIGN KEY (TENANT_ID) REFERENCES PROC_FINANCE_COMPANY(FINANCE_COMPANY_ID),
	CONSTRAINT FKIF3GB7P4QRRYWSK1A914JOEGE FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_FINANCE_PO_AUDIT FOREIGN KEY (FINANCE_PO_ID) REFERENCES PROC_FINANCE_PO(ID)
) ;





-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL
CREATE TABLE PROC_FINANCE_SETTINGS (
	ID VARCHAR2(64),
	CREATED_DATE TIMESTAMP,
	MODIFIED_DATE TIMESTAMP,
	SEQUENCE_LENGTH NUMBER(10,0),
	SEQUENCE_NUMBER VARCHAR2(64),
	SEQUENCE_PREFIX VARCHAR2(64),
	TENANT_ID VARCHAR2(64),
	CREATED_BY VARCHAR2(64),
	USER_LAST_MODIFIED_BY VARCHAR2(64),
	FINANCE_TIME_ZONE VARCHAR2(64),
	CONSTRAINT SYS_C0026856 PRIMARY KEY (ID),
	CONSTRAINT FK_FINANCEESET_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_FINANCESET_MODIFIED_BY FOREIGN KEY (USER_LAST_MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_FINANCESET_TIMEZONE FOREIGN KEY (FINANCE_TIME_ZONE) REFERENCES PROC_TIME_ZONE(ID)
) ;



-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL
CREATE TABLE PROC_PO_SHARE_BUYER (
	ID VARCHAR2(64),
	CREATED_DATE TIMESTAMP,
	MODIFIED_DATE TIMESTAMP,
	BUYER_ID VARCHAR2(64),
	CREATED_BY VARCHAR2(64),
	FINANCE_ID VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	SUPPLIER_ID VARCHAR2(64),
	CONSTRAINT SYS_C0026859 PRIMARY KEY (ID),
	CONSTRAINT FK1V3XWSBJNKNDH0U56WMVLXJVS FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FKD01OXSBFR025ISD4LCLB1J84H FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_BUYER_FC_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_PR_FIN_COM_MAP_ID FOREIGN KEY (FINANCE_ID) REFERENCES PROC_FINANCE_COMPANY(FINANCE_COMPANY_ID),
	CONSTRAINT FK_PR_SUP_FC_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID)
) ;


----------------------------------------------------------------------------------------------
-----------------------------------PH-143-----------------------------------------------------
----------------------------------------------------------------------------------------------

SELECT * FROM PROC_SUPPLIER WHERE COMPANY_NAME LIKE '%GREAT METAL ENTERPRISE%'
supplierId = 2c9fc3785d79fd98015da0ad00b304e1

SELECT * FROM PROC_SUPPLIER WHERE SUPPLIER_ID ='2c9fc3785d79fd98015da0ad00b304e1'

SELECT * FROM PROC_SUPPLIER_BUYER_MAPPING WHERE SUPPLIER_ID ='2c9fc3785d79fd98015da0ad00b304e1'

buyerId ='2c9fde45672ce8be0167355505d507dd'

DELETE FROM PROC_SUPPLIER_BUYER_MAPPING WHERE SUPPLIER_ID ='2c9fc3785d79fd98015da0ad00b304e1'




SELECT * FROM PROC_SUPPLIER_PACKAGE WHERE SUPPLIER_ID ='2c9fc3785d79fd98015da0ad00b304e1'

SELECT * FROM PROC_SUPPLIER_SUBSCRIPTION WHERE SUPPLIER_ID ='2c9fc3785d79fd98015da0ad00b304e1'

SELECT * FROM PROC_SUPPLIER_PLAN WHERE ID ='2c9f81c15ba01fc8015ba45a242a0022'




INSERT
	INTO
		PROC_SUPPLIER_PACKAGE (
			ID,
			ACTIVATED_DATE,
			BUYER_LIMIT,
			CANCELLED_DATE,
			CONVERTED_TO_PAID,
			CONVERTED_TO_PAID_DATE,
			CURRENCY_CODE,
			END_DATE,
			PLAN_QUANTITY,
			START_DATE,
			SUBSCRIPTION_CANCEL_REASON,
			SUBSCRIPTION_STATUS,
			SUPPLIER_ID,
			SUPPLIER_PLAN_ID
		)
	VALUES(
		'2c9fa58b64f1252d0164f4aa59a60081',
		TIMESTAMP '2018-11-16 00:00:00.000000',
		999,
		NULL,
		0,
		NULL,
		'USD',
		TIMESTAMP '2019-11-16 00:00:00.000000',
		0,
		TIMESTAMP '2018-11-16 00:00:00.000000',
		NULL,
		'ACTIVE',
		'2c9fc3785d79fd98015da0ad00b304e1',
		'2c9f81c15ba01fc8015ba45a242a0022'
	);

	
INSERT
	INTO
		PROC_SUPPLIER_SUBSCRIPTION (
			ID,
			ACTIVATED_DATE,
			BUYER_LIMIT,
			CANCELLED_DATE,
			CREATED_DATE,
			CURRENCY_CODE,
			END_DATE,
			PLAN_QUANTITY,
			REMINDER_SENT,
			START_DATE,
			SUBSCRIPTION_CANCEL_REASON,
			SUBSCRIPTION_STATUS,
			PAY_TRANSACTION_ID,
			SUPPLIER_ID,
			SUPPLIER_PLAN_ID
		)
	VALUES(
		'2c9fa58b6734a2df016735c7b2d100b1',
		TIMESTAMP '2018-11-16 00:00:00.000000',
		999,
		NULL,
		TIMESTAMP '2018-11-16 00:00:00.000000',
		'USD',
		TIMESTAMP '2019-11-16 00:00:00.000000',
		0,
		1,
		TIMESTAMP '2018-11-16 00:00:00.000000',
		NULL,
		'ACTIVE',
		NULL,
		'2c9fc3785d79fd98015da0ad00b304e1',
		'2c9f81c15ba01fc8015ba45a242a0022'
	);


	
SELECT * FROM PROC_SUPPLIER WHERE COMPANY_NAME LIKE '%MKS METAL & PLASTIC SDN BHD%'
supplierId = 2c9fde4566d0669b0167102b262e400d

SELECT * FROM PROC_SUPPLIER WHERE SUPPLIER_ID ='2c9fde4566d0669b0167102b262e400d'

SELECT * FROM PROC_SUPPLIER_BUYER_MAPPING WHERE SUPPLIER_ID ='2c9fde4566d0669b0167102b262e400d'

buyerId ='2c9fde45672ce8be0167355505d507dd'

DELETE FROM PROC_SUPPLIER_BUYER_MAPPING WHERE SUPPLIER_ID ='2c9fde4566d0669b0167102b262e400d'




SELECT * FROM PROC_SUPPLIER_PACKAGE WHERE SUPPLIER_ID ='2c9fde4566d0669b0167102b262e400d'

SELECT * FROM PROC_SUPPLIER_SUBSCRIPTION WHERE SUPPLIER_ID ='2c9fde4566d0669b0167102b262e400d'

SELECT * FROM PROC_SUPPLIER_PLAN WHERE ID ='2c9f81c15ba01fc8015ba45a242a0022'




INSERT
	INTO
		PROC_SUPPLIER_PACKAGE (
			ID,
			ACTIVATED_DATE,
			BUYER_LIMIT,
			CANCELLED_DATE,
			CONVERTED_TO_PAID,
			CONVERTED_TO_PAID_DATE,
			CURRENCY_CODE,
			END_DATE,
			PLAN_QUANTITY,
			START_DATE,
			SUBSCRIPTION_CANCEL_REASON,
			SUBSCRIPTION_STATUS,
			SUPPLIER_ID,
			SUPPLIER_PLAN_ID
		)
	VALUES(
		'2c9fa58b64f1252d0164f4aa59a60082',
		TIMESTAMP '2018-11-14 00:00:00.000000',
		999,
		NULL,
		0,
		NULL,
		'USD',
		TIMESTAMP '2019-11-14 00:00:00.000000',
		0,
		TIMESTAMP '2018-11-14 00:00:00.000000',
		NULL,
		'ACTIVE',
		'2c9fde4566d0669b0167102b262e400d',
		'2c9f81c15ba01fc8015ba45a242a0022'
	);

	
INSERT
	INTO
		PROC_SUPPLIER_SUBSCRIPTION (
			ID,
			ACTIVATED_DATE,
			BUYER_LIMIT,
			CANCELLED_DATE,
			CREATED_DATE,
			CURRENCY_CODE,
			END_DATE,
			PLAN_QUANTITY,
			REMINDER_SENT,
			START_DATE,
			SUBSCRIPTION_CANCEL_REASON,
			SUBSCRIPTION_STATUS,
			PAY_TRANSACTION_ID,
			SUPPLIER_ID,
			SUPPLIER_PLAN_ID
		)
	VALUES(
		'2c9fa58b6734a2df016735c7b2d100b2',
		TIMESTAMP '2018-11-14 00:00:00.000000',
		999,
		NULL,
		TIMESTAMP '2018-11-14 00:00:00.000000',
		'USD',
		TIMESTAMP '2019-11-14 00:00:00.000000',
		0,
		1,
		TIMESTAMP '2018-11-14 00:00:00.000000',
		NULL,
		'ACTIVE',
		NULL,
		'2c9fde4566d0669b0167102b262e400d',
		'2c9f81c15ba01fc8015ba45a242a0022'
	);


	
SELECT * FROM PROC_SUPPLIER WHERE COMPANY_NAME LIKE '%Naz Metal Technology Sdn Bhd%'
supplierId = 2c9fde4566d0669b0166f6327d7026c5

SELECT * FROM PROC_SUPPLIER WHERE SUPPLIER_ID ='2c9fde4566d0669b0166f6327d7026c5'

SELECT * FROM PROC_SUPPLIER_BUYER_MAPPING WHERE SUPPLIER_ID ='2c9fde4566d0669b0166f6327d7026c5'

buyerId ='2c9fde4565a9f93f0165ad7a634c03ce'

DELETE FROM PROC_SUPPLIER_BUYER_MAPPING WHERE SUPPLIER_ID ='2c9fde4566d0669b0166f6327d7026c5'




SELECT * FROM PROC_SUPPLIER_PACKAGE WHERE SUPPLIER_ID ='2c9fde4566d0669b0166f6327d7026c5'

SELECT * FROM PROC_SUPPLIER_SUBSCRIPTION WHERE SUPPLIER_ID ='2c9fde4566d0669b0166f6327d7026c5'

SELECT * FROM PROC_SUPPLIER_PLAN WHERE ID ='2c9f81c15ba01fc8015ba45a242a0022'




INSERT
	INTO
		PROC_SUPPLIER_PACKAGE (
			ID,
			ACTIVATED_DATE,
			BUYER_LIMIT,
			CANCELLED_DATE,
			CONVERTED_TO_PAID,
			CONVERTED_TO_PAID_DATE,
			CURRENCY_CODE,
			END_DATE,
			PLAN_QUANTITY,
			START_DATE,
			SUBSCRIPTION_CANCEL_REASON,
			SUBSCRIPTION_STATUS,
			SUPPLIER_ID,
			SUPPLIER_PLAN_ID
		)
	VALUES(
		'2c9fa58b64f1252d0164f4aa59a60083',
		TIMESTAMP '2018-11-09 00:00:00.000000',
		999,
		NULL,
		0,
		NULL,
		'USD',
		TIMESTAMP '2019-11-09 00:00:00.000000',
		0,
		TIMESTAMP '2018-11-09 00:00:00.000000',
		NULL,
		'ACTIVE',
		'2c9fde4566d0669b0166f6327d7026c5',
		'2c9f81c15ba01fc8015ba45a242a0022'
	);

	
INSERT
	INTO
		PROC_SUPPLIER_SUBSCRIPTION (
			ID,
			ACTIVATED_DATE,
			BUYER_LIMIT,
			CANCELLED_DATE,
			CREATED_DATE,
			CURRENCY_CODE,
			END_DATE,
			PLAN_QUANTITY,
			REMINDER_SENT,
			START_DATE,
			SUBSCRIPTION_CANCEL_REASON,
			SUBSCRIPTION_STATUS,
			PAY_TRANSACTION_ID,
			SUPPLIER_ID,
			SUPPLIER_PLAN_ID
		)
	VALUES(
		'2c9fa58b6734a2df016735c7b2d100b3',
		TIMESTAMP '2018-11-09 00:00:00.000000',
		999,
		NULL,
		TIMESTAMP '2018-11-09 00:00:00.000000',
		'USD',
		TIMESTAMP '2019-11-09 00:00:00.000000',
		0,
		1,
		TIMESTAMP '2018-11-09 00:00:00.000000',
		NULL,
		'ACTIVE',
		NULL,
		'2c9fde4566d0669b0166f6327d7026c5',
		'2c9f81c15ba01fc8015ba45a242a0022'
	);

	
	
	
	
----------------------------------------------------------------------------------------------
-----------------------------------PH-72 sourcing Form CR-------------------------------------------
----------------------------------------------------------------------------------------------
CREATE TABLE PROC_SOURCING_FORM_TEMPLATE (
	ID VARCHAR2(64),
	IS_CQ_COMPLETED NUMBER(1,0),
	CREATED_DATE TIMESTAMP,
	BUYER_SET_DECIMAL VARCHAR2(8),
	DESCRIPTION VARCHAR2(1000),
	IS_EVENT_DETAIL_COMPLETED NUMBER(1,0),
	FORM_NAME VARCHAR2(64),
	IS_TEMPLATE_USED NUMBER(1,0),
	MODIFIED_DATE TIMESTAMP,
	STATUS VARCHAR2(255),
	TENANT_ID VARCHAR2(64),
	CREATED_BY VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID)
) ;

CREATE TABLE PROC_SOURCING_FORM_APP (
	ID VARCHAR2(64),
	ACTIVE NUMBER(1,0),
	APPROVAL_TYPE VARCHAR2(255),
	IS_DONE NUMBER(1,0),
	APPROVAL_LEVEL NUMBER(10,0),
	TEMPLATE_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SF_APPROVAL_ID FOREIGN KEY (TEMPLATE_ID) REFERENCES PROC_SOURCING_FORM_TEMPLATE(ID)
) ;

CREATE TABLE PROC_SOURCING_FORM_REQ (
	ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	IS_BQ_COMPLETED NUMBER(1,0),
	IS_CQ_COMPLETED NUMBER(1,0),
	CREATED_DATE TIMESTAMP,
	BUYER_SET_DECIMAL VARCHAR2(8),
	DESCRIPTION VARCHAR2(1000),
	IS_FORM_DETAIL_COMPLETED NUMBER(1,0),
	FORM_ID VARCHAR2(64),
	FORM_TYPE VARCHAR2(64),
	MODIFIED_DATE TIMESTAMP,
	REFERANCE_NUMBER VARCHAR2(64),
	SOURCING_FORM_NAME VARCHAR2(64),
	STATUS VARCHAR2(255),
	IS_SUMMARY_COMPLETED NUMBER(1,0),
	TENANT_ID VARCHAR2(64),
	URGENT_FORM NUMBER(1,0),
	ACTION_BY VARCHAR2(64),
	BUSINESS_UNIT_ID VARCHAR2(64),
	CREATED_BY VARCHAR2(64),
	FORM_OWNER VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	SOURCING_TEMPLATE_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_FS_BUSINESS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT(ID),
	CONSTRAINT FK_FS_SOURCING_TEMPLATE_ID FOREIGN KEY (SOURCING_TEMPLATE_ID) REFERENCES PROC_SOURCING_FORM_TEMPLATE(ID),
	CONSTRAINT FK_FS_ACTION_BY FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_FS_FORM_OWNER FOREIGN KEY (FORM_OWNER) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_FS_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_FS_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID)
) ;


CREATE TABLE PROC_SOURCING_FORM_APP_REQ (
	ID VARCHAR2(64),
	ACTIVE NUMBER(1,0),
	APPROVAL_TYPE VARCHAR2(255),
	IS_DONE NUMBER(1,0),
	APPROVAL_LEVEL NUMBER(10,0),
	FORM_ID VARCHAR2(64),
	 PRIMARY KEY (ID),
	CONSTRAINT FK_SF_REQ_APPROVAL_ID FOREIGN KEY (FORM_ID) REFERENCES PROC_SOURCING_FORM_REQ(ID)
) ;

CREATE TABLE PROC_SOURCING_FORM_BQ_REQ (
	ID VARCHAR2(64),
	CREATED_DATE TIMESTAMP,
	DESCRIPTION VARCHAR2(550),
	MODIFIED_DATE TIMESTAMP,
	NAME VARCHAR2(128),
	FORM_REQ_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SF_BQ_FORM_REQ_ID FOREIGN KEY (FORM_REQ_ID) REFERENCES PROC_SOURCING_FORM_REQ(ID)
) ;

CREATE TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ (
	ID VARCHAR2(64),
	ITEM_DESCRIPTION VARCHAR2(1100),
	ITEM_NAME VARCHAR2(250),
	ITEM_LEVEL NUMBER(10,0),
	SUB_ORDER NUMBER(10,0),
	PRICE_TYPE VARCHAR2(255),
	UNIT_QUANTITY NUMBER(19,2),
	TAX NUMBER(16,4),
	TAX_TYPE VARCHAR2(255),
	TOTAL_AMOUNT NUMBER(16,4),
	TOTAL_AMOUNT_WITH_TAX NUMBER(16,4),
	UNIT_PRICE NUMBER(16,4),
	BQ_ID VARCHAR2(64),
	PARENT_ID VARCHAR2(64),
	FORM_REQ_ID VARCHAR2(64),
	UOM_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_UOM_ID FOREIGN KEY (UOM_ID) REFERENCES PROC_BUYER_UOM(ID),
	CONSTRAINT FK_BQ_ID FOREIGN KEY (BQ_ID) REFERENCES PROC_SOURCING_FORM_BQ_REQ(ID),
	CONSTRAINT FK_FORM_REQ_ID FOREIGN KEY (FORM_REQ_ID) REFERENCES PROC_SOURCING_FORM_REQ(ID),
	CONSTRAINT FK_PARENT_ID FOREIGN KEY (PARENT_ID) REFERENCES PROC_SOURCING_FORM_BQ_ITEM_REQ(ID)
) ;




CREATE TABLE PROC_SOURCING_FORM_BQ_REQ (
	ID VARCHAR2(64),
	CREATED_DATE TIMESTAMP,
	DESCRIPTION VARCHAR2(550),
	MODIFIED_DATE TIMESTAMP,
	NAME VARCHAR2(128),
	FORM_REQ_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SF_BQ_FORM_REQ_ID FOREIGN KEY (FORM_REQ_ID) REFERENCES PROC_SOURCING_FORM_REQ(ID)
) ;


CREATE TABLE PROC_SOURCING_FORM_CQ (
	ID VARCHAR2(64),
	CREATED_DATE TIMESTAMP,
	DESCRIPTION VARCHAR2(550),
	MODIFIED_DATE TIMESTAMP,
	CQ_NAME VARCHAR2(128),
	FORM_ID VARCHAR2(64),
	 PRIMARY KEY (ID),
	CONSTRAINT FK_SOURCING_TEM_CQ_FORM_ID FOREIGN KEY (FORM_ID) REFERENCES PROC_SOURCING_FORM_TEMPLATE(ID)
) ;


CREATE TABLE PROC_SOURCING_FORM_CQ_ITEM (
	ID VARCHAR2(64),
	IS_ATTACHMENT NUMBER(1,0),
	CQ_TYPE VARCHAR2(255),
	IS_SUPPLIER_ATTACH_REQUIRED NUMBER(1,0),
	ITEM_DESCRIPTION VARCHAR2(1050),
	ITEM_NAME VARCHAR2(250),
	ITEM_LEVEL NUMBER(10,0),
	IS_OPTIONAL NUMBER(1,0),
	SUB_ORDER NUMBER(10,0),
	CQ_ID VARCHAR2(64),
	PARENT_ID VARCHAR2(64),
	FORM_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SOURCING_FORM_CQ FOREIGN KEY (CQ_ID) REFERENCES PROC_SOURCING_FORM_CQ(ID),
	CONSTRAINT FK_SOURCING_FORM_CQ_ITEM FOREIGN KEY (FORM_ID) REFERENCES PROC_SOURCING_FORM_TEMPLATE(ID),
	CONSTRAINT FK_SOURCING_FORM_CQ_PARENT FOREIGN KEY (PARENT_ID) REFERENCES PROC_SOURCING_FORM_CQ_ITEM(ID)
) ;


CREATE TABLE PROC_SOUR_FORM_CQ_ITEM_OPT (
	ID VARCHAR2(64),
	OPTION_ORDER NUMBER(10,0),
	SCORING NUMBER(10,0),
	OPTION_VALUE VARCHAR2(250),
	CQ_ITEM_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SOURCING_CQ_OPT_CQ_ITM FOREIGN KEY (CQ_ITEM_ID) REFERENCES PROC_SOURCING_FORM_CQ_ITEM(ID)
) ;

CREATE TABLE PROC_SOUR_FORM_CQ_ITEM_REQ (
	ID VARCHAR2(64),
	SOUR_REQ_ATTACH_CONT_TYPE VARCHAR2(160),
	SOUR_REQ_ATTACH_FILE_DATA BLOB,
	SOUR_REQ_ATTACH_FILE_NAME VARCHAR2(500),
	TEXT_ANSWERS VARCHAR2(1000),
	FORM_CQ_ID VARCHAR2(64),
	FORM_CQ_ITEM__ID VARCHAR2(64),
	SOUR_FORM_ID VARCHAR2(64),
	FORM_REQ_ID VARCHAR2(64),
 PRIMARY KEY (ID),
	CONSTRAINT FK_SF_REQ_CQ_FORM FOREIGN KEY (SOUR_FORM_ID) REFERENCES PROC_SOURCING_FORM_TEMPLATE(ID),
	CONSTRAINT FK_SF_REQ_CQ_ITEM FOREIGN KEY (FORM_CQ_ITEM__ID) REFERENCES PROC_SOURCING_FORM_CQ_ITEM(ID),
	CONSTRAINT FK_SF_REQ_FORM_ID FOREIGN KEY (FORM_REQ_ID) REFERENCES PROC_SOURCING_FORM_REQ(ID),
	CONSTRAINT FK_SF_TEMP_REQ_CQ_ID FOREIGN KEY (FORM_CQ_ID) REFERENCES PROC_SOURCING_FORM_CQ(ID)
) ;

CREATE TABLE PROC_SOUR_FORM_CQ_ITEM_OPT_REQ (
	ID VARCHAR2(64),
	OPTION_ORDER NUMBER(10,0),
	SCORING NUMBER(10,0),
	OPTION_VALUE VARCHAR2(250),
	REQ_CQ_ITEM_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SF_REQ_CQ_OPT_CQ_ITM FOREIGN KEY (REQ_CQ_ITEM_ID) REFERENCES PROC_SOUR_FORM_CQ_ITEM_REQ(ID)
) ;


CREATE TABLE PROC_REQUEST_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	APPROVAL_USER_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	CREATED_BY VARCHAR2(64),
	RQUEST_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_USER_ID FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID)
) ;

CREATE TABLE PROC_FORM_APPROVAL_USER (
	ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	APPROVAL_STATUS VARCHAR2(255),
	APPROVAL_REMARKS VARCHAR2(500),
	USER_ID VARCHAR2(64),
	TEMPLATE_APPROVAL_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SR_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SF_APP_USER_AP_ID FOREIGN KEY (TEMPLATE_APPROVAL_ID) REFERENCES PROC_SOURCING_FORM_APP(ID)
) ;


CREATE TABLE PROC_FORM_APPROVAL_USER_REQ (
	ID VARCHAR2(64),
	ACTION_DATE TIMESTAMP,
	APPROVAL_STATUS VARCHAR2(255),
	APPROVAL_REMARKS VARCHAR2(500),
	USER_ID VARCHAR2(64),
	FORM_APPROVAL_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SFAU_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SF_REQ_USER_AP_ID FOREIGN KEY (FORM_APPROVAL_ID) REFERENCES PROC_SOURCING_FORM_APP_REQ(ID)
) ;



CREATE TABLE PROC_REQ_AUDIT (
	ID VARCHAR2(64),
	ACTION_TYPE VARCHAR2(255),
	ACTION_DATE TIMESTAMP,
	THE_DESCRIPTION VARCHAR2(3000),
	ACTION_BY VARCHAR2(64),
	TENANT_ID VARCHAR2(64),
	REQ_ID VARCHAR2(64),
	DESCRIPTION VARCHAR2(3000),
	PRIMARY KEY (ID),
	CONSTRAINT FK_FS_TENANT_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_FS_ACTION_ID FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_REQ_AUDIT FOREIGN KEY (REQ_ID) REFERENCES PROC_SOURCING_FORM_REQ(ID)
) ;


SELECT 'INSERT INTO procurehere.PROC_USER_ROLE (ROLE_ID, CREATED_DATE, ACCOUNT_DELETED, MODIFIED_DATE, READ_ONLY, ROLE_DESCRIPTION, ROLE_NAME, ROLE_STATUS, TENANT_ID, CREATED_BY, USER_LAST_MODIFIED_BY)
VALUES(''' || b.BUYER_ID || 'a'', sysdate, 0, NULL, 1, ''Buyer Requester User Role only for Requester user type cant be modify or delete'', ''BUYER REQUESTER USER'', ''ACTIVE'', ''' || BUYER_ID || ''', NULL, NULL);' 
from PROC_BUYER b


	ALTER TABLE PROC_RFT_EVENTS ADD PREVIOUS_REQUEST VARCHAR2(64);
	ALTER TABLE PROC_RFI_EVENTS ADD PREVIOUS_REQUEST VARCHAR2(64);
	ALTER TABLE PROC_RFP_EVENTS ADD PREVIOUS_REQUEST VARCHAR2(64);
	ALTER TABLE PROC_RFQ_EVENTS ADD PREVIOUS_REQUEST VARCHAR2(64);
	ALTER TABLE PROC_RFA_EVENTS ADD PREVIOUS_REQUEST VARCHAR2(64);


----------------------------------------------------------------------------------------------
-----------------------------------Report CR--------------------------------------------------
----------------------------------------------------------------------------------------------
	
	ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD SUPPLIER_REMARK VARCHAR2(3000);
	
	ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD SUPPLIER_REMARK VARCHAR2(3000);
	
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD SUPPLIER_REMARK VARCHAR2(3000);
			
	ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD SUPPLIER_REMARK VARCHAR2(3000);
	
	
	ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD IP_ADDRESS VARCHAR2(50);
	
	ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD IP_ADDRESS VARCHAR2(50);
	
	ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD IP_ADDRESS VARCHAR2(50);
	
	ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD IP_ADDRESS VARCHAR2(50);
	
	ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD IP_ADDRESS VARCHAR2(50);
	

	ALTER TABLE PROC_RFA_EVALUATOR_USER ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFI_EVALUATOR_USER ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFP_EVALUATOR_USER ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFQ_EVALUATOR_USER ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFT_EVALUATOR_USER ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	
	ALTER TABLE PROC_RFA_ENVELOP ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFI_ENVELOP ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFP_ENVELOP ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFQ_ENVELOP ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFT_ENVELOP ADD EVALUATOR_SUMMARY_DATE TIMESTAMP;
	
	
	ALTER TABLE PROC_RFA_EVALUATOR_USER ADD EVALUATOR_SUMMARY VARCHAR2(3000);
	
	ALTER TABLE PROC_RFI_EVALUATOR_USER ADD EVALUATOR_SUMMARY VARCHAR2(3000);
	
	ALTER TABLE PROC_RFP_EVALUATOR_USER ADD EVALUATOR_SUMMARY VARCHAR2(3000);
	
	ALTER TABLE PROC_RFQ_EVALUATOR_USER ADD EVALUATOR_SUMMARY VARCHAR2(3000);
	
	ALTER TABLE PROC_RFT_EVALUATOR_USER ADD EVALUATOR_SUMMARY VARCHAR2(3000);
	
	
	ALTER TABLE PROC_RFA_ENVELOP ADD LEAD_EVALUATOR_SUMMARY VARCHAR2(3000);
	
	ALTER TABLE PROC_RFI_ENVELOP ADD LEAD_EVALUATOR_SUMMARY VARCHAR2(3000);
	
	ALTER TABLE PROC_RFP_ENVELOP ADD LEAD_EVALUATOR_SUMMARY VARCHAR2(3000);
	
	ALTER TABLE PROC_RFQ_ENVELOP ADD LEAD_EVALUATOR_SUMMARY VARCHAR2(3000);
	
	ALTER TABLE PROC_RFT_ENVELOP ADD LEAD_EVALUATOR_SUMMARY VARCHAR2(3000);
	
	
	ALTER TABLE PROC_AUCTION_BIDS ADD REVERTED_BY VARCHAR2(64);
	ALTER TABLE PROC_AUCTION_BIDS ADD CONSTRAINT FK_REVERTED_BID_BY FOREIGN KEY (REVERTED_BY) REFERENCES PROC_USER (ID);
	
	ALTER TABLE PROC_AUCTION_BIDS ADD REMARK VARCHAR2(500);
	
	
	
	
	
	
	
	
	
	
	
	

	alter table PROC_RFQ_SUPPLIER_BQ rename column TOTAL_AFTER_TAX to TOTAL_AFTER_TAX_OLD;

	alter table PROC_RFQ_SUPPLIER_BQ add TOTAL_AFTER_TAX NUMBER(20,4);

	update PROC_RFQ_SUPPLIER_BQ set TOTAL_AFTER_TAX = TOTAL_AFTER_TAX_OLD;




	alter table PROC_RFQ_SUPPLIER_BQ rename column GRAND_TOTAL to GRAND_TOTAL_OLD;

	alter table PROC_RFQ_SUPPLIER_BQ add GRAND_TOTAL NUMBER(20,4);

	update PROC_RFQ_SUPPLIER_BQ set GRAND_TOTAL = GRAND_TOTAL_OLD;





	alter table PROC_RFQ_SUPPLIER_BQ rename column ADDITIONAL_TAX to ADDITIONAL_TAX_OLD;

	alter table PROC_RFQ_SUPPLIER_BQ add ADDITIONAL_TAX NUMBER(20,4);

	update PROC_RFQ_SUPPLIER_BQ set ADDITIONAL_TAX = ADDITIONAL_TAX_OLD;










	alter table PROC_RFT_SUPPLIER_BQ rename column TOTAL_AFTER_TAX to TOTAL_AFTER_TAX_OLD;

	alter table PROC_RFT_SUPPLIER_BQ add TOTAL_AFTER_TAX NUMBER(20,4);

	update PROC_RFT_SUPPLIER_BQ set TOTAL_AFTER_TAX = TOTAL_AFTER_TAX_OLD;





	alter table PROC_RFT_SUPPLIER_BQ rename column GRAND_TOTAL to GRAND_TOTAL_OLD;

	alter table PROC_RFT_SUPPLIER_BQ add GRAND_TOTAL NUMBER(20,4);

	update PROC_RFT_SUPPLIER_BQ set GRAND_TOTAL = GRAND_TOTAL_OLD;





	alter table PROC_RFT_SUPPLIER_BQ rename column ADDITIONAL_TAX to ADDITIONAL_TAX_OLD;

	alter table PROC_RFT_SUPPLIER_BQ add ADDITIONAL_TAX NUMBER(20,4);

	update PROC_RFT_SUPPLIER_BQ set ADDITIONAL_TAX = ADDITIONAL_TAX_OLD;






	alter table PROC_RFP_SUPPLIER_BQ rename column ADDITIONAL_TAX to ADDITIONAL_TAX_OLD;

	alter table PROC_RFP_SUPPLIER_BQ add ADDITIONAL_TAX NUMBER(20,4);

	update PROC_RFP_SUPPLIER_BQ set ADDITIONAL_TAX = ADDITIONAL_TAX_OLD;





	alter table PROC_RFP_SUPPLIER_BQ rename column GRAND_TOTAL to GRAND_TOTAL_OLD;

	alter table PROC_RFP_SUPPLIER_BQ add GRAND_TOTAL NUMBER(20,4);

	update PROC_RFP_SUPPLIER_BQ set GRAND_TOTAL = GRAND_TOTAL_OLD;





 
	alter table PROC_RFP_SUPPLIER_BQ rename column TOTAL_AFTER_TAX to TOTAL_AFTER_TAX_OLD;

	alter table PROC_RFP_SUPPLIER_BQ add TOTAL_AFTER_TAX NUMBER(20,4);

	update PROC_RFP_SUPPLIER_BQ set TOTAL_AFTER_TAX = TOTAL_AFTER_TAX_OLD;




	alter table PROC_RFA_SUPPLIER_BQ rename column TOTAL_AFTER_TAX to TOTAL_AFTER_TAX_OLD;

	alter table PROC_RFA_SUPPLIER_BQ add TOTAL_AFTER_TAX NUMBER(20,4);

	update PROC_RFA_SUPPLIER_BQ set TOTAL_AFTER_TAX = TOTAL_AFTER_TAX_OLD;

	
	
	
	alter table PROC_RFA_SUPPLIER_BQ rename column GRAND_TOTAL to GRAND_TOTAL_OLD;

	alter table PROC_RFA_SUPPLIER_BQ add GRAND_TOTAL NUMBER(20,4);

	update PROC_RFA_SUPPLIER_BQ set GRAND_TOTAL = GRAND_TOTAL_OLD;




	alter table PROC_RFA_SUPPLIER_BQ rename column ADDITIONAL_TAX to ADDITIONAL_TAX_OLD;

	alter table PROC_RFA_SUPPLIER_BQ add ADDITIONAL_TAX NUMBER(20,4);

	update PROC_RFA_SUPPLIER_BQ set ADDITIONAL_TAX = ADDITIONAL_TAX_OLD;
	
	
	
	
	
	
	
	

	
	alter table PROC_RFA_SUPPLIER_BQ drop column ADDITIONAL_TAX_OLD;
	alter table PROC_RFA_SUPPLIER_BQ drop column GRAND_TOTAL_OLD;
	alter table PROC_RFQ_SUPPLIER_BQ drop column TOTAL_AFTER_TAX_OLD;
	alter table PROC_RFQ_SUPPLIER_BQ drop column GRAND_TOTAL_OLD;
	alter table PROC_RFQ_SUPPLIER_BQ drop column ADDITIONAL_TAX_OLD;
	alter table PROC_RFT_SUPPLIER_BQ drop column GRAND_TOTAL_OLD;
	alter table PROC_RFT_SUPPLIER_BQ drop column TOTAL_AFTER_TAX_OLD;
	alter table PROC_RFT_SUPPLIER_BQ drop column ADDITIONAL_TAX_OLD;
	alter table PROC_RFP_SUPPLIER_BQ drop column GRAND_TOTAL_OLD;
	alter table PROC_RFP_SUPPLIER_BQ drop column ADDITIONAL_TAX_OLD;
	alter table PROC_RFA_SUPPLIER_BQ drop column TOTAL_AFTER_TAX_OLD;
	alter table PROC_RFP_SUPPLIER_BQ drop column TOTAL_AFTER_TAX_OLD;
	
    ----------------------------------------------------------------------------------------------
    -----------------------------------PH-182-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	
	ALTER TABLE PROC_USER ADD  SHOW_WIZARD_TUTORIAL  NUMBER(1);
    ----------------------------------------------------------------------------------------------
    -----------------------------------PH-181-----------------------------------------------------
    ----------------------------------------------------------------------------------------------

	ALTER TABLE PROC_SUPPLIER_SUBSCRIPTION ADD USED_PROMO_CODE VARCHAR(64) 
	
	----------------------------------------------------------------------------------------------
    -----------------------------------PH-236-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	
	
	ALTER TABLE PROC_RFT_EVENTS ADD VIEW_SUPPLIER_NAME NUMBER DEFAULT 1
	ALTER TABLE PROC_RFQ_EVENTS ADD VIEW_SUPPLIER_NAME NUMBER DEFAULT 1
	ALTER TABLE PROC_RFI_EVENTS ADD VIEW_SUPPLIER_NAME NUMBER DEFAULT 1
	ALTER TABLE PROC_RFP_EVENTS ADD VIEW_SUPPLIER_NAME NUMBER DEFAULT 1
	ALTER TABLE PROC_RFA_EVENTS ADD VIEW_SUPPLIER_NAME NUMBER DEFAULT 1
	ALTER TABLE PROC_RFX_TEMPLATE ADD VIEW_SUPPLIER_NAME NUMBER DEFAULT 1
	ALTER TABLE PROC_RFX_TEMPLATE ADD IS_VISIBLE_VIEW_SUPPLIER_NAME NUMBER(1) DEFAULT 1;
	ALTER TABLE PROC_RFX_TEMPLATE ADD READ_ONLY_VIEW_SUPPLIER_NAME NUMBER(1) DEFAULT 0;
	
	  ----------------------------------------------------------------------------------------------
    -----------------------------------PH-239----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	
	ALTER TABLE PROC_PRODUCT_CATEGORY MODIFY PRODUCT_NAME VARCHAR2(128);
	
	ALTER TABLE PROC_RFT_EVENTS MODIFY EVENT_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFA_EVENTS MODIFY EVENT_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFI_EVENTS MODIFY EVENT_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFP_EVENTS MODIFY EVENT_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFQ_EVENTS MODIFY EVENT_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFI_EVENT_BQ_SUP_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2000);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2000);
	
	----------------------------------------------------------------------------------------------
    -----------------------------------PH-242-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
    
	ALTER TABLE PROC_RFT_EVENTS ADD ALLOW_CLOSE_ENVELOPE NUMBER(1) default 0;
	ALTER TABLE PROC_RFI_EVENTS ADD ALLOW_CLOSE_ENVELOPE NUMBER(1) default 0;
	ALTER TABLE PROC_RFP_EVENTS ADD ALLOW_CLOSE_ENVELOPE NUMBER(1) default 0;
	ALTER TABLE PROC_RFQ_EVENTS ADD ALLOW_CLOSE_ENVELOPE NUMBER(1) default 0;
	ALTER TABLE PROC_RFA_EVENTS ADD ALLOW_CLOSE_ENVELOPE NUMBER(1) default 0;
	
	ALTER TABLE PROC_RFP_ENVELOP ADD CLOSE_DATE TIMESTAMP;
	ALTER TABLE PROC_RFQ_ENVELOP ADD CLOSE_DATE TIMESTAMP;
	ALTER TABLE PROC_RFT_ENVELOP ADD CLOSE_DATE TIMESTAMP;
	ALTER TABLE PROC_RFI_ENVELOP ADD CLOSE_DATE TIMESTAMP;
	ALTER TABLE PROC_RFA_ENVELOP ADD CLOSE_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD ALLOW_CLOSE_ENVELOPE NUMBER(1) default 0;
	
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD IS_VISIBLE_CLOSE_ENVELOPE NUMBER(1) DEFAULT 1;
	ALTER TABLE PROC_RFX_TEMPLATE ADD READ_ONLY_CLOSE_ENVELOPE NUMBER(1) DEFAULT 0;
	
	
	
	
	
	
	----------------------------------------------------------------------------------------------
    -----------------------------------PH-243-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	ALTER TABLE PROC_RFT_EVENTS ADD ALLOW_ADD_SUPPLIER NUMBER(1) default 0;
	ALTER TABLE PROC_RFI_EVENTS ADD ALLOW_ADD_SUPPLIER NUMBER(1) default 0;
	ALTER TABLE PROC_RFP_EVENTS ADD ALLOW_ADD_SUPPLIER NUMBER(1) default 0;
	ALTER TABLE PROC_RFQ_EVENTS ADD ALLOW_ADD_SUPPLIER NUMBER(1) default 0;
	ALTER TABLE PROC_RFA_EVENTS ADD ALLOW_ADD_SUPPLIER NUMBER(1) default 0;
	ALTER TABLE PROC_RFX_TEMPLATE ADD ALLOW_ADD_SUPPLIER NUMBER(1) default 0;
	ALTER TABLE PROC_RFX_TEMPLATE ADD IS_VISIBLE_ADD_SUPPLIER NUMBER(1) DEFAULT 0;
	ALTER TABLE PROC_RFX_TEMPLATE ADD READ_ONLY_ADD_SUPPLIER NUMBER(1) DEFAULT 0;
	
	
	
	
	
	
	
	
	
	
	----------------------------------------------------------------------------------------------
    -----------------------------------PH-256-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	ALTER TABLE PROC_BUSINESS_UNIT MODIFY BUSINESS_UNIT_CODE VARCHAR2(12);
	
	----------------------------------------------------------------------------------------------
    -----------------------------------PH-236 new -----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	
	
	ALTER TABLE PROC_RFA_ENVELOP ADD PRE_FIX VARCHAR2(10) default 'SUPPLIER';
	ALTER TABLE PROC_RFI_ENVELOP ADD PRE_FIX VARCHAR2(10) default 'SUPPLIER';
	ALTER TABLE PROC_RFP_ENVELOP ADD PRE_FIX VARCHAR2(10) default 'SUPPLIER';
	ALTER TABLE PROC_RFT_ENVELOP ADD PRE_FIX VARCHAR2(10) default 'SUPPLIER';
	ALTER TABLE PROC_RFQ_ENVELOP ADD PRE_FIX VARCHAR2(10) default 'SUPPLIER';
	
	
	
	
	----------------------------------------------------------------------------------------------
    -----------------------------------PH-261-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
    delete FROM PROC_FAV_SUPP_PRD_CAT WHERE FAV_SUPP_ID IN (SELECT FAV_SUPPLIER_ID FROM PROC_FAVOURITE_SUPPLIER WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) ))
    delete FROM PROC_FAV_SUPP_IND_CAT WHERE FAV_SUPP_ID IN (SELECT FAV_SUPPLIER_ID FROM PROC_FAVOURITE_SUPPLIER WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) ))
    DELETE FROM PROC_FAVOURITE_SUPPLIER WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) )
    DELETE FROM PROC_USER WHERE TENANT_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) )
    UPDATE PROC_SUPPLIER SET SUPPLIER_SUBSCRIPTION_ID = NULL , SUPPLIER_PACKAGE_ID = NULL WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) )
    DELETE FROM PROC_SUPPLIER_PACKAGE WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) )
    DELETE FROM PROC_SUPPLIER_SUBSCRIPTION WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) )
    DELETE FROM PROC_NOTES WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) )
    DELETE FROM PROC_SUPPLIER_BUYER_MAPPING WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECTPROC_FAV_SUPP_IND_CA t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) )
    DELETE FROM PROC_SUPPLIER WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) )
    DELETE FROM PROC_PASSWORD_HISTORY WHERE USER_ID IN( SELECT ID FROM PROC_USER WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE REGISTRATION_COMPLETE_DATE IS NULL AND TERMS_OF_USE_ACCEPTED != 1 AND SUPPLIER_ID IN( SELECT inn.SUPPLIER_ID FROM ( SELECT t.SUPPLIER_ID, t.COMPANY_NAME, t.LOGIN_EMAIL, t.REGISTRATION_COMPLETE_DATE, ROW_NUMBER() OVER( PARTITION BY t.LOGIN_EMAIL ORDER BY t.LOGIN_EMAIL ) num FROM PROC_SUPPLIER t WHERE UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) inn WHERE inn.num = 1 ) ) )
    DELETE FROM PROC_FAV_SUPP_PRD_CAT WHERE FAV_SUPP_ID IN( SELECT FAV_SUPPLIER_ID FROM PROC_FAVOURITE_SUPPLIER WHERE SUPPLIER_ID IN( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) )
    DELETE FROM PROC_FAV_SUPP_IND_CAT WHERE FAV_SUPP_ID IN( SELECT FAV_SUPPLIER_ID FROM PROC_FAVOURITE_SUPPLIER WHERE SUPPLIER_ID IN( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) ) )
    DELETE FROM PROC_FAVOURITE_SUPPLIER WHERE SUPPLIER_ID IN (SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) )
    DELETE FROM PROC_USER WHERE TENANT_ID IN (SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) )
    UPDATE PROC_SUPPLIER SET SUPPLIER_SUBSCRIPTION_ID = NULL , SUPPLIER_PACKAGE_ID = NULL WHERE SUPPLIER_ID IN ( SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) )
    DELETE FROM PROC_SUPPLIER_PACKAGE WHERE SUPPLIER_ID IN (SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) )
    DELETE FROM PROC_SUPPLIER_SUBSCRIPTION WHERE SUPPLIER_ID IN (SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) )
    DELETE FROM PROC_NOTES WHERE SUPPLIER_ID IN (SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) )
    DELETE FROM PROC_SUPPLIER_BUYER_MAPPING WHERE SUPPLIER_ID IN (SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) )
    DELETE FROM PROC_SUPPLIER WHERE SUPPLIER_ID IN (SELECT SUPPLIER_ID FROM PROC_SUPPLIER WHERE TERMS_OF_USE_ACCEPTED = 0 AND UPPER( LOGIN_EMAIL ) IN( SELECT UPPER( LOGIN_EMAIL ) FROM PROC_SUPPLIER GROUP BY LOGIN_EMAIL HAVING COUNT(*)> 1 ) )
	
	
	
	
	
	----------------------------------------------------------------------------------------------
    -----------------------------------PH-245-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
    
	ALTER TABLE PROC_RFX_TEMPLATE ADD (ALLOW_TO_SUSPEND_EVENT NUMBER (1) DEFAULT 1 ,VISIBLE_ALLOW_TO_SUSPEND_EVENT NUMBER(1) DEFAULT 0,READ_ONLY_ALLOW_TO_SUSPEND NUMBER(1) DEFAULT 0);

	ALTER TABLE PROC_RFT_EVENTS ADD ALLOW_TO_SUSPEND_EVENT NUMBER (1) DEFAULT 1 ;
	ALTER TABLE PROC_RFI_EVENTS ADD ALLOW_TO_SUSPEND_EVENT NUMBER (1) DEFAULT 1 ;
	ALTER TABLE PROC_RFP_EVENTS ADD ALLOW_TO_SUSPEND_EVENT NUMBER (1) DEFAULT 1 ;
	ALTER TABLE PROC_RFQ_EVENTS ADD ALLOW_TO_SUSPEND_EVENT NUMBER (1) DEFAULT 1 ;
	ALTER TABLE PROC_RFA_EVENTS ADD ALLOW_TO_SUSPEND_EVENT NUMBER (1) DEFAULT 1 ;

	
	
	-----------------------------------------------------------------------------------------
    -----------------------------------PH-282------------------------------------------------
    -----------------------------------------------------------------------------------------
	
	
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	ALTER TABLE PROC_RFI_EVENT_BQ_SUP_ITEM ADD UNIT_PRICE_TYPE VARCHAR2(32) DEFAULT 'AMOUNT';
	
	
	-----------------------------------------------------------------------------------------
    -----------------------------------PH-310------------------------------------------------
    -----------------------------------------------------------------------------------------
	
	
     ALTER TABLE PROC_RFT_EVENTS ADD DISABLE_MASKING NUMBER DEFAULT 0;
     ALTER TABLE PROC_RFQ_EVENTS ADD DISABLE_MASKING NUMBER DEFAULT 0;
     ALTER TABLE PROC_RFP_EVENTS ADD DISABLE_MASKING NUMBER DEFAULT 0;
     ALTER TABLE PROC_RFI_EVENTS ADD DISABLE_MASKING NUMBER DEFAULT 0;
     ALTER TABLE PROC_RFA_EVENTS ADD DISABLE_MASKING NUMBER DEFAULT 0;
     
     
    
     
     
	-----------------------------------------------------------------------------------------
    -----------------------------------PH-273------------------------------------------------
    -----------------------------------------------------------------------------------------
     
     ALTER TABLE PROC_USER ADD LANGUAGE_CODE VARCHAR2(10) DEFAULT 'en'
    
    
    -----------------------------------------------------------------------------------------
    -----------------------------------PH-331------------------------------------------------
    -----------------------------------------------------------------------------------------
	
	
  	ALTER TABLE PROC_PRODUCT_ITEM ADD CONTRACT_REFERENCE_NUMBER VARCHAR2(50) ;
	ALTER TABLE PROC_PRODUCT_ITEM ADD END_DATE TIMESTAMP;
	ALTER TABLE PROC_PRODUCT_ITEM ADD START_DATE TIMESTAMP;
	ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD RATINGS DECIMAL;

    -----------------------------------------------------------------------------------------
    -----------------------------------PH-332------------------------------------------------
    -----------------------------------------------------------------------------------------
	alter table PROC_PR add AVAILABLE_BUDGET NUMBER(20,4)
	alter table PROC_PR add HIDE_CONTRACT_BASED NUMBER(1) DEFAULT 0
	
	
	
	
	----------------------------------------------------------------------------------------------
    -----------------------------------PH-236 -2 DEPOSIT-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	

	ALTER TABLE PROC_RFP_EVENTS ADD DEPOSIT NUMBER(10,4) ;
	ALTER TABLE PROC_RFQ_EVENTS ADD DEPOSIT NUMBER(10,4) ;
	ALTER TABLE PROC_RFT_EVENTS ADD DEPOSIT NUMBER(10,4) ;
	ALTER TABLE PROC_RFI_EVENTS ADD DEPOSIT NUMBER(10,4) ;
	ALTER TABLE PROC_RFA_EVENTS ADD DEPOSIT NUMBER(10,4) ;
	
	ALTER TABLE PROC_RFP_EVENTS ADD DEPOSIT_CURRENCY VARCHAR2(64) ;
	ALTER TABLE PROC_RFQ_EVENTS ADD DEPOSIT_CURRENCY VARCHAR2(64) ;
	ALTER TABLE PROC_RFT_EVENTS ADD DEPOSIT_CURRENCY VARCHAR2(64) ;
	ALTER TABLE PROC_RFI_EVENTS ADD DEPOSIT_CURRENCY VARCHAR2(64) ;
	ALTER TABLE PROC_RFA_EVENTS ADD DEPOSIT_CURRENCY VARCHAR2(64) ;
		
	ALTER TABLE PROC_BUYER_SETTINGS ADD IS_ORIGIN NUMBER(1) default 0;
	ALTER TABLE PROC_BUYER_SETTINGS ADD IS_PUBLISHED NUMBER(1) default 0;
	ALTER TABLE PROC_BUYER_SETTINGS ADD IS_APPROVED NUMBER(1) default 0;
	ALTER TABLE PROC_BUYER_SETTINGS ADD BUYER_KEY VARCHAR2(64);
		
	
	
	ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD FEE_REFERENCE VARCHAR2(150) ;
	ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD FEE_REFERENCE VARCHAR2(150) ;
	ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD FEE_REFERENCE VARCHAR2(150) ;
	ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD FEE_REFERENCE VARCHAR2(150) ;
	ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD FEE_REFERENCE VARCHAR2(150) ;
	
	ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD DEPOSIT_REFERENCE VARCHAR2(150) ;
	ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD DEPOSIT_REFERENCE VARCHAR2(150) ;
	ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD DEPOSIT_REFERENCE VARCHAR2(150) ;
	ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD DEPOSIT_REFERENCE VARCHAR2(150) ;
	ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD DEPOSIT_REFERENCE VARCHAR2(150) ;
	
	
	ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD FEE_PAID_DATE TIMESTAMP;
	ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD FEE_PAID_DATE TIMESTAMP;
	ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD FEE_PAID_DATE TIMESTAMP;
	ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD FEE_PAID_DATE TIMESTAMP;
	ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD FEE_PAID_DATE TIMESTAMP;
	
	ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD DEPOSIT_PAID_DATE TIMESTAMP;
	ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD DEPOSIT_PAID_DATE TIMESTAMP;
	ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD DEPOSIT_PAID_DATE TIMESTAMP;
	ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD DEPOSIT_PAID_DATE TIMESTAMP;
	ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD DEPOSIT_PAID_DATE TIMESTAMP;
	
    ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD FEE_PAID NUMBER default 0;
	ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD FEE_PAID NUMBER default 0;
	ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD FEE_PAID NUMBER default 0;
	ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD FEE_PAID NUMBER default 0;
	ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD FEE_PAID NUMBER default 0;
	
	ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD DEPOSIT_PAID NUMBER default 0;
	ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD DEPOSIT_PAID NUMBER default 0;
	ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD DEPOSIT_PAID NUMBER default 0;
	ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD DEPOSIT_PAID NUMBER default 0;
	ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD DEPOSIT_PAID NUMBER default 0;
		
	
	
	--------------------------------------------------------------------------------------------
	-------------------------------MAIL BOX-----------------------------------------------------
	--------------------------------------------------------------------------------------------
	ALTER TABLE PROC_BUYER ADD ENABLE_MAIL_BOX NUMBER(1) default 0;
	ALTER TABLE PROC_BUYER ADD MAIL_BOX_EMAIL VARCHAR2(64);
	
	
	-----------------------------------------------------------------------------------------
    -----------------------------------PH-334------------------------------------------------
    -----------------------------------------------------------------------------------------
	
     ALTER TABLE PROC_RFI_EVENTS ADD EXPECTED_TENDER_START_DATE TIMESTAMP;
     ALTER TABLE PROC_RFI_EVENTS ADD EXPECTED_TENDER_END_DATE TIMESTAMP;
     ALTER TABLE PROC_RFI_EVENTS ADD FEE_START_DATE TIMESTAMP;
     ALTER TABLE PROC_RFI_EVENTS ADD FEE_END_DATE TIMESTAMP;
      
	-----------------------------------------------------------------------------------------
    -----------------------------------PH-322------------------------------------------------
    -----------------------------------------------------------------------------------------
	
	ALTER TABLE PROC_RFA_EVENTS ADD UNMASKED_BY VARCHAR2(64);
	ALTER TABLE PROC_RFA_EVENTS ADD CONSTRAINT FK_UNMASKED_BY FOREIGN KEY (UNMASKED_BY) REFERENCES PROC_USER (ID);

	ALTER TABLE PROC_RFP_EVENTS ADD UNMASKED_BY VARCHAR2(64);
	ALTER TABLE PROC_RFP_EVENTS ADD CONSTRAINT FK_UNMASKED_BY FOREIGN KEY (UNMASKED_BY) REFERENCES PROC_USER (ID);

	ALTER TABLE PROC_RFT_EVENTS ADD UNMASKED_BY VARCHAR2(64);
	ALTER TABLE PROC_RFT_EVENTS ADD CONSTRAINT FK_UNMASKED_BY FOREIGN KEY (UNMASKED_BY) REFERENCES PROC_USER (ID);

	ALTER TABLE PROC_RFQ_EVENTS ADD UNMASKED_BY VARCHAR2(64);
	ALTER TABLE PROC_RFQ_EVENTS ADD CONSTRAINT FK_UNMASKED_BY FOREIGN KEY (UNMASKED_BY) REFERENCES PROC_USER (ID);

	ALTER TABLE PROC_RFI_EVENTS ADD UNMASKED_BY VARCHAR2(64);
	ALTER TABLE PROC_RFI_EVENTS ADD CONSTRAINT FK_UNMASKED_BY FOREIGN KEY (UNMASKED_BY) REFERENCES PROC_USER (ID);

		
	ALTER TABLE PROC_RFI_EVENTS ADD DISABLE_MASKING NUMBER default 0;
	ALTER TABLE PROC_RFA_EVENTS ADD DISABLE_MASKING NUMBER default 0;
	ALTER TABLE PROC_RFP_EVENTS ADD DISABLE_MASKING NUMBER default 0;
	ALTER TABLE PROC_RFT_EVENTS ADD DISABLE_MASKING NUMBER default 0;
	ALTER TABLE PROC_RFQ_EVENTS ADD DISABLE_MASKING NUMBER default 0;
	
	
	 -----------------------------------------------------------------------------------------
    -----------------------------------PH-291------------------------------------------------
    -----------------------------------------------------------------------------------------
     
     
    ALTER TABLE PROC_RFA_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_FILE_DATA BLOB
	ALTER TABLE PROC_RFA_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_FILE_NAME VARCHAR2(500 CHAR)	
	ALTER TABLE PROC_RFA_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_CONT_TYPE VARCHAR2(160)
	

	ALTER TABLE PROC_RFT_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_FILE_DATA BLOB
	ALTER TABLE PROC_RFT_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_FILE_NAME VARCHAR2(500 CHAR)	
	ALTER TABLE PROC_RFT_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_CONT_TYPE VARCHAR2(160)

	
	ALTER TABLE PROC_RFQ_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_FILE_DATA BLOB
	ALTER TABLE PROC_RFQ_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_FILE_NAME VARCHAR2(500 CHAR)	
	ALTER TABLE PROC_RFQ_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_CONT_TYPE VARCHAR2(160)

	
	ALTER TABLE PROC_RFP_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_FILE_DATA BLOB
	ALTER TABLE PROC_RFP_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_FILE_NAME VARCHAR2(500 CHAR)	
	ALTER TABLE PROC_RFP_EVENT_AWARD_AUDIT ADD AWARD_ATTACH_CONT_TYPE VARCHAR2(160)
	
 

 -----------------------------------------------------------------------------------------
    -----------------------------------PH-348------------------------------------------------
    -----------------------------------------------------------------------------------------
     
	
	ALTER TABLE PROC_RFT_EVENTS ADD INTERNAL_REMARKS VARCHAR2(2000);
	
	ALTER TABLE PROC_RFA_EVENTS ADD INTERNAL_REMARKS VARCHAR2(2000);
	
	ALTER TABLE PROC_RFI_EVENTS ADD INTERNAL_REMARKS VARCHAR2(2000);
	
	ALTER TABLE PROC_RFP_EVENTS ADD INTERNAL_REMARKS VARCHAR2(2000);
	
	ALTER TABLE PROC_RFQ_EVENTS ADD INTERNAL_REMARKS VARCHAR2(2000);
	
	
	
	
	
	

	
	----------------------------------------------------------------------------------------------
    -----------------------------------PH-276 RFS Enhancements-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	
	
	CREATE TABLE PROC_RFS_CATEGORY (
	ID VARCHAR2(64),
	RFS_CODE VARCHAR2(15) NOT NULL ENABLE,
	RFS_NAME VARCHAR2(128) NOT NULL ENABLE,
	STATUS VARCHAR2(255),
	CREATED_DATE TIMESTAMP,
	MODIFIED_DATE TIMESTAMP,
	TENANT_ID VARCHAR2(64),
	CREATED_BY VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFS_CAT_BUYER_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_RFS_CAT_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFS_CAT_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID)
	) ;
	
	ALTER TABLE  PROC_SOURCING_FORM_REQ ADD BUDGET_AMOUNT NUMBER(20,4);
	ALTER TABLE  PROC_SOURCING_FORM_REQ ADD HISTORICAL_AMOUNT NUMBER(20,4);
	ALTER TABLE  PROC_SOURCING_FORM_REQ ADD COST_CENTER VARCHAR2(64);
	ALTER TABLE  PROC_SOURCING_FORM_REQ ADD IS_DOCUMENT_COMPLETED NUMBER(1) default 0;
	
    ALTER TABLE PROC_SOURCING_FORM_REQ ADD CONSTRAINT FK_RFS_COSTCENTER_ID FOREIGN KEY (COST_CENTER) REFERENCES PROC_COST_CENTER (ID);
	
	CREATE TABLE "PROC_RFS_DOCUMENTS" 
    ("ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"CONTENT_TYPE" VARCHAR2(160 CHAR), 
	"DESCRIPTION" VARCHAR2(300 CHAR), 
	"FILE_DATA" BLOB, 
	"FILE_NAME" VARCHAR2(500 CHAR), 
	"FILE_SIZE" NUMBER(10,0), 
	"UPLOAD_DATE" TIMESTAMP (6), 
	"RFS_ID" VARCHAR2(64 CHAR), 
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "FK_RFS_DOCUMENT" FOREIGN KEY ("RFS_ID")
	  REFERENCES "PROC_SOURCING_FORM_REQ" ("ID")
	  );
	  
	  ALTER TABLE PROC_SOURCING_FORM_TEMPLATE ADD APPROVALS_COUNT INTEGER;
	  ALTER TABLE PROC_SOURCING_FORM_REQ ADD APPROVALS_COUNT INTEGER;
	  
	 CREATE TABLE "PROC_SOURCING_TEMPLATE_FIELD" 
     ("ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
    "FIELD_NAME" VARCHAR2(80 CHAR) NOT NULL ENABLE,
	"DEFAULT_VALUE" VARCHAR2(1000), 
	"IS_VISIBLE" NUMBER(1) default 0 NOT NULL ENABLE,
	"IS_READ_ONLY" NUMBER(1) default 0 NOT NULL ENABLE,
	"IS_OPTIONAL" NUMBER(1) default 0 NOT NULL ENABLE,
	"TENANT_ID" VARCHAR2(64) NOT NULL ENABLE,
	"TEMPLATE_ID" VARCHAR2(64) NOT NULL ENABLE,
	 PRIMARY KEY ("ID"), 
	 	CONSTRAINT "FK_SOUR_TMPLATE_TANT_ID" FOREIGN KEY ("TENANT_ID") REFERENCES "PROC_BUYER" ("BUYER_ID") ENABLE,
		CONSTRAINT "FK_SOUR_TMPLATE_BUYR_ID" FOREIGN KEY ("TEMPLATE_ID") REFERENCES "PROC_SOURCING_FORM_TEMPLATE" ("ID") ENABLE

	  );  
	  
	 CREATE TABLE PROC_APPROVAL_DOCUMENTS
    (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	CONTENT_TYPE VARCHAR2(160 CHAR), 
	DESCRIPTION VARCHAR2(300 CHAR), 
	FILE_DATA BLOB, 
	FILE_NAME VARCHAR2(500 CHAR), 
	FILE_SIZE NUMBER(10,0), 
	UPLOAD_DATE TIMESTAMP (6), 
	RFS_ID VARCHAR2(64 CHAR), 
	PRIMARY KEY (ID), 
	CONSTRAINT FK_APPROVAL_DOCUMENT FOREIGN KEY (RFS_ID)
	REFERENCES PROC_SOURCING_FORM_REQ (ID)
	  );
	    
	  
	 ALTER TABLE PROC_SOURCING_FORM_REQ ADD ALLOW_TO_ADD_ADDI_APPROVAL NUMBER(1) default 0;
	 ALTER TABLE PROC_SOURCING_FORM_TEMPLATE ADD ALLOW_TO_ADD_ADDI_APPROVAL NUMBER(1) default 0;
	 
	 
	 ALTER TABLE PROC_SOURCING_FORM_APP_REQ ADD CREATED_BY VARCHAR2(64);
	 ALTER TABLE PROC_SOURCING_FORM_APP_REQ ADD CONSTRAINT FK_A_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID);
	    
	 ALTER TABLE PROC_SOURCING_FORM_APP_REQ ADD BATCH_NO NUMBER(5) default 0;
	 
	 
	 
	
	
	----------------------------------------------------------------------------------------------
    -----------------------------------SUPPLIER-BLACKLISTING-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	
    ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD SUSPEND_START_DATE TIMESTAMP
	ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD SUSPEND_END_DATE TIMESTAMP
	ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD IS_FUTURE_SUSPEND NUMBER(1) DEFAULT 0
	ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD SUSPEND_REMARK VARCHAR2(500)
	ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD BLACKLIST_REMARK VARCHAR2(500)
	CREATE TABLE PROC_FAVOURITE_SUPPLIER_STATUS (ID VARCHAR2(64) PRIMARY KEY, ACTION_DATE TIMESTAMP , ACTION_BY VARCHAR2(64),DESCRIPTION VARCHAR2(300),TENANT_ID VARCHAR2(64),FAV_SUPPLIER VARCHAR2(64),BUYER_REMARK VARCHAR2(500));
	ALTER TABLE PROC_FAVOURITE_SUPPLIER_STATUS ADD CONSTRAINT  FK_F_SUP_STUS_USR_ACTION_BY FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID)
	ALTER TABLE PROC_FAVOURITE_SUPPLIER_STATUS ADD CONSTRAINT FK_F_SUP_STUS_SUP_ID FOREIGN KEY (FAV_SUPPLIER)  REFERENCES PROC_SUPPLIER(SUPPLIER_ID)
	 
	 
	 	-----------------------------------------------------------------------------------------
    -----------------------------------PH-288------------------------------------------------
    -----------------------------------------------------------------------------------------
	ALTER TABLE PROC_RFX_TEMPLATE ADD (ALLOW_VIEW_AUCTION_HALL NUMBER (1) DEFAULT 0 ,VISIBLE_VIEW_AUCTION_HALL NUMBER(1) DEFAULT 0,READ_ONLY_VIEW_AUCTION_HALL NUMBER(1) DEFAULT 0);
	ALTER TABLE PROC_RFA_EVENTS ADD ALLOW_VIEW_AUCTION_HALL NUMBER(1) DEFAULT 0 ;


	
	
	
	 
 	-----------------------------------------------------------------------------------------
    -----------------------------------PH-339------------------------------------------------
    -----------------------------------------------------------------------------------------
	
	
     ALTER TABLE PROC_RFT_REMINDER ADD START_REMINDER NUMBER DEFAULT 0;
     
     ALTER TABLE PROC_RFQ_REMINDER ADD START_REMINDER NUMBER DEFAULT 0;

     ALTER TABLE PROC_RFP_REMINDER ADD START_REMINDER NUMBER DEFAULT 0;

     ALTER TABLE PROC_RFI_REMINDER ADD START_REMINDER NUMBER DEFAULT 0;

	
	
	
	 -----------------------------------------------------------------------------------------
    -----------------------------------PH-355------------------------------------------------
    -----------------------------------------------------------------------------------------
  
     ALTER TABLE PROC_RFX_TEMPLATE ADD ALLOW_SUPPLIER_BASED_ON_STATE NUMBER(1) default 0;
     ALTER TABLE PROC_RFX_TEMPLATE ADD RESTRICT_SUPPLIER_BY_STATE NUMBER(1) default 0;
	
	
	  
	-----------------------------------------------------------------------------------------
    -----------------------------------PH-278------------------------------------------------
    -----------------------------------------------------------------------------------------
 
     ALTER TABLE PROC_RFA_EVENT_SUPP_CQ_ITEM ADD DATE_ANSWER TIMESTAMP;
 	 ALTER TABLE PROC_RFI_EVENT_SUPP_CQ_ITEM ADD DATE_ANSWER TIMESTAMP;
 	 ALTER TABLE PROC_RFP_EVENT_SUPP_CQ_ITEM ADD DATE_ANSWER TIMESTAMP;
 	 ALTER TABLE PROC_RFQ_EVENT_SUPP_CQ_ITEM ADD DATE_ANSWER TIMESTAMP;
 	 ALTER TABLE PROC_RFT_EVENT_SUPP_CQ_ITEM ADD DATE_ANSWER TIMESTAMP;

 	   
	-----------------------------------------------------------------------------------------
    -----------------------------------PH-299------------------------------------------------
    -----------------------------------------------------------------------------------------
	
	ALTER TABLE PROC_RFA_EVENT_SUPP_CQ_ITEM MODIFY TEXT_ANSWERS VARCHAR2(1500);
	ALTER TABLE PROC_RFI_EVENT_SUPP_CQ_ITEM MODIFY TEXT_ANSWERS VARCHAR2(1500);
	ALTER TABLE PROC_RFP_EVENT_SUPP_CQ_ITEM MODIFY TEXT_ANSWERS VARCHAR2(1500);
	ALTER TABLE PROC_RFQ_EVENT_SUPP_CQ_ITEM MODIFY TEXT_ANSWERS VARCHAR2(1500);
	ALTER TABLE PROC_RFT_EVENT_SUPP_CQ_ITEM MODIFY TEXT_ANSWERS VARCHAR2(1500);
	
	
	
	
	
	
	
	
	-----------------------------------------------------------------------------------------
    -----------------------------------PH-275------------------------------------------------
    -----------------------------------------------------------------------------------------


	ALTER TABLE PROC_AUCTION_BIDS MODIFY BID_AMOUNT NUMBER(18,6) ;
	
	ALTER TABLE PROC_AUCTION_RULES MODIFY BID_MIN_VALUE NUMBER(22,6) ;
	
	ALTER TABLE PROC_AUCTION_RULES MODIFY PRICE_HIGHER_LEAD_BID_VAL NUMBER(22,6) ;
	
	ALTER TABLE PROC_AUCTION_RULES MODIFY DUTCH_START_PRICE NUMBER(22,6) ;
	
	ALTER TABLE PROC_AUCTION_RULES MODIFY DUTCH_MINIMUM_PRICE NUMBER(22,6) ;
	
	ALTER TABLE PROC_AUCTION_RULES MODIFY DUTCH_AMOUNT_DIFFERENCE NUMBER(22,6) ;
	
	ALTER TABLE PROC_AUCTION_RULES MODIFY DUTCH_AUCTION_CURRENT_AMNT NUMBER(22,6) ;
	
	
	ALTER TABLE PROC_RFA_EVENT_AWARD_DETAILS MODIFY AWARDED_PRICE NUMBER(22,6) ;
	ALTER TABLE PROC_RFA_EVENT_AWARD_DETAILS MODIFY ORIGINAL_PRICE NUMBER(22,6) ;
	ALTER TABLE PROC_RFA_EVENT_AWARD_DETAILS MODIFY TAX NUMBER(18,6) ;
	ALTER TABLE PROC_RFA_EVENT_AWARD_DETAILS MODIFY TOTAL_PRICE NUMBER(22,6) ;
	
	ALTER TABLE PROC_RFP_EVENT_AWARD_DETAILS MODIFY AWARDED_PRICE NUMBER(22,6) ;
	ALTER TABLE PROC_RFP_EVENT_AWARD_DETAILS MODIFY ORIGINAL_PRICE NUMBER(22,6) ;
	ALTER TABLE PROC_RFP_EVENT_AWARD_DETAILS MODIFY TAX NUMBER(18,6) ;
	ALTER TABLE PROC_RFP_EVENT_AWARD_DETAILS MODIFY TOTAL_PRICE NUMBER(22,6) ;
	
	ALTER TABLE PROC_RFQ_EVENT_AWARD_DETAILS MODIFY AWARDED_PRICE NUMBER(22,6) ;
	ALTER TABLE PROC_RFQ_EVENT_AWARD_DETAILS MODIFY ORIGINAL_PRICE NUMBER(22,6) ;
	ALTER TABLE PROC_RFQ_EVENT_AWARD_DETAILS MODIFY TAX NUMBER(18,6) ;
	ALTER TABLE PROC_RFQ_EVENT_AWARD_DETAILS MODIFY TOTAL_PRICE NUMBER(22,6) ;
	
	ALTER TABLE PROC_RFT_EVENT_AWARD_DETAILS MODIFY AWARDED_PRICE NUMBER(22,6) ;
	ALTER TABLE PROC_RFT_EVENT_AWARD_DETAILS MODIFY ORIGINAL_PRICE NUMBER(22,6) ;
	ALTER TABLE PROC_RFT_EVENT_AWARD_DETAILS MODIFY TAX NUMBER(18,6) ;
	ALTER TABLE PROC_RFT_EVENT_AWARD_DETAILS MODIFY TOTAL_PRICE NUMBER(22,6) ;
	
	
	
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM MODIFY UNIT_PRICE NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM MODIFY TAX NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFA_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT_WITH_TAX NUMBER(18,6) ;
	
	
	
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM MODIFY UNIT_PRICE NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM MODIFY TOTAL_AMOUNT NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM MODIFY TAX NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM MODIFY TOTAL_AMOUNT_WITH_TAX NUMBER(18,6) ;
	
	
	
	
	
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM MODIFY UNIT_PRICE NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM MODIFY TAX NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT_WITH_TAX NUMBER(18,6) ;
	
	
	
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM MODIFY UNIT_PRICE NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM MODIFY TOTAL_AMOUNT NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM MODIFY TAX NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM MODIFY TOTAL_AMOUNT_WITH_TAX NUMBER(18,6) ;
	
	
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM MODIFY UNIT_PRICE NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM MODIFY TAX NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT_WITH_TAX NUMBER(18,6) ;
	
	
	
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM MODIFY UNIT_PRICE NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM MODIFY TOTAL_AMOUNT NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM MODIFY TAX NUMBER(18,6) ;
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM MODIFY TOTAL_AMOUNT_WITH_TAX NUMBER(18,6) ;
	
	
	
	
	
	
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY UNIT_PRICE NUMBER(18,6);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT NUMBER(18,6);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY TAX NUMBER(18,6);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT_WITH_TAX NUMBER(18,6);
	
	
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY UNIT_PRICE NUMBER(18,6);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT NUMBER(18,6);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY TAX NUMBER(18,6);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY TOTAL_AMOUNT_WITH_TAX NUMBER(18,6);
	
	
	
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM MODIFY UNIT_PRICE NUMBER(18,6);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM MODIFY TOTAL_AMOUNT NUMBER(18,6);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM MODIFY TAX NUMBER(18,6);
	
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM MODIFY TOTAL_AMOUNT_WITH_TAX NUMBER(18,6);
	
	
	
	ALTER TABLE PROC_RFA_EVENTS MODIFY PARTICIPATION_FEES NUMBER(12,6);
	
	ALTER TABLE PROC_RFA_EVENTS MODIFY BUDGET_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFA_EVENTS MODIFY HISTORICAL_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFA_EVENTS MODIFY DEPOSIT NUMBER(12,6);
	
	
	ALTER TABLE PROC_RFI_EVENTS MODIFY PARTICIPATION_FEES NUMBER(12,6);
	
	ALTER TABLE PROC_RFI_EVENTS MODIFY BUDGET_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFI_EVENTS MODIFY HISTORICAL_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFI_EVENTS MODIFY DEPOSIT NUMBER(12,6);
	
	
	ALTER TABLE PROC_RFQ_EVENTS MODIFY PARTICIPATION_FEES NUMBER(12,6);
	
	ALTER TABLE PROC_RFQ_EVENTS MODIFY BUDGET_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFQ_EVENTS MODIFY HISTORICAL_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFQ_EVENTS MODIFY DEPOSIT NUMBER(12,6);
	
	
	
	
	ALTER TABLE PROC_RFP_EVENTS MODIFY PARTICIPATION_FEES NUMBER(12,6);
	
	ALTER TABLE PROC_RFP_EVENTS MODIFY BUDGET_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFP_EVENTS MODIFY HISTORICAL_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFP_EVENTS MODIFY DEPOSIT NUMBER(12,6);
	
	
	ALTER TABLE PROC_RFT_EVENTS MODIFY PARTICIPATION_FEES NUMBER(12,6);
	
	ALTER TABLE PROC_RFT_EVENTS MODIFY BUDGET_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFT_EVENTS MODIFY HISTORICAL_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFT_EVENTS MODIFY DEPOSIT NUMBER(12,6);
	
	
	ALTER TABLE PROC_RFA_EVENT_AWARD MODIFY GRAND_TOTAL_PRICE NUMBER(22,6);
	
	ALTER TABLE PROC_RFA_EVENT_AWARD MODIFY TOTAL_AWARD_PRICE NUMBER(22,6);
	
	ALTER TABLE PROC_RFA_EVENT_AWARD MODIFY TOTAL_SUPPLIER_PRICE NUMBER(22,6);
	
	
	ALTER TABLE PROC_RFP_EVENT_AWARD MODIFY GRAND_TOTAL_PRICE NUMBER(22,6);
	
	ALTER TABLE PROC_RFP_EVENT_AWARD MODIFY TOTAL_AWARD_PRICE NUMBER(22,6);
	
	ALTER TABLE PROC_RFP_EVENT_AWARD MODIFY TOTAL_SUPPLIER_PRICE NUMBER(22,6);
	
	
	ALTER TABLE PROC_RFQ_EVENT_AWARD MODIFY GRAND_TOTAL_PRICE NUMBER(22,6);
	
	ALTER TABLE PROC_RFQ_EVENT_AWARD MODIFY TOTAL_AWARD_PRICE NUMBER(22,6);
	
	ALTER TABLE PROC_RFQ_EVENT_AWARD MODIFY TOTAL_SUPPLIER_PRICE NUMBER(22,6);
	
	
	ALTER TABLE PROC_RFT_EVENT_AWARD MODIFY GRAND_TOTAL_PRICE NUMBER(22,6);
	
	ALTER TABLE PROC_RFT_EVENT_AWARD MODIFY TOTAL_AWARD_PRICE NUMBER(22,6);
	
	ALTER TABLE PROC_RFT_EVENT_AWARD MODIFY TOTAL_SUPPLIER_PRICE NUMBER(22,6);
	
	
	
	ALTER TABLE PROC_RFA_EVENTS MODIFY WINNING_PRICE NUMBER(22,6);
	
	ALTER TABLE PROC_RFA_EVENTS MODIFY AUCTION_SUSPEND_AMOUNT NUMBER(22,6);
	
	ALTER TABLE PROC_RFA_EVENTS MODIFY AWARDED_PRICE NUMBER(22,6);
	ALTER TABLE PROC_RFT_EVENTS MODIFY AWARDED_PRICE NUMBER(22,6);
	ALTER TABLE PROC_RFQ_EVENTS MODIFY AWARDED_PRICE NUMBER(22,6);
	ALTER TABLE PROC_RFP_EVENTS MODIFY AWARDED_PRICE NUMBER(22,6);
	
	
	
	ALTER TABLE PROC_RFA_SUPPLIER_BQ MODIFY ADDITIONAL_TAX NUMBER(22,6);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ MODIFY GRAND_TOTAL NUMBER(22,6);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ MODIFY REVISED_GRAND_TOTAL NUMBER(22,6);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ MODIFY TOTAL_AFTER_TAX NUMBER(22,6);
	ALTER TABLE PROC_RFA_SUPPLIER_BQ MODIFY INITIAL_PRICE NUMBER(22,6);
	
	
	
	
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ MODIFY ADDITIONAL_TAX NUMBER(22,6);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ MODIFY GRAND_TOTAL NUMBER(22,6);
	ALTER TABLE PROC_RFQ_SUPPLIER_BQ MODIFY TOTAL_AFTER_TAX NUMBER(22,6);
	
	
	ALTER TABLE PROC_RFT_SUPPLIER_BQ MODIFY ADDITIONAL_TAX NUMBER(22,6);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ MODIFY GRAND_TOTAL NUMBER(22,6);
	ALTER TABLE PROC_RFT_SUPPLIER_BQ MODIFY TOTAL_AFTER_TAX NUMBER(22,6);
	
	ALTER TABLE PROC_RFP_SUPPLIER_BQ MODIFY ADDITIONAL_TAX NUMBER(22,6);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ MODIFY GRAND_TOTAL NUMBER(22,6);
	ALTER TABLE PROC_RFP_SUPPLIER_BQ MODIFY TOTAL_AFTER_TAX NUMBER(22,6);
	
	
		ALTER TABLE PROC_RFA_EVENT_BQ_ITEM MODIFY UNIT_QUANTITY NUMBER(25,6) ;
	
	ALTER TABLE PROC_RFP_EVENT_BQ_ITEM MODIFY UNIT_QUANTITY NUMBER(25,6) ;
	
	ALTER TABLE PROC_RFQ_EVENT_BQ_ITEM MODIFY UNIT_QUANTITY NUMBER(25,6) ;
	
	ALTER TABLE PROC_RFT_EVENT_BQ_ITEM MODIFY UNIT_QUANTITY NUMBER(25,6) ;
	
	
	
	ALTER TABLE PROC_RFA_EVENT_BQ_SUP_ITEM MODIFY UNIT_QUANTITY NUMBER(25,6);
	ALTER TABLE PROC_RFP_EVENT_BQ_SUP_ITEM MODIFY UNIT_QUANTITY NUMBER(25,6);
	ALTER TABLE PROC_RFQ_EVENT_BQ_SUP_ITEM MODIFY UNIT_QUANTITY NUMBER(25,6);
	ALTER TABLE PROC_RFT_EVENT_BQ_SUP_ITEM MODIFY UNIT_QUANTITY NUMBER(25,6);
	
	-----------------------------------------------------------------------------------------
    -----------------------------------PH-300------------------------------------------------
    -----------------------------------------------------------------------------------------
    
	
	ALTER TABLE PROC_RFT_EVENT_MEETINGS ADD IS_MEETING_ATTEND_MANDTORY NUMBER DEFAULT 0;

	ALTER TABLE PROC_RFP_MEETINGS ADD IS_MEETING_ATTEND_MANDTORY NUMBER DEFAULT 0;

	ALTER TABLE PROC_RFQ_MEETINGS ADD IS_MEETING_ATTEND_MANDTORY NUMBER DEFAULT 0;

	ALTER TABLE PROC_RFI_MEETINGS ADD IS_MEETING_ATTEND_MANDTORY NUMBER DEFAULT 0;

	ALTER TABLE PROC_RFA_EVENT_MEETINGS ADD IS_MEETING_ATTEND_MANDTORY NUMBER DEFAULT 0;
	
    
    ----------------------------------------------------------------------------------------------
    -----------------------------------NOTICE BOARD-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
    
    
    ALTER TABLE PROC_BUYER_SETTINGS ADD FILE_DATA BLOB;

    ALTER TABLE PROC_BUYER_SETTINGS ADD FILE_NAME VARCHAR2(200);

    ALTER TABLE PROC_BUYER_SETTINGS ADD CONTENT_TYPE VARCHAR2(160); 
    
    ALTER TABLE PROC_BUYER_SETTINGS ADD FILE_SIZE_KB NUMBER(10);
    
    
    ----------------------------------------------------------------------------------------------
    -----------------------------------SELF INVITE-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
    
    ALTER TABLE  PROC_BUYER ADD PUBLIC_CONTEXT_PATH VARCHAR2(100);

    ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD IS_SELF_INVITED NUMBER DEFAULT 0;
    
    ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD IS_SELF_INVITED NUMBER DEFAULT 0;
        
   	ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD IS_SELF_INVITED NUMBER DEFAULT 0;
        
   	ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD IS_SELF_INVITED NUMBER DEFAULT 0;
   	        
   	ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD IS_SELF_INVITED NUMBER DEFAULT 0;
   	
   	
   	CREATE TABLE "PROC_BUYER_ANNOUNCEMENT" 
   ("ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"ANNOUNCEMENT_TITLE" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"PUBLIC_OR_EMAIL_CONTENT" VARCHAR2(4000 CHAR), 
	"FAX_CONTENT" VARCHAR2(1000 CHAR), 
	"SMS_CONTENT" VARCHAR2(160 CHAR), 
	"ANNOUNCEMENT_START" TIMESTAMP (6) NOT NULL ENABLE, 
	"ANNOUNCEMENT_END" TIMESTAMP (6), 
	"STATUS" VARCHAR2(255 CHAR),  
	"CREATED_BY" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"CREATED_DATE" TIMESTAMP (6) NOT NULL ENABLE, 
	"MODIFIED_BY" VARCHAR2(64 CHAR), 
	"MODIFIED_DATE" TIMESTAMP (6), 
	"BUYER_ID" VARCHAR2(64 CHAR), 
	"FAX_SENT" NUMBER DEFAULT 0,
	"SMS_SENT" NUMBER DEFAULT 0,
	"EMAIL_SENT" NUMBER DEFAULT 0,
	"PUBLIC_SENT" NUMBER DEFAULT 0,
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "FK_ANNOUNCE_CREATED_BY" FOREIGN KEY ("CREATED_BY")
	  REFERENCES "PROC_USER" ("ID") ENABLE, 
	 CONSTRAINT "FK_ANNOUNCE_BUYER_ID" FOREIGN KEY ("BUYER_ID")
	  REFERENCES "PROC_BUYER" ("BUYER_ID") ENABLE, 
	 CONSTRAINT "FK_ANNOUNCE_MODIFIED_BY" FOREIGN KEY ("MODIFIED_BY")
	  REFERENCES "PROC_USER" ("ID") ENABLE
	  );
	  
    
   	-----------------------------------------------------------------------------------------
    -----------------------------------PH-340------------------------------------------------
    -----------------------------------------------------------------------------------------
     
	ALTER TABLE PROC_BUYER_SETTINGS ADD RFT_PUBLISH_URL VARCHAR2(1000);
	ALTER TABLE PROC_BUYER_SETTINGS ADD RFQ_PUBLISH_URL VARCHAR2(1000);
	ALTER TABLE PROC_BUYER_SETTINGS ADD RFI_PUBLISH_URL VARCHAR2(1000);
	
	ALTER TABLE PROC_BUYER_SETTINGS ADD RFT_UPDATE_PUBLISH_URL VARCHAR2(1000);
	ALTER TABLE PROC_BUYER_SETTINGS ADD RFQ_UPDATE_PUBLISH_URL VARCHAR2(1000);
	ALTER TABLE PROC_BUYER_SETTINGS ADD RFI_UPDATE_PUBLISH_URL VARCHAR2(1000);
	
	ALTER TABLE PROC_BUYER ADD ENABLE_EVENT_PUBLISHING NUMBER DEFAULT 0;

	-----------------------------------------------------------------------------------------
    -----------------------------------PH-352------------------------------------------------
    -----------------------------------------------------------------------------------------
    
	ALTER TABLE PROC_RFX_TEMPLATE ADD IS_PRIVATE_EVENT NUMBER DEFAULT 1;
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD IS_PARTIAL_EVENT NUMBER DEFAULT 1;

	ALTER TABLE PROC_RFX_TEMPLATE ADD IS_PUBLIC_EVENT NUMBER DEFAULT 1;


     
   	-----------------------------------------------------------------------------------------
    -----------------------------------PH-356------------------------------------------------
    -----------------------------------------------------------------------------------------
    
	ALTER TABLE PROC_RFI_EVENTS ADD MINIMUM_SUPPLIER_RATING NUMBER(10,4);
	ALTER TABLE PROC_RFI_EVENTS ADD MAXIMUM_SUPPLIER_RATING NUMBER(10,4);
		
	ALTER TABLE PROC_RFP_EVENTS ADD MINIMUM_SUPPLIER_RATING NUMBER(10,4);
	ALTER TABLE PROC_RFP_EVENTS ADD MAXIMUM_SUPPLIER_RATING NUMBER(10,4);

	ALTER TABLE PROC_RFT_EVENTS ADD MINIMUM_SUPPLIER_RATING NUMBER(10,4);
	ALTER TABLE PROC_RFT_EVENTS ADD MAXIMUM_SUPPLIER_RATING NUMBER(10,4);

	ALTER TABLE PROC_RFQ_EVENTS ADD MINIMUM_SUPPLIER_RATING NUMBER(10,4);
	ALTER TABLE PROC_RFQ_EVENTS ADD MAXIMUM_SUPPLIER_RATING NUMBER(10,4);

	ALTER TABLE PROC_RFA_EVENTS ADD MINIMUM_SUPPLIER_RATING NUMBER(10,4);
	ALTER TABLE PROC_RFA_EVENTS ADD MAXIMUM_SUPPLIER_RATING NUMBER(10,4);
	
	ALTER TABLE  PROC_SOURCING_FORM_REQ ADD MINIMUM_SUPPLIER_RATING NUMBER(10,4);
	ALTER TABLE  PROC_SOURCING_FORM_REQ ADD MAXIMUM_SUPPLIER_RATING NUMBER(10,4);

	
	
	
		
	 -----------------------------------------------------------------------------------------
    -----------------------------------PH-393------------------------------------------------
    -----------------------------------------------------------------------------------------
  
	
     CREATE TABLE PROC_SUPPLIER_TAGS (
	ID VARCHAR2(64),
	SUPPLIER_TAGS VARCHAR2(64) NOT NULL ENABLE, 
	DESCRIPTION VARCHAR2(128),
	STATUS VARCHAR2(255 CHAR), 
	TANENT_ID VARCHAR2(64 CHAR), 
	CREATED_BY VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	CREATED_DATE TIMESTAMP (6) NOT NULL ENABLE, 
	MODIFIED_BY VARCHAR2(64 CHAR), 
	MODIFIED_DATE TIMESTAMP (6),  
	PRIMARY KEY (ID),
	CONSTRAINT FK_SUPPTAG_BUYER_CODE FOREIGN KEY (TANENT_ID)  REFERENCES PROC_BUYER (BUYER_ID),  
	CONSTRAINT FK_SUPPTAG_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SUPPTAG_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
) ;


	CREATE
	    TABLE
		PROC_FAV_SUPPLIER_TAGS(
			FAV_SUPP_ID VARCHAR2(64),
			SUPP_TAG_ID VARCHAR2(64),
			FOREIGN KEY (FAV_SUPP_ID) REFERENCES PROC_FAVOURITE_SUPPLIER(FAV_SUPPLIER_ID),
			FOREIGN KEY (SUPP_TAG_ID) REFERENCES PROC_SUPPLIER_TAGS(ID)
		)
		
		
	
	-----------------------------------------------------------------------------------------
    -----------------------------------OPTIMIZATION FOR EVENT REPORT-------------------------
    -----------------------------------------------------------------------------------------
  
	ALTER TABLE PROC_RFP_EVENTS ADD WINNING_SUPPLIER VARCHAR2(64);
	ALTER TABLE PROC_RFP_EVENTS ADD CONSTRAINT FK_RFP_WINNING_SUPP FOREIGN KEY (WINNING_SUPPLIER) REFERENCES PROC_SUPPLIER (SUPPLIER_ID);

	ALTER TABLE PROC_RFT_EVENTS ADD WINNING_SUPPLIER VARCHAR2(64);
	ALTER TABLE PROC_RFT_EVENTS ADD CONSTRAINT FK_RFT_WINNING_SUPP FOREIGN KEY (WINNING_SUPPLIER) REFERENCES PROC_SUPPLIER (SUPPLIER_ID);

	ALTER TABLE PROC_RFQ_EVENTS ADD WINNING_SUPPLIER VARCHAR2(64);
	ALTER TABLE PROC_RFQ_EVENTS ADD CONSTRAINT FK_RFQ_WINNING_SUPP FOREIGN KEY (WINNING_SUPPLIER) REFERENCES PROC_SUPPLIER (SUPPLIER_ID);

	
   	ALTER TABLE PROC_RFP_EVENTS ADD WINNING_PRICE NUMBER(20,4) ;
	ALTER TABLE PROC_RFQ_EVENTS ADD WINNING_PRICE NUMBER(20,4) ;
	ALTER TABLE PROC_RFT_EVENTS ADD WINNING_PRICE NUMBER(20,4) ;
 

	
	
					SELECT ei.ID,(SELECT ess.SUPPLIER_ID FROM (
					SELECT
					DISTINCT 
					sb.SUPPLIER_ID,
					es.SUPPLIER_BID_SUBMITTED_TIME,
					es.EVENT_ID,
					SUM(TOTAL_AFTER_TAX) AS totalAfterTax
					FROM
					PROC_RFA_SUPPLIER_BQ sb
					JOIN PROC_RFA_EVENT_SUPPLIERS es ON
					sb.SUPPLIER_ID = es.SUPPLIER_ID
					WHERE
					1=1
					AND sb.EVENT_ID =ei.ID
					AND es.IS_DISQUALIFY = 0
					AND es.SUBMISSION_STATUS = 'COMPLETED'
					AND es.EVENT_ID = sb.EVENT_ID
					GROUP BY
					sb.SUPPLIER_ID,
					es.SUPPLIER_BID_SUBMITTED_TIME,
					es.EVENT_ID
					ORDER BY
					totalAfterTax ASC,
					es.SUPPLIER_BID_SUBMITTED_TIME
					) ess WHERE ROWNUM = 1) AS SUPPLIER_ID,
					
					(SELECT ess.totalAfterTax FROM (
					SELECT
					DISTINCT 
					sb.SUPPLIER_ID,
					es.SUPPLIER_BID_SUBMITTED_TIME,
					es.EVENT_ID,
					SUM(TOTAL_AFTER_TAX) AS totalAfterTax
					FROM
					PROC_RFA_SUPPLIER_BQ sb
					JOIN PROC_RFA_EVENT_SUPPLIERS es ON
					sb.SUPPLIER_ID = es.SUPPLIER_ID
					WHERE
					1=1
					AND sb.EVENT_ID =ei.ID
					AND es.IS_DISQUALIFY = 0
					AND es.SUBMISSION_STATUS = 'COMPLETED'
					AND es.EVENT_ID = sb.EVENT_ID
					GROUP BY
					sb.SUPPLIER_ID,
					es.SUPPLIER_BID_SUBMITTED_TIME,
					es.EVENT_ID
					ORDER BY
					totalAfterTax ASC,
					es.SUPPLIER_BID_SUBMITTED_TIME
					) ess WHERE ROWNUM = 1) AS AMOUNT
					FROM PROC_RFA_EVENTS ei WHERE ei.STATUS in ('COMPLETE', 'FINISHED')
					
					
					
					
					
					
					
					
					update PROC_RFA_EVENTS ei SET ei.WINNING_SUPPLIER = (SELECT ess.SUPPLIER_ID FROM (
					SELECT
					DISTINCT 
					sb.SUPPLIER_ID,
					es.SUPPLIER_BID_SUBMITTED_TIME,
					es.EVENT_ID,
					SUM(TOTAL_AFTER_TAX) AS totalAfterTax
					FROM
					PROC_RFA_SUPPLIER_BQ sb
					JOIN PROC_RFA_EVENT_SUPPLIERS es ON
					sb.SUPPLIER_ID = es.SUPPLIER_ID
					WHERE
					1=1
					AND sb.EVENT_ID =ei.ID
					AND es.IS_DISQUALIFY = 0
					AND es.SUBMISSION_STATUS = 'COMPLETED'
					AND es.EVENT_ID = sb.EVENT_ID
					GROUP BY
					sb.SUPPLIER_ID,
					es.SUPPLIER_BID_SUBMITTED_TIME,
					es.EVENT_ID
					ORDER BY
					totalAfterTax ASC,
					es.SUPPLIER_BID_SUBMITTED_TIME
					) ess WHERE ROWNUM = 1),
					
					ei.WINNING_PRICE= (SELECT ess.totalAfterTax FROM (
					SELECT
					DISTINCT 
					sb.SUPPLIER_ID,
					es.SUPPLIER_BID_SUBMITTED_TIME,
					es.EVENT_ID,
					SUM(TOTAL_AFTER_TAX) AS totalAfterTax
					FROM
					PROC_RFA_SUPPLIER_BQ sb
					JOIN PROC_RFA_EVENT_SUPPLIERS es ON
					sb.SUPPLIER_ID = es.SUPPLIER_ID
					WHERE
					1=1
					AND sb.EVENT_ID =ei.ID
					AND es.IS_DISQUALIFY = 0
					AND es.SUBMISSION_STATUS = 'COMPLETED'
					AND es.EVENT_ID = sb.EVENT_ID
					GROUP BY
					sb.SUPPLIER_ID,
					es.SUPPLIER_BID_SUBMITTED_TIME,
					es.EVENT_ID
					ORDER BY
					totalAfterTax ASC,
					es.SUPPLIER_BID_SUBMITTED_TIME
					) ess WHERE ROWNUM = 1)
					WHERE ei.STATUS in ('COMPLETE', 'FINISHED') AND ei.WINNING_SUPPLIER IS NULL
					

					
	----------------------------------------------------------------------------------
	----- Creating indexs already update in all databases no need to update again ----
	----------------------------------------------------------------------------------

	CREATE INDEX PROC_SUP_NOTIF_MSG_TO_IDX ON PROC_SUPPLIER_NOTIFICATION (MESSAGE_TO);
	CREATE INDEX PROC_BUY_NOTIF_MSG_TO_IDX ON PROC_BUYER_NOTIFICATION (MESSAGE_TO);
	CREATE INDEX PROC_FIN_NOTIF_MSG_TO_IDX ON PROC_FINANCE_NOTIFICATION (MESSAGE_TO);
	CREATE INDEX PROC_OWN_NOTIF_MSG_TO_IDX ON PROC_OWNER_NOTIFICATION (MESSAGE_TO);


    ----------------------------------------------------------------------------------------------
    -----------------------------------PH-230-----------------------------------------------------
    ----------------------------------------------------------------------------------------------
	
	CREATE TABLE PROC_ERP_STAGGING (
			ID VARCHAR2(64) NOT NULL,
			ACTION_DATE TIMESTAMP (6) NOT NULL,
			DOC_NO VARCHAR2(64),
			EVENT_TYPE VARCHAR2(255),
			PAYLOAD CLOB NOT NULL ENABLE,
			SENT_DATE TIMESTAMP (6),
			IS_SENT NUMBER(1,0),
			TENANT_ID VARCHAR2(255) NOT NULL,
			ACTION_BY VARCHAR2(64) NOT NULL,
			PRIMARY KEY ("ID")
	);

	ALTER TABLE PROC_ERP_SETUP ADD AWARD_INTERFACE_TYPE_PULL NUMBER(1) DEFAULT 0;
		
	ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD TAX_NO VARCHAR2(32));
		
		
		
		
		
					
	----------------------------------------------------------------------------------
	--------------------------------PH-354------------------------------------------
	---------------------------------------------------------------------------------
	

	ALTER TABLE PROC_RFA_EVENTS ADD AWARD_DATE TIMESTAMP

	ALTER TABLE PROC_RFA_EVENTS ADD EVENT_PUSH_DATE TIMESTAMP

	ALTER TABLE PROC_RFP_EVENTS ADD AWARD_DATE TIMESTAMP

	ALTER TABLE PROC_RFP_EVENTS ADD EVENT_PUSH_DATE TIMESTAMP

	ALTER TABLE PROC_RFQ_EVENTS ADD AWARD_DATE TIMESTAMP

	ALTER TABLE PROC_RFQ_EVENTS ADD EVENT_PUSH_DATE TIMESTAMP

	ALTER TABLE PROC_RFT_EVENTS ADD AWARD_DATE TIMESTAMP

	ALTER TABLE PROC_RFT_EVENTS ADD EVENT_PUSH_DATE TIMESTAMP

	ALTER TABLE PROC_RFI_EVENTS ADD AWARD_DATE TIMESTAMP

	ALTER TABLE PROC_RFI_EVENTS ADD EVENT_PUSH_DATE TIMESTAMP

	
    ALTER TABLE PROC_RFA_EVENTS ADD PR_PUSH_DATE TIMESTAMP

 	ALTER TABLE PROC_RFT_EVENTS ADD PR_PUSH_DATE TIMESTAMP
 
 	ALTER TABLE PROC_RFP_EVENTS ADD PR_PUSH_DATE TIMESTAMP

 	ALTER TABLE PROC_RFQ_EVENTS ADD PR_PUSH_DATE TIMESTAMP
 	
 	-----------------------------------------------------------------
 	----------------------------PH-376-------------------------------
 	-----------------------------------------------------------------
 	
 	ALTER TABLE PROC_SUPPLIER ADD POSTAL_CODE NUMBER(6);

 	
 	----------------------------------------------------------------------------------
	--------------------------------PRE_RELEASE_42-(PH-503)-----------------------------------------
	---------------------------------------------------------------------------------
 	
 	     ALTER TABLE PROC_RFX_TEMPLATE MODIFY VISIBLE_ALLOW_TO_SUSPEND_EVENT NUMBER(1,0) DEFAULT 1 ;
 	     
 	     

 	     
	 CREATE OR REPLACE VIEW PROC_RFX_SIMPLE_EVENTS AS 
	 SELECT e.ID,e.CONCLUDE_BY, e.IS_ERP_ENABLE, e.DELIVERY_DATE,e.CONCLUDE_DATE, e.URGENT_EVENT, e.START_MESSAGE_SENT, e.SUSPEND_REMARKS, e.CANCEL_REASON, e.PREVIOUS_EVENT, e.NEXT_EVENT, e.PREVIOUS_EVENT_TYPE, e.NEXT_EVENT_TYPE, e.CONCLUDE_REMARKS, e.IS_BILLOFQUANTITY_REQ, e.BUDGET_AMOUNT, e.CREATED_DATE, e.BUYER_SET_DECIMAL, e.IS_DOCUMENT_REQ, e.EVENT_DESCRIPTION, e.EVENT_END, e.EVENT_ID, e.EVENT_NAME, e.EVENT_PUBLISH_DATE, e.EVENT_START, e.EVENT_VISIBILITY, e.HISTORICAL_AMOUNT, e.IS_MEETINGS_REQ, e.MODIFIED_DATE, e.PARTICIPATION_FEES, e.PAYMENT_TERM, e.IS_QUESTIONNAIRES_REQ, e.REFERANCE_NUMBER, e.STATUS, e.SUBMISSION_VALIDITY_DAYS, e.TENANT_ID, e.CURRENCY_ID, e.COST_CENTER, e.BUSINESS_UNIT_ID, e.CREATED_BY, e.DELIVERY_ADDRESS, e.EVENT_OWNER, e.EVENT_CATEGORY, e.MODIFIED_BY, e.PARTICIPATION_FEE_CURRENCY, e.TEMPLATE_ID, e.IS_BQ_COMPLETED, e.IS_CQ_COMPLETED, e.IS_DOCUMENT_COMPLETED, e.IS_ENVELOP_COMPLETED, e.IS_EVENT_DETAIL_COMPLETED, e.IS_MEETINGS_COMPLETED, e.IS_SUMMARY_COMPLETED, e.IS_SUPPLIER_COMPLETED, e.ACTION_DATE, e.ACTION_BY,  e.SUSPENSION_TYPE, 'Request for Information' as EVENT_TYPE ,e.IS_AWARDED ,e.ERP_DOC_NO ,e.VIEW_SUPPLIER_NAME,e.ALLOW_CLOSE_ENVELOPE,e.ALLOW_ADD_SUPPLIER,e.ALLOW_TO_SUSPEND_EVENT,e.PREVIOUS_REQUEST,e.DEPOSIT,e.DEPOSIT_CURRENCY,e.DISABLE_MASKING,e.UNMASKED_BY,e.INTERNAL_REMARKS,e.MINIMUM_SUPPLIER_RATING,e.MAXIMUM_SUPPLIER_RATING,e.EVENT_PUSH_DATE,e.AWARD_DATE  FROM PROC_RFI_EVENTS e  
	 UNION 
	 SELECT e.ID,e.CONCLUDE_BY, e.IS_ERP_ENABLE, e.DELIVERY_DATE,e.CONCLUDE_DATE, e.URGENT_EVENT, e.START_MESSAGE_SENT, e.SUSPEND_REMARKS, e.CANCEL_REASON, e.PREVIOUS_EVENT, e.NEXT_EVENT, e.PREVIOUS_EVENT_TYPE, e.NEXT_EVENT_TYPE, e.CONCLUDE_REMARKS, e.IS_BILLOFQUANTITY_REQ, e.BUDGET_AMOUNT, e.CREATED_DATE, e.BUYER_SET_DECIMAL, e.IS_DOCUMENT_REQ, e.EVENT_DESCRIPTION, e.EVENT_END, e.EVENT_ID, e.EVENT_NAME, e.EVENT_PUBLISH_DATE, e.EVENT_START, e.EVENT_VISIBILITY, e.HISTORICAL_AMOUNT, e.IS_MEETINGS_REQ, e.MODIFIED_DATE, e.PARTICIPATION_FEES, e.PAYMENT_TERM, e.IS_QUESTIONNAIRES_REQ, e.REFERANCE_NUMBER, e.STATUS, e.SUBMISSION_VALIDITY_DAYS, e.TENANT_ID, e.CURRENCY_ID, e.COST_CENTER, e.BUSINESS_UNIT_ID, e.CREATED_BY, e.DELIVERY_ADDRESS, e.EVENT_OWNER, e.EVENT_CATEGORY, e.MODIFIED_BY, e.PARTICIPATION_FEE_CURRENCY, e.TEMPLATE_ID, e.IS_BQ_COMPLETED, e.IS_CQ_COMPLETED, e.IS_DOCUMENT_COMPLETED, e.IS_ENVELOP_COMPLETED, e.IS_EVENT_DETAIL_COMPLETED, e.IS_MEETINGS_COMPLETED, e.IS_SUMMARY_COMPLETED, e.IS_SUPPLIER_COMPLETED, e.ACTION_DATE, e.ACTION_BY,  e.SUSPENSION_TYPE, 'Request for Tender' as EVENT_TYPE ,e.IS_AWARDED ,e.ERP_DOC_NO ,e.VIEW_SUPPLIER_NAME,e.ALLOW_CLOSE_ENVELOPE,e.ALLOW_ADD_SUPPLIER,e.ALLOW_TO_SUSPEND_EVENT,e.PREVIOUS_REQUEST,e.DEPOSIT,e.DEPOSIT_CURRENCY,e.DISABLE_MASKING,e.UNMASKED_BY,e.INTERNAL_REMARKS,e.MINIMUM_SUPPLIER_RATING,e.MAXIMUM_SUPPLIER_RATING,e.EVENT_PUSH_DATE, e.AWARD_DATE   FROM PROC_RFT_EVENTS e  
	 UNION 
	 SELECT e.ID,e.CONCLUDE_BY, e.IS_ERP_ENABLE, e.DELIVERY_DATE,e.CONCLUDE_DATE, e.URGENT_EVENT, e.START_MESSAGE_SENT, e.SUSPEND_REMARKS, e.CANCEL_REASON, e.PREVIOUS_EVENT, e.NEXT_EVENT, e.PREVIOUS_EVENT_TYPE, e.NEXT_EVENT_TYPE, e.CONCLUDE_REMARKS, e.IS_BILLOFQUANTITY_REQ, e.BUDGET_AMOUNT, e.CREATED_DATE, e.BUYER_SET_DECIMAL, e.IS_DOCUMENT_REQ, e.EVENT_DESCRIPTION, e.EVENT_END, e.EVENT_ID, e.EVENT_NAME, e.EVENT_PUBLISH_DATE, e.EVENT_START, e.EVENT_VISIBILITY, e.HISTORICAL_AMOUNT, e.IS_MEETINGS_REQ, e.MODIFIED_DATE, e.PARTICIPATION_FEES, e.PAYMENT_TERM, e.IS_QUESTIONNAIRES_REQ, e.REFERANCE_NUMBER, e.STATUS, e.SUBMISSION_VALIDITY_DAYS, e.TENANT_ID, e.CURRENCY_ID, e.COST_CENTER, e.BUSINESS_UNIT_ID, e.CREATED_BY, e.DELIVERY_ADDRESS, e.EVENT_OWNER, e.EVENT_CATEGORY, e.MODIFIED_BY, e.PARTICIPATION_FEE_CURRENCY, e.TEMPLATE_ID, e.IS_BQ_COMPLETED, e.IS_CQ_COMPLETED, e.IS_DOCUMENT_COMPLETED, e.IS_ENVELOP_COMPLETED, e.IS_EVENT_DETAIL_COMPLETED, e.IS_MEETINGS_COMPLETED, e.IS_SUMMARY_COMPLETED, e.IS_SUPPLIER_COMPLETED, e.ACTION_DATE, e.ACTION_BY,  e.SUSPENSION_TYPE, 'Request for Proposal' as EVENT_TYPE ,e.IS_AWARDED ,e.ERP_DOC_NO ,e.VIEW_SUPPLIER_NAME,e.ALLOW_CLOSE_ENVELOPE,e.ALLOW_ADD_SUPPLIER,e.ALLOW_TO_SUSPEND_EVENT,e.PREVIOUS_REQUEST,e.DEPOSIT,e.DEPOSIT_CURRENCY,e.DISABLE_MASKING ,e.UNMASKED_BY,e.INTERNAL_REMARKS,e.MINIMUM_SUPPLIER_RATING,e.MAXIMUM_SUPPLIER_RATING,e.EVENT_PUSH_DATE,e.AWARD_DATE  FROM PROC_RFP_EVENTS  e
	 UNION 
	 SELECT e.ID,e.CONCLUDE_BY, e.IS_ERP_ENABLE, e.DELIVERY_DATE,e.CONCLUDE_DATE, e.URGENT_EVENT, e.START_MESSAGE_SENT, e.SUSPEND_REMARKS, e.CANCEL_REASON, e.PREVIOUS_EVENT, e.NEXT_EVENT, e.PREVIOUS_EVENT_TYPE, e.NEXT_EVENT_TYPE, e.CONCLUDE_REMARKS, e.IS_BILLOFQUANTITY_REQ, e.BUDGET_AMOUNT, e.CREATED_DATE, e.BUYER_SET_DECIMAL, e.IS_DOCUMENT_REQ, e.EVENT_DESCRIPTION, e.EVENT_END, e.EVENT_ID, e.EVENT_NAME, e.EVENT_PUBLISH_DATE, e.EVENT_START, e.EVENT_VISIBILITY, e.HISTORICAL_AMOUNT, e.IS_MEETINGS_REQ, e.MODIFIED_DATE, e.PARTICIPATION_FEES, e.PAYMENT_TERM, e.IS_QUESTIONNAIRES_REQ, e.REFERANCE_NUMBER, e.STATUS, e.SUBMISSION_VALIDITY_DAYS, e.TENANT_ID, e.CURRENCY_ID, e.COST_CENTER, e.BUSINESS_UNIT_ID, e.CREATED_BY, e.DELIVERY_ADDRESS, e.EVENT_OWNER, e.EVENT_CATEGORY, e.MODIFIED_BY, e.PARTICIPATION_FEE_CURRENCY, e.TEMPLATE_ID, e.IS_BQ_COMPLETED, e.IS_CQ_COMPLETED, e.IS_DOCUMENT_COMPLETED, e.IS_ENVELOP_COMPLETED, e.IS_EVENT_DETAIL_COMPLETED, e.IS_MEETINGS_COMPLETED, e.IS_SUMMARY_COMPLETED, e.IS_SUPPLIER_COMPLETED, e.ACTION_DATE, e.ACTION_BY,  e.SUSPENSION_TYPE, 'Request for Quotation' as EVENT_TYPE,e.IS_AWARDED ,e.ERP_DOC_NO ,e.VIEW_SUPPLIER_NAME,e.ALLOW_CLOSE_ENVELOPE,e.ALLOW_ADD_SUPPLIER,e.ALLOW_TO_SUSPEND_EVENT,e.PREVIOUS_REQUEST,e.DEPOSIT,e.DEPOSIT_CURRENCY,e.DISABLE_MASKING ,e.UNMASKED_BY,e.INTERNAL_REMARKS,e.MINIMUM_SUPPLIER_RATING,e.MAXIMUM_SUPPLIER_RATING,e.EVENT_PUSH_DATE,e.AWARD_DATE  FROM PROC_RFQ_EVENTS  e
	 UNION 
	 SELECT e.ID,e.CONCLUDE_BY, e.IS_ERP_ENABLE, e.DELIVERY_DATE,e.CONCLUDE_DATE, e.URGENT_EVENT, e.START_MESSAGE_SENT, e.SUSPEND_REMARKS, e.CANCEL_REASON, e.PREVIOUS_EVENT, e.NEXT_EVENT, e.PREVIOUS_EVENT_TYPE, e.NEXT_EVENT_TYPE, e.CONCLUDE_REMARKS, e.IS_BILLOFQUANTITY_REQ, e.BUDGET_AMOUNT, e.CREATED_DATE, e.BUYER_SET_DECIMAL, e.IS_DOCUMENT_REQ, e.EVENT_DESCRIPTION, e.EVENT_END, e.EVENT_ID, e.EVENT_NAME, e.EVENT_PUBLISH_DATE, e.EVENT_START, e.EVENT_VISIBILITY, e.HISTORICAL_AMOUNT, e.IS_MEETINGS_REQ, e.MODIFIED_DATE, e.PARTICIPATION_FEES, e.PAYMENT_TERM, e.IS_QUESTIONNAIRES_REQ, e.REFERANCE_NUMBER, e.STATUS, e.SUBMISSION_VALIDITY_DAYS, e.TENANT_ID, e.CURRENCY_ID, e.COST_CENTER, e.BUSINESS_UNIT_ID, e.CREATED_BY, e.DELIVERY_ADDRESS, e.EVENT_OWNER, e.EVENT_CATEGORY, e.MODIFIED_BY, e.PARTICIPATION_FEE_CURRENCY, e.TEMPLATE_ID, e.IS_BQ_COMPLETED, e.IS_CQ_COMPLETED, e.IS_DOCUMENT_COMPLETED, e.IS_ENVELOP_COMPLETED, e.IS_EVENT_DETAIL_COMPLETED, e.IS_MEETINGS_COMPLETED, e.IS_SUMMARY_COMPLETED, e.IS_SUPPLIER_COMPLETED, e.ACTION_DATE, e.ACTION_BY,  e.SUSPENSION_TYPE, 'Request for Auction' as EVENT_TYPE ,e.IS_AWARDED ,e.ERP_DOC_NO ,e.VIEW_SUPPLIER_NAME,e.ALLOW_CLOSE_ENVELOPE,e.ALLOW_ADD_SUPPLIER,e.ALLOW_TO_SUSPEND_EVENT,e.PREVIOUS_REQUEST,e.DEPOSIT,e.DEPOSIT_CURRENCY,e.DISABLE_MASKING,e.UNMASKED_BY,e.INTERNAL_REMARKS,e.MINIMUM_SUPPLIER_RATING,e.MAXIMUM_SUPPLIER_RATING,e.EVENT_PUSH_DATE,e.AWARD_DATE   FROM PROC_RFA_EVENTS  e
 	     
	 
	 
	 
 	----------------------------------------------------------------------------------
	-------------------------------PH-533-----------------------------------------
	---------------------------------------------------------------------------------
 	
	ALTER TABLE PROC_RFX_TEMPLATE ADD IS_ALLOW_REVERT_LAST_BID NUMBER(1) DEFAULT 0
	    
    ALTER TABLE PROC_RFX_TEMPLATE ADD IS_VISIBLE_REVERT_LAST_BID NUMBER(1) DEFAULT 1
	 
	ALTER TABLE PROC_RFX_TEMPLATE ADD IS_READ_ONLY_REVERT_LAST_BID NUMBER(1) DEFAULT 0
	  
	ALTER TABLE PROC_RFA_EVENTS ADD ALLOW_REVERT_LAST_BID NUMBER(1) DEFAULT 0
	  
	ALTER TABLE PROC_RFA_EVENTS ADD REVERT_BID_BY_USER VARCHAR2(64);
	
	ALTER TABLE PROC_RFA_EVENTS ADD CONSTRAINT FK_REVERT_BID_BY_USER FOREIGN KEY (REVERT_BID_BY_USER) REFERENCES PROC_USER (ID);
	  
	ALTER TABLE PROC_RFX_TEMPLATE ADD REVERT_BID_USER VARCHAR2(64);
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD CONSTRAINT FK_REVERT_BID_USER FOREIGN KEY (REVERT_BID_USER) REFERENCES PROC_USER (ID);
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD UNMASKED_USER VARCHAR2(64);
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD CONSTRAINT FK_UNMASKED_USER FOREIGN KEY (UNMASKED_USER) REFERENCES PROC_USER (ID);
 

	UPDATE PROC_RFX_TEMPLATE SET IS_VISIBLE_VIEW_SUPPLIER_NAME = 1  WHERE IS_VISIBLE_VIEW_SUPPLIER_NAME  IS NULL 

	UPDATE PROC_RFX_TEMPLATE SET IS_VISIBLE_REVERT_LAST_BID = 1 WHERE IS_VISIBLE_REVERT_LAST_BID  IS NULL 

	
	----------------------------------------------------------------------------------
	-------------------------------PH-721-----------------------------------------
	---------------------------------------------------------------------------------
 	
	
	ALTER TABLE PROC_RFX_TEMPLATE ADD ADD_BILL_OF_QUANTITY NUMBER(1) DEFAULT 1
	 
	ALTER TABLE PROC_RFA_EVENTS ADD ADD_BILL_OF_QUANTITY NUMBER(1) DEFAULT 1

	ALTER TABLE PROC_RFP_EVENTS ADD ADD_BILL_OF_QUANTITY NUMBER(1) DEFAULT 1 
	
	ALTER TABLE PROC_RFQ_EVENTS ADD ADD_BILL_OF_QUANTITY NUMBER(1) DEFAULT 1
	  
	ALTER TABLE PROC_RFT_EVENTS ADD ADD_BILL_OF_QUANTITY NUMBER(1) DEFAULT 1

	UPDATE PROC_RFX_TEMPLATE SET ADD_BILL_OF_QUANTITY = 1 WHERE ADD_BILL_OF_QUANTITY IS NULL
	
	UPDATE PROC_RFA_EVENTS SET ADD_BILL_OF_QUANTITY = 1 WHERE ADD_BILL_OF_QUANTITY IS NULL
	
	UPDATE PROC_RFP_EVENTS SET ADD_BILL_OF_QUANTITY = 1 WHERE ADD_BILL_OF_QUANTITY IS NULL
	
	UPDATE PROC_RFQ_EVENTS SET ADD_BILL_OF_QUANTITY = 1 WHERE ADD_BILL_OF_QUANTITY IS NULL
	
	UPDATE PROC_RFT_EVENTS SET ADD_BILL_OF_QUANTITY = 1 WHERE ADD_BILL_OF_QUANTITY IS NULL
		
	----------------------------------------------------------------------------------
	-------------------------------PH-722-----------------------------------------
	---------------------------------------------------------------------------------
  
	 	ALTER TABLE PROC_RFX_TEMPLATE ADD RFX_ENVELOPE_READ_ONLY NUMBER(1) DEFAULT 0
	     ALTER TABLE PROC_RFX_TEMPLATE ADD RFX_ENVELOPE_1 VARCHAR2(128);
 	     ALTER TABLE PROC_RFX_TEMPLATE ADD RFX_ENVELOPE_2 VARCHAR2(128);
	     ALTER TABLE PROC_RFX_TEMPLATE ADD RFX_ENVELOPE_3 VARCHAR2(128);
	     ALTER TABLE PROC_RFX_TEMPLATE ADD RFX_ENVELOPE_4 VARCHAR2(128);
	     ALTER TABLE PROC_RFX_TEMPLATE ADD RFX_ENVELOPE_5 VARCHAR2(128);
	     ALTER TABLE PROC_RFX_TEMPLATE ADD RFX_ENVELOPE_6 VARCHAR2(128);
  
	 
	   
----------------------------------------------------------------------------------
--------------------------------(PH-584)-----------------------------------------
---------------------------------------------------------------------------------
 	
ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD DISQUALIFIED_ENVELOPE VARCHAR2(64);
ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD DISQUALIFIED_ENVELOPE VARCHAR2(64);
ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD DISQUALIFIED_ENVELOPE VARCHAR2(64);
ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD DISQUALIFIED_ENVELOPE VARCHAR2(64);
ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD DISQUALIFIED_ENVELOPE VARCHAR2(64);
ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD REQUALIFIED_TIME TIMESTAMP
ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD REQUALIFIED_TIME TIMESTAMP
ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD REQUALIFIED_TIME TIMESTAMP
ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD REQUALIFIED_TIME TIMESTAMP
ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD REQUALIFIED_TIME TIMESTAMP



   
 	  
	 
	 
	 ----------------------------------------------------------------------------------
	--------------------------------PH-708)-----------------------------------------
	---------------------------------------------------------------------------------
 
	 
	 
	CREATE TABLE PROC_SOURCING_FORM_REQ_TEAM (
	ID VARCHAR(64) NOT NULL,
	USER_ID varchar(255) NOT NULL,
	MEMBER_TYPE varchar(255) NOT NULL,
	RFX_TEMPLATE_ID varchar(64),
	FORM_ID VARCHAR(64),
	PRIMARY KEY(ID),
	foreign key (USER_ID) references  PROC_USER(id),
	constraint FK_SOURCING_FORM_TEAM foreign key (FORM_ID) references PROC_SOURCING_FORM_REQ(ID));
	
	
	
	---------------------------------------------------------------------------------
	--------------------------------APPROVAL DOCUMENT----------------------------------------
	---------------------------------------------------------------------------------
	
	
	CREATE TABLE PROC_ADDITIONAL_DOCUMENTS
    (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	CONTENT_TYPE VARCHAR2(160 CHAR), 
	DESCRIPTION VARCHAR2(300 CHAR), 
	FILE_DATA BLOB, 
	FILE_NAME VARCHAR2(500 CHAR), 
	FILE_SIZE NUMBER(10,0), 
	UPLOAD_DATE TIMESTAMP (6), 
	EVENT_ID VARCHAR2(64 CHAR), 
	PRIMARY KEY (ID), 
	CONSTRAINT FK_ADDITIONAL_DOCUMENT FOREIGN KEY (EVENT_ID)
	REFERENCES PROC_RFT_EVENTS (ID)); 
	
	ALTER TABLE PROC_ADDITIONAL_DOCUMENTS ADD CREATED_BY VARCHAR2(64);
	ALTER TABLE PROC_ADDITIONAL_DOCUMENTS ADD CONSTRAINT FK_ADD_DOC_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID);
	
	ALTER TABLE PROC_ADDITIONAL_DOCUMENTS ADD DOCUMENT_REFERENCE_TYPE VARCHAR2(64);
	  
	ALTER TABLE PROC_BUYER ADD ENABLE_EVENT_USER_CONTROL NUMBER DEFAULT 0;
	

 	
----------------------------------------------------------------------------------
--------------------------------PH-230------------------------------------------
---------------------------------------------------------------------------------
 	
ALTER TABLE PROC_ERP_SETUP ADD ENABLE_UOM_API NUMBER(1) DEFAULT 0;
 	
ALTER TABLE PROC_ERP_SETUP ADD ENABLE_PRODUCT_ITEM_API NUMBER(1) DEFAULT 0;
 	
ALTER TABLE PROC_ERP_SETUP ADD ENABLE_PRODUCT_CAT_API NUMBER(1) DEFAULT 0;

ALTER TABLE PROC_ERP_SETUP ADD ENABLE_ITEM_CONTRACT_API NUMBER(1) DEFAULT 0;

ALTER TABLE PROC_ERP_SETUP ADD AWARD_INTERFACE_TYPE_PULL NUMBER(1) DEFAULT 0;

ALTER TABLE PROC_ERP_SETUP ADD ENABLE_SAP_PR_RESPONSE_API NUMBER(1) DEFAULT 0;

ALTER TABLE PROC_PRODUCT_ITEM ADD PRODUCT_ITEM_TYPE VARCHAR2(32);
 	

-- This is to rename only in testtwo and dev database. Use the above queries for other environments
--ALTER TABLE PROC_ERP_SETUP RENAME COLUMN IS_PULL_INTERFACE TO AWARD_INTERFACE_TYPE_PULL;
--ALTER TABLE PROC_ERP_SETUP RENAME COLUMN IS_GENERATE_PRODUCT_CAT TO ENABLE_PRODUCT_CAT_API;
--ALTER TABLE PROC_ERP_SETUP RENAME COLUMN IS_GENERATE_PRODUCT_ITEM TO ENABLE_PRODUCT_ITEM_API;
--ALTER TABLE PROC_ERP_SETUP RENAME COLUMN IS_GENERATE_UOM TO ENABLE_UOM_API;

 	
----------------------------------------------------------------------------------
--------------------------------PH-506------------------------------------------
---------------------------------------------------------------------------------
 	
 	
ALTER TABLE PROC_PR ADD FIELD5_LABEL VARCHAR2(32)
ALTER TABLE PROC_PR ADD FIELD6_LABEL VARCHAR2(32)
ALTER TABLE PROC_PR ADD FIELD7_LABEL VARCHAR2(32)
ALTER TABLE PROC_PR ADD FIELD8_LABEL VARCHAR2(32)
ALTER TABLE PROC_PR ADD FIELD9_LABEL VARCHAR2(32)
ALTER TABLE PROC_PR ADD FIELD10_LABEL VARCHAR2(32)
	
ALTER TABLE PROC_PR_ITEM ADD FIELD5 VARCHAR2(100)
ALTER TABLE PROC_PR_ITEM ADD FIELD6 VARCHAR2(100)
ALTER TABLE PROC_PR_ITEM ADD FIELD7 VARCHAR2(100)
ALTER TABLE PROC_PR_ITEM ADD FIELD8 VARCHAR2(100)
ALTER TABLE PROC_PR_ITEM ADD FIELD9 VARCHAR2(100)
ALTER TABLE PROC_PR_ITEM ADD FIELD10 VARCHAR2(100)
ALTER TABLE PROC_PR_TEMPLATE ADD CONTRACT_ITEMS_ONLY NUMBER(1) DEFAULT 0;

ALTER TABLE PROC_ERP_SETUP ADD PR_INTEGRATION_TYPE VARCHAR2(50); 
		
	
----------------------------------------------------------------------------------
--------------------------------FGV ERP INTEGRATION---------------------------------
---------------------------------------------------------------------------------

CREATE TABLE PROC_PRODUCT_CONTRACT (
	ID VARCHAR2(64),
	CONTRACT_END_DATE DATE,
	CONTRACT_REFERENCE_NUMBER VARCHAR2(32),
	CONTRACT_START_DATE DATE,
	CONTRACT_VALUE NUMBER(19,2),
	CREATION_DATE TIMESTAMP,
	GROUP_CODE VARCHAR2(9),
	MODIFIED_TIME TIMESTAMP,
	PRODUCT_ACTIVE VARCHAR2(255),
	BUSINESS_UNIT_ID VARCHAR2(64),
	TENANT_ID VARCHAR2(64),
	CREATED_BY VARCHAR2(64),
	MODIFIED_BY VARCHAR2(64),
	FAV_SUPPLIER_ID VARCHAR2(64),
	CONSTRAINT SYS_C0047368 PRIMARY KEY (ID),
	CONSTRAINT FK_PC_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT(ID),
	CONSTRAINT FK_PROD_CONTRACT_BUY_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_PROD_CONTRACT_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_PROD_CONTRACT_MOD_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_PROD_CON_FAV_SUP_ID FOREIGN KEY (FAV_SUPPLIER_ID) REFERENCES PROC_FAVOURITE_SUPPLIER(FAV_SUPPLIER_ID)
);


CREATE TABLE PROC_PRODUCT_CONTRACT_ITEM (
	ID VARCHAR2(64),
	BALANCE_QUANTITY NUMBER(19,2),
	CONTRACT_ITEM_NUMBER VARCHAR2(32),
	QUANTITY NUMBER(19,2),
	UNIT_PRICE NUMBER(19,2),
	BUSINESS_UNIT_ID VARCHAR2(64),
	PRODUCT_CATEGORY_ID VARCHAR2(64),
	CONTRACT_ID VARCHAR2(64),
	PRODUCT_ITEM_ID VARCHAR2(64),
	UOM_ID VARCHAR2(64),
	STORAGE_LOCATION VARCHAR2(32),
	COST_CENTER_ID VARCHAR2(64),
	CONSTRAINT SYS_C0047373 PRIMARY KEY (ID),
	CONSTRAINT FK_CON_ITM_CON_ID FOREIGN KEY (PRODUCT_ITEM_ID) REFERENCES PROC_PRODUCT_ITEM(ID),
	CONSTRAINT FK_CONT_ITM_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES PROC_PRODUCT_CONTRACT(ID),
	CONSTRAINT FK_CON_ITM_BUS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT(ID),
	CONSTRAINT FK_CON_ITM_ITEM_CAT_ID FOREIGN KEY (PRODUCT_CATEGORY_ID) REFERENCES PROC_PRODUCT_CATEGORY(ID),
	CONSTRAINT FK_CON_ITM_UOM_ID FOREIGN KEY (UOM_ID) REFERENCES PROC_BUYER_UOM(ID),
	CONSTRAINT FK_CON_ITM_COST_CENTR_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER(ID)
);


-- not needed in production and demo as its already inclided in the create table script above
-- ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD STORAGE_LOCATION VARCHAR2(32);


ALTER TABLE PROC_BUSINESS_UNIT ADD PARENT_ID VARCHAR2(64);

ALTER TABLE PROC_BUSINESS_UNIT ADD CONSTRAINT FK_BUS_UNIT_PARENT FOREIGN KEY (PARENT_ID) REFERENCES PROC_BUSINESS_UNIT(ID);

ALTER TABLE PROC_PRODUCT_ITEM MODIFY PRODUCT_CODE VARCHAR2(20) ;

--ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM RENAME COLUMN PRODUCT_ID TO CONTRACT_ID; 
--ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM RENAME COLUMN PRODUCT_CATEGORY TO PRODUCT_CATEGORY_ID;
--ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM RENAME COLUMN BUSINESS_UNIT TO BUSINESS_UNIT_ID;
--ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM RENAME COLUMN UOM TO UOM_ID;
--ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM RENAME COLUMN PRODUCT_ITEM TO PRODUCT_ITEM_ID;



ALTER TABLE PROC_ERP_SETUP ADD ERP_USERNAME VARCHAR2(500);

ALTER TABLE PROC_ERP_SETUP ADD ERP_PASSWORD VARCHAR2(500);

ALTER TABLE PROC_ERP_SETUP ADD ENABLE_PO_CREATE_API NUMBER(1) DEFAULT 0;

ALTER TABLE PROC_ERP_SETUP ADD AWARD_INTEGRATION_TYPE VARCHAR2(50);

ALTER TABLE PROC_ERP_SETUP ADD ENABLE_RFS_ERP_PUSH NUMBER(1) DEFAULT 0;

ALTER TABLE PROC_ERP_SETUP ADD ENABLE_AWARD_ERP_PUSH NUMBER(1) DEFAULT 0;

--ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD COST_CENTER_ID VARCHAR2(64); 
--ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD CONSTRAINT FK_CON_ITM_COST_CENTR_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER(ID);

----------------------------------------------------------------------------------
--------------------------------PH-689-----------------------------------------
---------------------------------------------------------------------------------
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD UNIT_BUDGET_PRICE NUMBER(16,4)
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_1 VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_2 VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_3 VARCHAR2(100) 
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_4 VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_5 VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_6 VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_7 VARCHAR2(100)	 
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_8 VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_9 VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ ADD FIELD_10 VARCHAR2(100)

ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD1_LABEL VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD2_LABEL VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD3_LABEL VARCHAR2(100) 
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD4_LABEL VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD5_LABEL VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD6_LABEL VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD7_LABEL VARCHAR2(100)	 
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD8_LABEL VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD9_LABEL VARCHAR2(100)
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD FIELD10_LABEL VARCHAR2(100)

ALTER TABLE PROC_SOURCING_FORM_REQ ADD ERP_DOC_NO VARCHAR2(64);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD ERP_STATUS VARCHAR2(64);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD ERP_MESSAGE VARCHAR2(3000);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD IS_ERP_TRANSFER NUMBER(1) DEFAULT 0;

----------------------------------------------------------------------------------
-------------------------------add group code-----------------------------------------
---------------------------------------------------------------------------------
   
ALTER TABLE PROC_SOURCING_FORM_REQ ADD GROUP_CODE VARCHAR2(20);


ALTER TABLE PROC_PR_ITEM ADD CONTRACT_PRODUCT_ID VARCHAR2(64);
ALTER TABLE PROC_PR_ITEM ADD CONSTRAINT FK_PR_CONTRACT_PROD_ID FOREIGN KEY (CONTRACT_PRODUCT_ID) REFERENCES PROC_PRODUCT_CONTRACT_ITEM(ID);

---------------------------------------------------------------------------------
-------------------------------PH-639------------------------------------------
--------------------------------------------------------------------------------

ALTER TABLE PROC_RFX_TEMPLATE ADD READ_ONLY_TEAM_MEMBER NUMBER(1) DEFAULT 0;
 	
---------------------------------------------------------------------------------
-------------------------------PH-458------------------------------------------
--------------------------------------------------------------------------------
 	
ALTER TABLE PROC_BUYER ADD ENABLE_SMS NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_BUYER ADD ENABLE_FAX NUMBER(1) DEFAULT 0;
 

ALTER TABLE PROC_ERP_SETUP ADD SMS_FROM VARCHAR2(150);
ALTER TABLE PROC_ERP_SETUP ADD SMS_PASSWORD VARCHAR2(150);
ALTER TABLE PROC_ERP_SETUP ADD SMS_USER_NAME VARCHAR2(150);
ALTER TABLE PROC_ERP_SETUP ADD SMS_URL VARCHAR2(150);

ALTER TABLE PROC_ERP_SETUP ADD FAX_PORT VARCHAR2(150);
ALTER TABLE PROC_ERP_SETUP ADD FAX_HOST VARCHAR2(150);
ALTER TABLE PROC_ERP_SETUP ADD FAX_DOMAIN VARCHAR2(150);
ALTER TABLE PROC_ERP_SETUP ADD FAX_USERNAME VARCHAR2(150);
ALTER TABLE PROC_ERP_SETUP ADD FAX_PASSWPRD VARCHAR2(150);
ALTER TABLE PROC_ERP_SETUP ADD FAX_FORM VARCHAR2(150);

ALTER TABLE PROC_BUYER_ANNOUNCEMENT ADD IS_FAX_SENT NUMBER(1) DEFAULT 1;
ALTER TABLE PROC_BUYER_ANNOUNCEMENT ADD IS_SMS_SENT NUMBER(1) DEFAULT 1;
ALTER TABLE PROC_BUYER_ANNOUNCEMENT ADD IS_EMAIL_SENT NUMBER(1) DEFAULT 1;

 	
 	
 	
 	
 	
 					

					
----------------------------------------------------------------------------------
----- Password setting enhansment ------------------------------------------------
----------------------------------------------------------------------------------



CREATE TABLE PROC_PASSWORD_SETTINGS 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"CONTAIN_NON_ALPHANUMERIC" NUMBER(1,0), 
	"CONTAIN_LOWER_CASE_LETTERS" NUMBER(1,0), 
	"CONTAIN_NUMBERS" NUMBER(1,0), 
	"CONTAIN_UPPER_CASE_LETTERS" NUMBER(1,0), 
	"CREATED_DATE" TIMESTAMP (6), 
	"ENABLE_EXPIRATION" NUMBER(1,0), 
	"ENABLE_FAILED_ATTEMPTS" NUMBER(1,0), 
	"ENABLE_REUSE_PASSWORD" NUMBER(1,0), 
	"FAILED_ATTEMPTS" NUMBER(10,0), 
	"MODIFIED_DATE" TIMESTAMP (6), 
	"NUMBER_OF_PASSWORD_REMEMBER" NUMBER(10,0), 
	"PASSWORD_EXPIRY_IN_DAYS" NUMBER(10,0), 
	"PASSWORD_LENGHT" NUMBER(10,0), 
	"TENANT_ID" VARCHAR2(64 CHAR), 
	"MODIFIED_BY" VARCHAR2(64 CHAR), 
	 PRIMARY KEY ("ID"),
	 CONSTRAINT "PROC_USER" FOREIGN KEY ("MODIFIED_BY")
	  REFERENCES "PROC_USER" ("ID") ENABLE
   )


alter table PROC_BUYER_SETTINGS drop column IS_ORIGIN;
alter table PROC_BUYER_SETTINGS drop column IS_PUBLISHED;
alter table PROC_BUYER_SETTINGS drop column IS_APPROVED;

------------------------
----- PH-828 -----------
------------------------
ALTER TABLE PHERE.PROC_BUSINESS_UNIT ADD BUDGET_CHECK NUMBER DEFAULT 0;

   
------------------------
----- PH-508 -----------
------------------------
CREATE TABLE PROC_PO
( ID VARCHAR2(64 CHAR) NOT NULL,
ACTION_DATE TIMESTAMP (6),
ADDITIONAL_TAX NUMBER(20,4),
CANCEL_REASON VARCHAR2(1050 CHAR),
PO_CREATED_DATE TIMESTAMP (6) NOT NULL,
PO_DECIMAL VARCHAR2(64 CHAR) NOT NULL,
DELIVERY_DATE TIMESTAMP (6),
DELIVERY_RECEIVER VARCHAR2(150 CHAR) NOT NULL,
DESCRIPTION VARCHAR2(1000 CHAR),
ERP_DOC_NO VARCHAR2(64 CHAR),
ERP_MESSAGE VARCHAR2(1050 CHAR),
IS_ERP_TRANSFER NUMBER(1,0),
ERP_STATUS VARCHAR2(64 CHAR),
FIELD10_LABEL VARCHAR2(32 CHAR),
FIELD1_LABEL VARCHAR2(32 CHAR),
FIELD2_LABEL VARCHAR2(32 CHAR),
FIELD3_LABEL VARCHAR2(32 CHAR),
FIELD4_LABEL VARCHAR2(32 CHAR),
FIELD5_LABEL VARCHAR2(32 CHAR),
FIELD6_LABEL VARCHAR2(32 CHAR),
FIELD7_LABEL VARCHAR2(32 CHAR),
FIELD8_LABEL VARCHAR2(32 CHAR),
FIELD9_LABEL VARCHAR2(32 CHAR),
GRAND_TOTAL NUMBER(20,4),
IS_PO_REPORT_SENT NUMBER(1,0),
PO_MODIFIED_DATE TIMESTAMP (6),
PO_NAME VARCHAR2(128 CHAR) NOT NULL,
PAYMENT_TERM VARCHAR2(500 CHAR) NOT NULL,
PO_ID VARCHAR2(64 CHAR),
PO_NUMBER VARCHAR2(64 CHAR),
REFERENCE_NUMBER VARCHAR2(64 CHAR),
REMARKS VARCHAR2(1050 CHAR),
REQUESTER VARCHAR2(550 CHAR) NOT NULL,
STATUS VARCHAR2(255 CHAR),
SUPPLIER_ADDRESS VARCHAR2(300 CHAR),
SUPPLIER_FAX_NO VARCHAR2(16 CHAR),
SUPPLIER_NAME VARCHAR2(128 CHAR),
SUPPLIER_TAX_NO VARCHAR2(32 CHAR),
SUPPLIER_TEL_NO VARCHAR2(50 CHAR),
TAX_DESCRIPTION VARCHAR2(150 CHAR),
TERMS_AND_COND VARCHAR2(900 CHAR),
TOTAL NUMBER(20,4),
URGENT_PO NUMBER(1,0),
ACTION_BY VARCHAR2(64 CHAR),
BUSINESS_UNIT_ID VARCHAR2(64 CHAR),
BUYER_ID VARCHAR2(64 CHAR),
CORRESPONDENCE_ADDRESS_ID VARCHAR2(64 CHAR) NOT NULL,
COST_CENTER_ID VARCHAR2(64 CHAR),
CREATED_BY VARCHAR2(64 CHAR),
BASE_CURRENCY_ID VARCHAR2(64 CHAR) NOT NULL,
DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR),
MODIFIED_BY VARCHAR2(64 CHAR),
PO_SUPPLIER_ID VARCHAR2(64 CHAR) NOT NULL,
PRIMARY KEY (ID),
CONSTRAINT FK_PO_ACTION_BY_USR FOREIGN KEY (ACTION_BY)
REFERENCES PROC_USER (ID),
CONSTRAINT FK_PO_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID)
REFERENCES PROC_BUSINESS_UNIT (ID),
CONSTRAINT FK_PO_BUYER_ID FOREIGN KEY (BUYER_ID)
REFERENCES PROC_BUYER (BUYER_ID),
CONSTRAINT FK_PO_BUY_ADDR_CORES_ADDR FOREIGN KEY (CORRESPONDENCE_ADDRESS_ID)
REFERENCES PROC_BUYER_ADDRESS (ID),
CONSTRAINT FK_PO_COSTCENTER_ID FOREIGN KEY (COST_CENTER_ID)
REFERENCES PROC_COST_CENTER (ID),
CONSTRAINT FK_PO_CREATED_BY_ID FOREIGN KEY (CREATED_BY)
REFERENCES PROC_USER (ID),
CONSTRAINT FK_PO_BUYER_CURRENCY FOREIGN KEY (BASE_CURRENCY_ID)
REFERENCES PROC_CURRENCY (ID),
CONSTRAINT FK_PO_DEL_ADD_ID FOREIGN KEY (DELIVERY_ADDRESS_ID)
REFERENCES PROC_BUYER_ADDRESS (ID),
CONSTRAINT FK_PO_MODIFIED_BY_ID FOREIGN KEY (MODIFIED_BY)
REFERENCES PROC_USER (ID),
CONSTRAINT FK_PO_FAV_SUP_ID FOREIGN KEY (PO_SUPPLIER_ID)
REFERENCES PROC_FAVOURITE_SUPPLIER (FAV_SUPPLIER_ID)
)


CREATE TABLE PROC_PO_ITEM
( ID VARCHAR2(64 CHAR) NOT NULL,
DELIVERY_DATE TIMESTAMP (6),
DELIVERY_RECEIVER VARCHAR2(150 CHAR) NOT NULL,
FIELD1 VARCHAR2(100 CHAR),
FIELD10 VARCHAR2(100 CHAR),
FIELD2 VARCHAR2(100 CHAR),
FIELD3 VARCHAR2(100 CHAR),
FIELD4 VARCHAR2(100 CHAR),
FIELD5 VARCHAR2(100 CHAR),
FIELD6 VARCHAR2(100 CHAR),
FIELD7 VARCHAR2(100 CHAR),
FIELD8 VARCHAR2(100 CHAR),
FIELD9 VARCHAR2(100 CHAR),
FREE_ITEM_TEXT_ENTERED NUMBER(1,0),
ITEM_DESCRIPTION VARCHAR2(1050 CHAR),
ITEM_NAME VARCHAR2(250 CHAR) NOT NULL,
ITEM_TAX VARCHAR2(20 CHAR),
ITEM_LEVEL NUMBER(10,0) NOT NULL,
SUB_ORDER NUMBER(10,0) NOT NULL,
ITEM_QUANTITY NUMBER(18,2),
TAX_AMOUNT NUMBER(20,4),
TOTAL_AMOUNT NUMBER(24,8),
TOTAL_AMT_WITH_TAX NUMBER(20,4),
UNIT_PRICE NUMBER(20,4),
BUSINESS_UNIT_ID VARCHAR2(64 CHAR),
TENANT_ID VARCHAR2(64 CHAR) NOT NULL,
COST_CENTER_ID VARCHAR2(64 CHAR),
DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR),
PARENT_ID VARCHAR2(64 CHAR),
PO_ID VARCHAR2(64 CHAR) NOT NULL,
PRODUCT_ID VARCHAR2(64 CHAR),
PRODUCT_CATEGORY_ID VARCHAR2(64 CHAR),
CONTRACT_PRODUCT_ID VARCHAR2(64 CHAR),
UOM_ID VARCHAR2(64 CHAR),
PRIMARY KEY (ID),
CONSTRAINT FK_PO_ITM_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID)
REFERENCES PROC_BUSINESS_UNIT (ID),
CONSTRAINT FK_PO_ITEM_TENANT_ID FOREIGN KEY (TENANT_ID)
REFERENCES PROC_BUYER (BUYER_ID),
CONSTRAINT FK_PO_ITM_COSTCEN_ID FOREIGN KEY (COST_CENTER_ID)
REFERENCES PROC_COST_CENTER (ID),
CONSTRAINT FK_PO_ITEM_PARENT_ID FOREIGN KEY (PARENT_ID)
REFERENCES PROC_PO_ITEM (ID),
CONSTRAINT FK_PO_ITEM_PO_ID FOREIGN KEY (PO_ID)
REFERENCES PROC_PO (ID),
CONSTRAINT FK_PO_ITM_PROD_ID FOREIGN KEY (PRODUCT_ID)
REFERENCES PROC_PRODUCT_ITEM (ID),
CONSTRAINT FK_PO_ITEM_CAT_ID FOREIGN KEY (PRODUCT_CATEGORY_ID)
REFERENCES PROC_PRODUCT_CATEGORY (ID),
CONSTRAINT FK_PO_ITM_CONT_PROD_ID FOREIGN KEY (CONTRACT_PRODUCT_ID)
REFERENCES PROC_PRODUCT_CONTRACT_ITEM (ID),
CONSTRAINT FK_PO_UOM_ID FOREIGN KEY (UOM_ID)
REFERENCES PROC_BUYER_UOM (ID)
)

------------------------
----- PH-866 -----------
------------------------


ALTER TABLE PROC_SOURCING_FORM_BQ_ITEM_REQ MODIFY UNIT_QUANTITY NUMBER(21,4);


----------------------------------------------------------------------------------
--------------------------------PH-783------------------------------------------
---------------------------------------------------------------------------------
ALTER TABLE PROC_RFX_TEMPLATE add RFX_SEQUENCE_1 NUMBER(10,0)   ;
ALTER TABLE PROC_RFX_TEMPLATE add RFX_SEQUENCE_2 NUMBER(10,0)   ;
ALTER TABLE PROC_RFX_TEMPLATE add RFX_SEQUENCE_3 NUMBER(10,0)   ;
ALTER TABLE PROC_RFX_TEMPLATE add RFX_SEQUENCE_4 NUMBER(10,0)   ;
ALTER TABLE PROC_RFX_TEMPLATE add RFX_SEQUENCE_5 NUMBER(10,0)   ;
ALTER TABLE PROC_RFX_TEMPLATE add RFX_SEQUENCE_6 NUMBER(10,0)   ;

ALTER TABLE PROC_RFI_ENVELOP add ENVELOP_SEQUENCE NUMBER(10,0) ;
ALTER TABLE PROC_RFA_ENVELOP add ENVELOP_SEQUENCE NUMBER(10,0) ;
ALTER TABLE PROC_RFP_ENVELOP add ENVELOP_SEQUENCE NUMBER(10,0) ;
ALTER TABLE PROC_RFQ_ENVELOP add ENVELOP_SEQUENCE NUMBER(10,0) ;
ALTER TABLE PROC_RFT_ENVELOP add ENVELOP_SEQUENCE NUMBER(10,0) ;

ALTER TABLE PROC_RFX_TEMPLATE ADD RFX_ENVELOPE_OPENING NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFX_TEMPLATE ADD RFX_ENV_OPENING_AFTER VARCHAR(128);
     
ALTER TABLE PROC_RFI_EVENTS ADD RFX_ENVELOPE_READ_ONLY NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFI_EVENTS ADD RFX_ENVELOPE_OPENING NUMBER(1,0) DEFAULT 0;
ALTER TABLE PROC_RFI_EVENTS ADD RFX_ENV_OPENING_AFTER VARCHAR(128); 

ALTER TABLE PROC_RFT_EVENTS ADD RFX_ENVELOPE_READ_ONLY NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFT_EVENTS ADD RFX_ENVELOPE_OPENING NUMBER(1,0) DEFAULT 0;
ALTER TABLE PROC_RFT_EVENTS ADD RFX_ENV_OPENING_AFTER VARCHAR(128);


ALTER TABLE PROC_RFQ_EVENTS ADD RFX_ENVELOPE_READ_ONLY NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFQ_EVENTS ADD RFX_ENVELOPE_OPENING NUMBER(1,0) DEFAULT 0;
ALTER TABLE PROC_RFQ_EVENTS ADD RFX_ENV_OPENING_AFTER VARCHAR(128);


ALTER TABLE PROC_RFP_EVENTS ADD RFX_ENVELOPE_READ_ONLY NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFP_EVENTS ADD RFX_ENVELOPE_OPENING NUMBER(1,0) DEFAULT 0;
ALTER TABLE PROC_RFP_EVENTS ADD RFX_ENV_OPENING_AFTER VARCHAR(128);


ALTER TABLE PROC_RFA_EVENTS ADD RFX_ENVELOPE_READ_ONLY NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFA_EVENTS ADD RFX_ENVELOPE_OPENING NUMBER(1,0) DEFAULT 0;
ALTER TABLE PROC_RFA_EVENTS ADD RFX_ENV_OPENING_AFTER VARCHAR(128);

---------------------------------------------------------------------------------



	
 	----------------------------------------------------------------------------------
	--------------------------------PH-773------------------------------------------
	---------------------------------------------------------------------------------
 	
 	CREATE TABLE PROC_TEMPLATE_UNMASK_USER (
	ID VARCHAR2(64),
	RFX_TEMPLATE_ID VARCHAR2(64),
	USER_ID VARCHAR2(64),
	USER_UNMASKED NUMBER(1,0) DEFAULT 0,
	USER_UNMASKED_TIME TIMESTAMP,
	CONSTRAINT SYS_C0048347 PRIMARY KEY (ID),
	CONSTRAINT FK_TEM_UNMASK_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_TMPL_UNMASK_USER_ID FOREIGN KEY (RFX_TEMPLATE_ID) REFERENCES PROC_RFX_TEMPLATE(ID)
) ;



CREATE TABLE PROC_RFI_UNMASKED_USER (
	ID VARCHAR2(64),
	USER_UNMASKED NUMBER(1,0),
	USER_UNMASKED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	CONSTRAINT SYS_C0048652 PRIMARY KEY (ID),
	CONSTRAINT FK_UNMSK_RFI_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFI_UNMASKED_USER FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFI_EVENTS(ID)
) ;


CREATE TABLE PROC_RFQ_UNMASKED_USER (
	ID VARCHAR2(64),
	USER_UNMASKED NUMBER(1,0),
	USER_UNMASKED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	CONSTRAINT SYS_C0048812 PRIMARY KEY (ID),
	CONSTRAINT FK_UNMSK_RFQ_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFQ_UNMASKED_USER FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID)
) ;


CREATE TABLE PROC_RFP_UNMASKED_USER (
	ID VARCHAR2(64),
	USER_UNMASKED NUMBER(1,0),
	USER_UNMASKED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	CONSTRAINT SYS_C0048809 PRIMARY KEY (ID),
	CONSTRAINT FK_UNMSK_RFP_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFP_UNMASKED_USER FOREIGN KEY (EVENT_ID) REFERENCES  PROC_RFP_EVENTS(ID)
) ;


CREATE TABLE PROC_RFT_UNMASKED_USER (
	ID VARCHAR2(64),
	USER_UNMASKED NUMBER(1,0),
	USER_UNMASKED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	CONSTRAINT SYS_C0048836 PRIMARY KEY (ID),
	CONSTRAINT FK_UNMSK_RFT_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFT_UNMASKED_USER FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID)
) ;



CREATE TABLE PROC_RFA_UNMASKED_USER (
	ID VARCHAR2(64),
	USER_UNMASKED NUMBER(1,0),
	USER_UNMASKED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),

	CONSTRAINT SYS_C0048833 PRIMARY KEY (ID),
	CONSTRAINT FK_UNMSK_RFA_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFA_UNMASKED_USER FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID)
) ;

   -------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------
----------------------PH-965 SOURCING TEAM MEMBER ---------------------------------
----------------------------------------------------------------------------------


	CREATE TABLE PROC_TEMPLATE_SOURCING_TEAM (
	ID VARCHAR(64) NOT NULL,
	USER_ID varchar(255) NOT NULL,
	MEMBER_TYPE varchar(255) NOT NULL,
	TEMPLATE_ID varchar(64),
	PRIMARY KEY(ID),
	foreign key (USER_ID) references  PROC_USER(id),
	constraint FK_SOURCING_TEAM_MEMBERS_ID foreign key (TEMPLATE_ID) references PROC_SOURCING_FORM_TEMPLATE(ID));
	
	ALTER TABLE PROC_SOURCING_FORM_TEMPLATE ADD READ_ONLY_TEAM_MEMBER NUMBER(1) DEFAULT 0;
 	
 	
 	
-----------------------------------
----- SUPPLIER SUBCRIPTION -----------
----------------------------------
ALTER TABLE PROC_PROMOTIONAL_CODE ADD BUYER_PLAN_ID VARCHAR2(150);
ALTER TABLE PROC_PROMOTIONAL_CODE ADD SUPPLIER_PLAN_ID VARCHAR2(150);
ALTER TABLE PROC_PROMOTIONAL_CODE ADD SUPPLIER_ID   VARCHAR2(150);

ALTER TABLE PROC_PROMOTIONAL_CODE ADD CONSTRAINT FK_PROMO_CODE_BUYER_PLAN_ID FOREIGN KEY (BUYER_PLAN_ID) REFERENCES PROC_BUYER_PLAN (ID);
ALTER TABLE PROC_PROMOTIONAL_CODE ADD CONSTRAINT FK_PROMO_CODE_SUPPLIER_PLAN_ID FOREIGN KEY (SUPPLIER_PLAN_ID) REFERENCES PROC_SUPPLIER_PLAN (ID);
ALTER TABLE PROC_PROMOTIONAL_CODE ADD CONSTRAINT FK_PROMO_CODE_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID);


----------------------------------------------------------------------------------
----------------------PH-881 INTERNAL DOCUMENTS ---------------------------------
----------------------------------------------------------------------------------

ALTER TABLE PROC_RFQ_EVENT_DOCUMENTS add IS_INTERNAL NUMBER(1) DEFAULT 0
ALTER TABLE PROC_RFI_EVENT_DOCUMENTS add IS_INTERNAL NUMBER(1) DEFAULT 0
ALTER TABLE PROC_RFP_EVENT_DOCUMENTS add IS_INTERNAL NUMBER(1) DEFAULT 0
ALTER TABLE PROC_RFA_DOCUMENTS add IS_INTERNAL NUMBER(1) DEFAULT 0
ALTER TABLE PROC_RFT_DOCUMENTS add IS_INTERNAL NUMBER(1) DEFAULT 0

----------------------------------------------------------------------------------
----------------------PH-1105 ---------------------------------
----------------------------------------------------------------------------------
DELETE FROM  PROC_ACCESS_RIGHTS WHERE ACL_VALUE  IN ('ROLE_REQUEST_SELF', 'ROLE_REQUEST_ALL')
DELETE  FROM  PROC_ROLE_ACL_MAPPING WHERE ACL_ID  IN ('ROLE_REQUEST_SELF', 'ROLE_REQUEST_ALL')

----------------------------------------------------------------------------------
---------------------------------  PH-1052  --------------------------------------
----------------------------------------------------------------------------------

ALTER TABLE PROC_RFS_DOCUMENTS ADD DOC_UPLOAD_BY VARCHAR2(64);
ALTER TABLE PROC_RFS_DOCUMENTS ADD CONSTRAINT FK_RFS_DOC_UPLD_BY FOREIGN KEY (DOC_UPLOAD_BY) REFERENCES PROC_USER (ID);


INSERT INTO PROC_RFS_DOCUMENTS (ID,CONTENT_TYPE,DESCRIPTION,FILE_DATA,FILE_NAME,FILE_SIZE,UPLOAD_DATE,RFS_ID,DOC_UPLOAD_BY) (
	SELECT id, CONTENT_TYPE, DESCRIPTION, FILE_DATA, FILE_NAME, FILE_SIZE, UPLOAD_DATE, RFS_ID, null FROM PROC_APPROVAL_DOCUMENTS 
)

UPDATE PROC_RFS_DOCUMENTS d SET DOC_UPLOAD_BY  = (SELECT created_by FROM PROC_SOURCING_FORM_REQ WHERE ID = d.RFS_ID ) 
WHERE DOC_UPLOAD_BY IS NULL 


----------------------------------------------------------------------------------
----------------------PH-716 DECLARATION CONFIGURATION ---------------------------------
----------------------------------------------------------------------------------

CREATE TABLE PROC_BUYER_DECLARATION
(ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
DECLARATION_TITLE VARCHAR2(128 CHAR) NOT NULL ENABLE, 
DECLARATION_CONTENT VARCHAR2(4000 CHAR) NOT NULL ENABLE, 
DECLARATION_TYPE VARCHAR2(255 CHAR) NOT NULL ENABLE,
STATUS VARCHAR2(255 CHAR),  
CREATED_BY VARCHAR2(64 CHAR) NOT NULL ENABLE, 
CREATED_DATE TIMESTAMP (6) NOT NULL ENABLE, 
MODIFIED_BY VARCHAR2(64 CHAR), 
MODIFIED_DATE TIMESTAMP (6), 
BUYER_ID VARCHAR2(64 CHAR), 
 PRIMARY KEY (ID), 
 CONSTRAINT FK_DECLARE_CREATED_BY FOREIGN KEY (CREATED_BY)
  REFERENCES PROC_USER (ID) ENABLE, 
 CONSTRAINT FK_DECLARE_BUYER_ID FOREIGN KEY (BUYER_ID)
  REFERENCES PROC_BUYER (BUYER_ID) ENABLE, 
 CONSTRAINT FK_DECLARE_MODIFIED_BY FOREIGN KEY (MODIFIED_BY)
  REFERENCES PROC_USER (ID) ENABLE
);

	  
ALTER TABLE PROC_RFX_TEMPLATE ADD IS_ENABLE_EVAL_DECLARATION NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFX_TEMPLATE ADD IS_ENABLE_SUPPLIER_DECLARATION NUMBER(1) DEFAULT 0;

ALTER TABLE PROC_RFI_EVENTS ADD EVALUATION_PROCESS_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFI_EVENTS ADD CONSTRAINT FK_RFI_EVAL_DECLARE_ID FOREIGN KEY (EVALUATION_PROCESS_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);

ALTER TABLE PROC_RFP_EVENTS ADD EVALUATION_PROCESS_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFP_EVENTS ADD CONSTRAINT FK_RFP_EVAL_DECLARE_ID FOREIGN KEY (EVALUATION_PROCESS_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);

ALTER TABLE PROC_RFQ_EVENTS ADD EVALUATION_PROCESS_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFQ_EVENTS ADD CONSTRAINT FK_RFQ_EVAL_DECLARE_ID FOREIGN KEY (EVALUATION_PROCESS_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);
	
ALTER TABLE PROC_RFT_EVENTS ADD EVALUATION_PROCESS_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFT_EVENTS ADD CONSTRAINT FK_RFT_EVAL_DECLARE_ID FOREIGN KEY (EVALUATION_PROCESS_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);

ALTER TABLE PROC_RFA_EVENTS ADD EVALUATION_PROCESS_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFA_EVENTS ADD CONSTRAINT FK_RFA_EVAL_DECLARE_ID FOREIGN KEY (EVALUATION_PROCESS_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);


ALTER TABLE PROC_RFI_EVENTS ADD SUPPLIER_ACCEPT_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFI_EVENTS ADD CONSTRAINT FK_RFI_SUPP_DECLARE_ID FOREIGN KEY (SUPPLIER_ACCEPT_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);

ALTER TABLE PROC_RFP_EVENTS ADD SUPPLIER_ACCEPT_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFP_EVENTS ADD CONSTRAINT FK_RFP_SUPP_DECLARE_ID FOREIGN KEY (SUPPLIER_ACCEPT_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);

ALTER TABLE PROC_RFQ_EVENTS ADD SUPPLIER_ACCEPT_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFQ_EVENTS ADD CONSTRAINT FK_RFQ_SUPP_DECLARE_ID FOREIGN KEY (SUPPLIER_ACCEPT_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);
	
ALTER TABLE PROC_RFT_EVENTS ADD SUPPLIER_ACCEPT_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFT_EVENTS ADD CONSTRAINT FK_RFT_SUPP_DECLARE_ID FOREIGN KEY (SUPPLIER_ACCEPT_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);

ALTER TABLE PROC_RFA_EVENTS ADD SUPPLIER_ACCEPT_DECLARATION VARCHAR2(64);
ALTER TABLE PROC_RFA_EVENTS ADD CONSTRAINT FK_RFA_SUPP_DECLARE_ID FOREIGN KEY (SUPPLIER_ACCEPT_DECLARATION) REFERENCES PROC_BUYER_DECLARATION (ID);


ALTER TABLE PROC_RFI_EVENTS ADD IS_ENABLE_EVAL_DECLARATION NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFT_EVENTS ADD IS_ENABLE_EVAL_DECLARATION NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFQ_EVENTS ADD IS_ENABLE_EVAL_DECLARATION NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFP_EVENTS ADD IS_ENABLE_EVAL_DECLARATION NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFA_EVENTS ADD IS_ENABLE_EVAL_DECLARATION NUMBER(1,0) DEFAULT 0; 

ALTER TABLE PROC_RFI_EVENTS ADD IS_ENABLE_SUPPLIER_DECLARATION NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFT_EVENTS ADD IS_ENABLE_SUPPLIER_DECLARATION NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFQ_EVENTS ADD IS_ENABLE_SUPPLIER_DECLARATION NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFP_EVENTS ADD IS_ENABLE_SUPPLIER_DECLARATION NUMBER(1,0) DEFAULT 0; 
ALTER TABLE PROC_RFA_EVENTS ADD IS_ENABLE_SUPPLIER_DECLARATION NUMBER(1,0) DEFAULT 0; 


  
 CREATE TABLE PROC_RFI_EVALUATOR_DECLARATION 
 (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
 ACCEPTED_DATE TIMESTAMP (6) NOT NULL ENABLE, 
 IS_LEAD_EVALUATOR NUMBER(1,0) DEFAULT 0,
 EVENT_ID VARCHAR2(64 CHAR)  NOT NULL,
 RFI_ENVELOPE_ID  VARCHAR2(64 CHAR)  NOT NULL ENABLE,
 USER_ID VARCHAR2(64 CHAR)  NOT NULL ENABLE, 
 PRIMARY KEY (ID), 
 CONSTRAINT FK_RFI_DECL_ENV_ID FOREIGN KEY (RFI_ENVELOPE_ID)
  REFERENCES PROC_RFI_ENVELOP (ID) ENABLE, 
 CONSTRAINT FK_EVAL_DECL_RFI_EVENT_ID FOREIGN KEY (EVENT_ID)
  REFERENCES PROC_RFI_EVENTS (ID) ENABLE, 
 CONSTRAINT FK_RFI_DECL_USER_ID FOREIGN KEY (USER_ID)
  REFERENCES PROC_USER (ID) ENABLE
  );
  
  
 CREATE TABLE PROC_RFP_EVALUATOR_DECLARATION 
 (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
 ACCEPTED_DATE TIMESTAMP (6) NOT NULL ENABLE, 
 IS_LEAD_EVALUATOR NUMBER(1,0) DEFAULT 0,
 EVENT_ID VARCHAR2(64 CHAR)  NOT NULL,
 RFP_ENVELOPE_ID  VARCHAR2(64 CHAR)  NOT NULL ENABLE,
 USER_ID VARCHAR2(64 CHAR)  NOT NULL ENABLE, 
 PRIMARY KEY (ID), 
 CONSTRAINT FK_RFP_DECL_ENV_ID FOREIGN KEY (RFP_ENVELOPE_ID)
  REFERENCES PROC_RFP_ENVELOP (ID) ENABLE, 
 CONSTRAINT FK_EVAL_DECL_RFP_EVENT_ID FOREIGN KEY (EVENT_ID)
  REFERENCES PROC_RFP_EVENTS (ID) ENABLE, 
 CONSTRAINT FK_RFP_DECL_USER_ID FOREIGN KEY (USER_ID)
  REFERENCES PROC_USER (ID) ENABLE
  );
  
   CREATE TABLE PROC_RFQ_EVALUATOR_DECLARATION 
 (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
 ACCEPTED_DATE TIMESTAMP (6) NOT NULL ENABLE, 
 IS_LEAD_EVALUATOR NUMBER(1,0) DEFAULT 0,
 EVENT_ID VARCHAR2(64 CHAR)  NOT NULL,
 RFQ_ENVELOPE_ID  VARCHAR2(64 CHAR)  NOT NULL ENABLE,
 USER_ID VARCHAR2(64 CHAR)  NOT NULL ENABLE, 
 PRIMARY KEY (ID), 
 CONSTRAINT FK_RFQ_DECL_ENV_ID FOREIGN KEY (RFQ_ENVELOPE_ID)
  REFERENCES PROC_RFQ_ENVELOP (ID) ENABLE, 
 CONSTRAINT FK_EVAL_DECL_RFQ_EVENT_ID FOREIGN KEY (EVENT_ID)
  REFERENCES PROC_RFQ_EVENTS (ID) ENABLE, 
 CONSTRAINT FK_RFQ_DECL_USER_ID FOREIGN KEY (USER_ID)
  REFERENCES PROC_USER (ID) ENABLE
  );
  
 CREATE TABLE PROC_RFT_EVALUATOR_DECLARATION 
 (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
 ACCEPTED_DATE TIMESTAMP (6) NOT NULL ENABLE, 
 IS_LEAD_EVALUATOR NUMBER(1,0) DEFAULT 0,
 EVENT_ID VARCHAR2(64 CHAR)  NOT NULL,
 RFT_ENVELOPE_ID  VARCHAR2(64 CHAR)  NOT NULL ENABLE,
 USER_ID VARCHAR2(64 CHAR)  NOT NULL ENABLE, 
 PRIMARY KEY (ID), 
 CONSTRAINT FK_RFT_DECL_ENV_ID FOREIGN KEY (RFT_ENVELOPE_ID)
  REFERENCES PROC_RFT_ENVELOP (ID) ENABLE, 
 CONSTRAINT FK_EVAL_DECL_RFT_EVENT_ID FOREIGN KEY (EVENT_ID)
  REFERENCES PROC_RFT_EVENTS (ID) ENABLE, 
 CONSTRAINT FK_RFT_DECL_USER_ID FOREIGN KEY (USER_ID)
  REFERENCES PROC_USER (ID) ENABLE
  );
  
 CREATE TABLE PROC_RFA_EVALUATOR_DECLARATION 
 (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
 ACCEPTED_DATE TIMESTAMP (6) NOT NULL ENABLE, 
 IS_LEAD_EVALUATOR NUMBER(1,0) DEFAULT 0,
 EVENT_ID VARCHAR2(64 CHAR)  NOT NULL,
 RFA_ENVELOPE_ID  VARCHAR2(64 CHAR)  NOT NULL ENABLE,
 USER_ID VARCHAR2(64 CHAR)  NOT NULL ENABLE, 
 PRIMARY KEY (ID), 
 CONSTRAINT FK_RFA_DECL_ENV_ID FOREIGN KEY (RFA_ENVELOPE_ID)
  REFERENCES PROC_RFA_ENVELOP (ID) ENABLE, 
 CONSTRAINT FK_EVAL_DECL_RFA_EVENT_ID FOREIGN KEY (EVENT_ID)
  REFERENCES PROC_RFA_EVENTS (ID) ENABLE, 
 CONSTRAINT FK_RFA_DECL_USER_ID FOREIGN KEY (USER_ID)
  REFERENCES PROC_USER (ID) ENABLE
  );
  
  
  
----------------------------------------------------------------------------------
-------------- PH-1136 - User with Password Settings Maintenance only Access Rights
----------------------------------------------------------------------------------

UPDATE PROC_ACCESS_RIGHTS SET PARENT_ID = 'ROLE_SETTINGS' WHERE ACL_VALUE = 'ROLE_PASSWORD_SETTINGS'
  
  


----------------------------------------------------------------------------------
-------- PH-999 Allow to Complete Envelope without view the Envelope -------------
----------------------------------------------------------------------------------
ALTER TABLE PROC_RFX_TEMPLATE add IS_ENABLE_EVAL_CON_USR NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFX_TEMPLATE add IS_VISIBLE_EVAL_CON_USR NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFX_TEMPLATE add READ_ONLY_EVAL_CON_USR NUMBER(1) DEFAULT 0;

CREATE TABLE PROC_TEMPLATE_EVAL_CON_USERS (
	TEMPLATE_ID VARCHAR2(64) NOT NULL,
	USER_ID varchar2(64) NOT NULL,
	constraint FK_TEMPLATE_EVAL_USR_ID foreign key (USER_ID) references  PROC_USER(ID),
	constraint FK_RFX_TEMPLATE_ID foreign key (TEMPLATE_ID) references PROC_RFX_TEMPLATE(ID)
);


ALTER TABLE PROC_RFT_EVENTS add ENABLE_EVAL_CON_PREM NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFA_EVENTS add ENABLE_EVAL_CON_PREM NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFQ_EVENTS add ENABLE_EVAL_CON_PREM NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFP_EVENTS add ENABLE_EVAL_CON_PREM NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFI_EVENTS add ENABLE_EVAL_CON_PREM NUMBER(1) DEFAULT 0;

ALTER TABLE PROC_RFT_EVENTS add EVAL_CON_PREM_DISQ_SUP_COUNT NUMBER(10);
ALTER TABLE PROC_RFA_EVENTS add EVAL_CON_PREM_DISQ_SUP_COUNT NUMBER(10);
ALTER TABLE PROC_RFQ_EVENTS add EVAL_CON_PREM_DISQ_SUP_COUNT NUMBER(10);
ALTER TABLE PROC_RFP_EVENTS add EVAL_CON_PREM_DISQ_SUP_COUNT NUMBER(10);
ALTER TABLE PROC_RFI_EVENTS add EVAL_CON_PREM_DISQ_SUP_COUNT NUMBER(10);

ALTER TABLE PROC_RFT_EVENTS add EVAL_CON_PREM_PEND_SUP_COUNT NUMBER(10);
ALTER TABLE PROC_RFA_EVENTS add EVAL_CON_PREM_PEND_SUP_COUNT NUMBER(10);
ALTER TABLE PROC_RFQ_EVENTS add EVAL_CON_PREM_PEND_SUP_COUNT NUMBER(10);
ALTER TABLE PROC_RFP_EVENTS add EVAL_CON_PREM_PEND_SUP_COUNT NUMBER(10);
ALTER TABLE PROC_RFI_EVENTS add EVAL_CON_PREM_PEND_SUP_COUNT NUMBER(10);

ALTER TABLE PROC_RFT_EVENTS add EVAL_CON_PREM_EVAL_COUNT NUMBER(10);
ALTER TABLE PROC_RFA_EVENTS add EVAL_CON_PREM_EVAL_COUNT NUMBER(10);
ALTER TABLE PROC_RFQ_EVENTS add EVAL_CON_PREM_EVAL_COUNT NUMBER(10);
ALTER TABLE PROC_RFP_EVENTS add EVAL_CON_PREM_EVAL_COUNT NUMBER(10);
ALTER TABLE PROC_RFI_EVENTS add EVAL_CON_PREM_EVAL_COUNT NUMBER(10);

ALTER TABLE PROC_RFT_EVENTS add EVAL_CON_PREM_NON_EVAL_COUNT NUMBER(10);
ALTER TABLE PROC_RFA_EVENTS add EVAL_CON_PREM_NON_EVAL_COUNT NUMBER(10);
ALTER TABLE PROC_RFQ_EVENTS add EVAL_CON_PREM_NON_EVAL_COUNT NUMBER(10);
ALTER TABLE PROC_RFP_EVENTS add EVAL_CON_PREM_NON_EVAL_COUNT NUMBER(10);
ALTER TABLE PROC_RFI_EVENTS add EVAL_CON_PREM_NON_EVAL_COUNT NUMBER(10);

ALTER TABLE PROC_RFT_ENVELOP add IS_EVAL_COMPLETE_PREMATURE NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFA_ENVELOP add IS_EVAL_COMPLETE_PREMATURE NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFQ_ENVELOP add IS_EVAL_COMPLETE_PREMATURE NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFP_ENVELOP add IS_EVAL_COMPLETE_PREMATURE NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFI_ENVELOP add IS_EVAL_COMPLETE_PREMATURE NUMBER(1) DEFAULT 0;

CREATE TABLE PROC_RFT_EVAL_CON_USERS (
	ID VARCHAR2(64),
	IS_CONCLUDED NUMBER(1) DEFAULT 0,
	CONCLUDED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	REMARKS VARCHAR2(1024),
	FILE_NAME VARCHAR2(500),
	FILE_DESC VARCHAR2(500),
	FILE_DATA BLOB,
	CONSTRAINT PK_RFT_EVAL_CON_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFT_EVAL_CON_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFT_EVAL_CON_EVENT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID)
);

CREATE TABLE PROC_RFP_EVAL_CON_USERS (
	ID VARCHAR2(64),
	IS_CONCLUDED NUMBER(1) DEFAULT 0,
	CONCLUDED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	REMARKS VARCHAR2(1024),
	FILE_NAME VARCHAR2(500),
	FILE_DESC VARCHAR2(500),
	FILE_DATA BLOB,
	CONSTRAINT PK_RFP_EVAL_CON_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFP_EVAL_CON_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFP_EVAL_CON_EVENT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFP_EVENTS(ID)
);

CREATE TABLE PROC_RFA_EVAL_CON_USERS (
	ID VARCHAR2(64),
	IS_CONCLUDED NUMBER(1) DEFAULT 0,
	CONCLUDED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	REMARKS VARCHAR2(1024),
	FILE_NAME VARCHAR2(500),
	FILE_DESC VARCHAR2(500),
	FILE_DATA BLOB,
	CONSTRAINT PK_RFA_EVAL_CON_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFA_EVAL_CON_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFA_EVAL_CON_EVENT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID)
);

CREATE TABLE PROC_RFI_EVAL_CON_USERS (
	ID VARCHAR2(64),
	IS_CONCLUDED NUMBER(1) DEFAULT 0,
	CONCLUDED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	REMARKS VARCHAR2(1024),
	FILE_NAME VARCHAR2(500),
	FILE_DESC VARCHAR2(500),
	FILE_DATA BLOB,
	CONSTRAINT PK_RFI_EVAL_CON_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFI_EVAL_CON_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFI_EVAL_CON_EVENT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFI_EVENTS(ID)
);

CREATE TABLE PROC_RFQ_EVAL_CON_USERS (
	ID VARCHAR2(64),
	IS_CONCLUDED NUMBER(1) DEFAULT 0,
	CONCLUDED_TIME TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	REMARKS VARCHAR2(1024),
	FILE_NAME VARCHAR2(500),
	FILE_DESC VARCHAR2(500),
	FILE_DATA BLOB,
	CONSTRAINT PK_RFQ_EVAL_CON_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFQ_EVAL_CON_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFQ_EVAL_CON_EVENT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID)
);


	
create index IDX_RFQ_EVT_SUP_COMP on PROC_RFQ_EVENT_SUPPLIERS ( SUPPLIER_ID, EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFT_EVT_SUP_COMP on PROC_RFT_EVENT_SUPPLIERS ( SUPPLIER_ID, EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFA_EVT_SUP_COMP on PROC_RFA_EVENT_SUPPLIERS ( SUPPLIER_ID, EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFP_EVT_SUP_COMP on PROC_RFP_EVENT_SUPPLIERS ( SUPPLIER_ID, EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFI_EVT_SUP_COMP on PROC_RFI_EVENT_SUPPLIERS ( SUPPLIER_ID, EVENT_ID ) TABLESPACE PROCV7PRD_IDX;

create index IDX_RFQ_EVT_SUP_EVT_ID on PROC_RFQ_EVENT_SUPPLIERS ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFT_EVT_SUP_EVT_ID on PROC_RFT_EVENT_SUPPLIERS ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFA_EVT_SUP_EVT_ID on PROC_RFA_EVENT_SUPPLIERS ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFP_EVT_SUP_EVT_ID on PROC_RFP_EVENT_SUPPLIERS ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFI_EVT_SUP_EVT_ID on PROC_RFI_EVENT_SUPPLIERS ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;

create index IDX_RFA_EVT_SUP_ID on PROC_RFA_EVENT_SUPPLIERS ( SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFT_EVT_SUP_ID on PROC_RFT_EVENT_SUPPLIERS ( SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFQ_EVT_SUP_ID on PROC_RFQ_EVENT_SUPPLIERS ( SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFP_EVT_SUP_ID on PROC_RFP_EVENT_SUPPLIERS ( SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFI_EVT_SUP_ID on PROC_RFI_EVENT_SUPPLIERS ( SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;


create index IDX_RFA_AUD_EVT_ID on PROC_RFA_EVENT_AUDIT ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFA_AUD_EVT_SUP_ID on PROC_RFA_EVENT_AUDIT ( EVENT_ID, SUPPLIER_ID ) TABLESPACE PROCV7PRD_IDX;

create index IDX_RFT_AUD_EVT_ID on PROC_RFT_EVENT_AUDIT ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFT_AUD_EVT_SUP_ID on PROC_RFT_EVENT_AUDIT ( EVENT_ID, SUPPLIER_ID ) TABLESPACE PROCV7PRD_IDX;

create index IDX_RFQ_AUD_EVT_ID on PROC_RFQ_EVENT_AUDIT ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFQ_AUD_EVT_SUP_ID on PROC_RFQ_EVENT_AUDIT ( EVENT_ID, SUPPLIER_ID ) TABLESPACE PROCV7PRD_IDX;

create index IDX_RFP_AUD_EVT_ID on PROC_RFP_EVENT_AUDIT ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFP_AUD_EVT_SUP_ID on PROC_RFP_EVENT_AUDIT ( EVENT_ID, SUPPLIER_ID ) TABLESPACE PROCV7PRD_IDX;

create index IDX_RFI_AUD_EVT_ID on PROC_RFI_EVENT_AUDIT ( EVENT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFI_AUD_EVT_SUP_ID on PROC_RFI_EVENT_AUDIT ( EVENT_ID, SUPPLIER_ID ) TABLESPACE PROCV7PRD_IDX;


create index IDX_SUP_NOTI_TENT_ID ON PROC_SUPPLIER_NOTIFICATION (TENANT_ID) TABLESPACE PROCV7PRD_IDX;
create index IDX_BUY_NOTI_TENT_ID ON PROC_BUYER_NOTIFICATION (TENANT_ID) TABLESPACE PROCV7PRD_IDX;
create index IDX_OWNER_NOTI_TENT_ID ON PROC_OWNER_NOTIFICATION (TENANT_ID) TABLESPACE PROCV7PRD_IDX;
create index IDX_GEN_NOTI_TENT_ID ON PROC_NOTIFICATION_MESSAGE (TENANT_ID) TABLESPACE PROCV7PRD_IDX;
create index IDX_FINC_NOTI_TENT_ID ON PROC_FINANCE_NOTIFICATION (TENANT_ID) TABLESPACE PROCV7PRD_IDX;

----------------------------------------------------------------------------------
-------------- PH-1152 
----------------------------------------------------------------------------------

ALTER TABLE PROC_BUYER_DECLARATION ADD DECLARE_CONTENT CLOB 

UPDATE PROC_BUYER_DECLARATION SET DECLARE_CONTENT=DECLARATION_CONTENT;

ALTER TABLE PROC_BUYER_DECLARATION  DROP COLUMN DECLARATION_CONTENT;

ALTER TABLE PROC_BUYER_DECLARATION RENAME COLUMN DECLARE_CONTENT to DECLARATION_CONTENT;


----------------------------------------------------------------------------------
---------------------------------  PH-1101  --------------------------------------
----------------------------------------------------------------------------------

UPDATE PROC_RFA_EVENTS SET TIMEEXTENSION_DURATION_TYPE = 'MINUTE' WHERE TIME_EXTENSION_TYPE IS NOT NULL AND TIMEEXTENSION_DURATION_TYPE IS NULL


----------------------------------------------------------------------------------
---------------------------------  PH-1043  --------------------------------------
----------------------------------------------------------------------------------

ALTER TABLE PROC_AUCTION_RULES ADD PREBID_AS_FIRSTBID NUMBER(1) DEFAULT 0;


--------------------------------------------------------------------------------------------------
------------------------- INDEX CREATED ON EVENT TABLES ------------------------------------------
--------------------------------------------------------------------------------------------------

create index IDX_RFA_TENT_STS_COMP on PROC_RFA_EVENTS (TENANT_ID, STATUS ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFT_TENT_STS_COMP on PROC_RFT_EVENTS (TENANT_ID, STATUS ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFP_TENT_STS_COMP on PROC_RFP_EVENTS (TENANT_ID, STATUS ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFQ_TENANT_ID on PROC_RFQ_EVENTS (TENANT_ID) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFQ_TENT_STS_COMP on PROC_RFQ_EVENTS (TENANT_ID, STATUS ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFI_TENANT_ID on PROC_RFI_EVENTS (TENANT_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFI_TENT_STS_COMP on PROC_RFI_EVENTS (TENANT_ID, STATUS ) TABLESPACE PROCV7PRD_IDX;
create index IDX_RFX_TEMPLATE_ID on PROC_TEMPLATE_FIELD (TEMPLATE_ID ) TABLESPACE PROCV7PRD_IDX;
create index IDX_IDSETTINGS_TENANT_ID on PROC_ID_SETTINGS (TENANT_ID ) TABLESPACE PROCV7PRD_IDX;

----------------------------------------------------------------------------------
---------------------------------  PH-1204  --------------------------------------
----------------------------------------------------------------------------------

CREATE TABLE PROC_RFA_ENV_OPEN_USERS (
	ID VARCHAR2(64),
	ENVELOP_STATUS NUMBER(1) DEFAULT 0,
	OPEN_DATE TIMESTAMP,
	CLOSE_DATE TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	ENVELOPE_ID VARCHAR2(64),
	CONSTRAINT PK_RFA_ENV_OPN_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFA_EVN_OPN_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFA_ENV_OPN_USR_EVT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID),
	CONSTRAINT FK_RFA_ENV_OPN_USR_EVLP_ID FOREIGN KEY (ENVELOPE_ID) REFERENCES PROC_RFA_ENVELOP(ID)
);

CREATE TABLE PROC_RFI_ENV_OPEN_USERS (
	ID VARCHAR2(64),
	ENVELOP_STATUS NUMBER(1) DEFAULT 0,
	OPEN_DATE TIMESTAMP,
	CLOSE_DATE TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	ENVELOPE_ID VARCHAR2(64),
	CONSTRAINT PK_RFI_ENV_OPN_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFI_EVN_OPN_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFI_ENV_OPN_USR_EVT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFI_EVENTS(ID),
	CONSTRAINT FK_RFI_ENV_OPN_USR_EVLP_ID FOREIGN KEY (ENVELOPE_ID) REFERENCES PROC_RFI_ENVELOP(ID)
);

CREATE TABLE PROC_RFP_ENV_OPEN_USERS (
	ID VARCHAR2(64),
	ENVELOP_STATUS NUMBER(1) DEFAULT 0,
	OPEN_DATE TIMESTAMP,
	CLOSE_DATE TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	ENVELOPE_ID VARCHAR2(64),
	CONSTRAINT PK_RFP_ENV_OPN_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFP_EVN_OPN_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFP_ENV_OPN_USR_EVT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFP_EVENTS(ID),
	CONSTRAINT FK_RFP_ENV_OPN_USR_EVLP_ID FOREIGN KEY (ENVELOPE_ID) REFERENCES PROC_RFP_ENVELOP(ID)
);

CREATE TABLE PROC_RFQ_ENV_OPEN_USERS (
	ID VARCHAR2(64),
	ENVELOP_STATUS NUMBER(1) DEFAULT 0,
	OPEN_DATE TIMESTAMP,
	CLOSE_DATE TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	ENVELOPE_ID VARCHAR2(64),
	CONSTRAINT PK_RFQ_ENV_OPN_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFQ_EVN_OPN_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFQ_ENV_OPN_USR_EVT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID),
	CONSTRAINT FK_RFQ_ENV_OPN_USR_EVLP_ID FOREIGN KEY (ENVELOPE_ID) REFERENCES PROC_RFQ_ENVELOP(ID)
);

CREATE TABLE PROC_RFT_ENV_OPEN_USERS (
	ID VARCHAR2(64),
	ENVELOP_STATUS NUMBER(1) DEFAULT 0,
	OPEN_DATE TIMESTAMP,
	CLOSE_DATE TIMESTAMP,
	USER_ID VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	ENVELOPE_ID VARCHAR2(64),
	CONSTRAINT PK_RFT_ENV_OPN_USR PRIMARY KEY (ID),
	CONSTRAINT FK_RFT_EVN_OPN_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_RFT_ENV_OPN_USR_EVT_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID),
	CONSTRAINT FK_RFT_ENV_OPN_USR_EVLP_ID FOREIGN KEY (ENVELOPE_ID) REFERENCES PROC_RFT_ENVELOP(ID)
);


INSERT INTO PROC_RFA_ENV_OPEN_USERS 
(ID, ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, USER_ID, EVENT_ID, ENVELOPE_ID)
SELECT ID,ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, ENVELOP_OPENER, EVENT_ID, ID 
FROM PROC_RFA_ENVELOP
WHERE ENVELOP_OPENER IS NOT NULL AND ENVELOP_TYPE = 'Closed'

INSERT INTO PROC_RFI_ENV_OPEN_USERS 
(ID, ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, USER_ID, EVENT_ID, ENVELOPE_ID)
SELECT ID,ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, ENVELOP_OPENER, EVENT_ID, ID 
FROM PROC_RFI_ENVELOP
WHERE ENVELOP_OPENER IS NOT NULL AND ENVELOP_TYPE = 'Closed'

INSERT INTO PROC_RFP_ENV_OPEN_USERS 
(ID, ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, USER_ID, EVENT_ID, ENVELOPE_ID)
SELECT ID,ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, ENVELOP_OPENER, EVENT_ID, ID 
FROM PROC_RFP_ENVELOP
WHERE ENVELOP_OPENER IS NOT NULL AND ENVELOP_TYPE = 'Closed'

INSERT INTO PROC_RFQ_ENV_OPEN_USERS 
(ID, ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, USER_ID, EVENT_ID, ENVELOPE_ID)
SELECT ID,ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, ENVELOP_OPENER, EVENT_ID, ID 
FROM PROC_RFQ_ENVELOP
WHERE ENVELOP_OPENER IS NOT NULL AND ENVELOP_TYPE = 'Closed'

INSERT INTO PROC_RFT_ENV_OPEN_USERS 
(ID, ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, USER_ID, EVENT_ID, ENVELOPE_ID)
SELECT ID,ENVELOP_STATUS, OPEN_DATE, CLOSE_DATE, ENVELOP_OPENER, EVENT_ID, ID 
FROM PROC_RFT_ENVELOP
WHERE ENVELOP_OPENER IS NOT NULL AND ENVELOP_TYPE = 'Closed'



----------------------------------------------------------------------------------
---------------------------------  PH-1098  --------------------------------------
----------------------------------------------------------------------------------

ALTER TABLE PROC_SUPPLIER ADD (TAX_REGISTRATION_NO VARCHAR2(64), PAID_UP_CAPITAL VARCHAR2(32));

ALTER TABLE PROC_SUPPLIER ADD CURRENCY_CODE VARCHAR(64);

ALTER TABLE PROC_SUPPLIER ADD CONSTRAINT FK_SUP_REG_CURRENCY FOREIGN KEY (CURRENCY_CODE) REFERENCES PROC_CURRENCY (ID);

ALTER TABLE PROC_SUPPLIER_COMPANY_PROFILE ADD UPLOAD_DATE DATE;

CREATE TABLE BOARD_OF_DIRS (
  ID VARCHAR2(64 CHAR) NOT NULL,
  SUPPLIER_ID VARCHAR2(64 CHAR) NOT NULL,
  DIR_NAME VARCHAR2(64) NOT NULL,
  IDENTIFICATION_TYPE VARCHAR2(64) NOT NULL,
  IDENTIFICATION_NUMBER VARCHAR2(32) NOT NULL,
  DIRECTOR_TYPE VARCHAR2(32) NOT NULL,
  DIRECTOR_EMAIL VARCHAR2(64),
  DIRECTOR_CONTACT VARCHAR2(24),
  CREATED_BY VARCHAR2(64 CHAR),
  CREATED_DATE DATE,
  MODIFIED_BY VARCHAR2(64 CHAR),
  MODIFIED_DATE DATE,
  PRIMARY KEY (ID),
  CONSTRAINT FK_SBD_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID),
  CONSTRAINT FK_SBD_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
  CONSTRAINT FK_SBD_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID));

  CREATE TABLE FINANICAL_DOCUMENTS (
  ID VARCHAR2(64 CHAR) NOT NULL,
  FILE_DATA BLOB NOT NULL,
  SUPPLIER_ID VARCHAR2(64 CHAR) NOT NULL,
  FILE_NAME VARCHAR2(500) NOT NULL,
  FIN_DOC_CONTENT_TYPE VARCHAR2(160) NOT NULL,
  UPLOAD_DATE DATE,
  FILE_DESC VARCHAR2(500),
  UPLOADED_BY VARCHAR2(64 CHAR),
  PRIMARY KEY (ID),
  CONSTRAINT FK_SFD_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID),
  CONSTRAINT FK_SFD_UPLOADED_BY FOREIGN KEY (UPLOADED_BY) REFERENCES PROC_USER(ID));

 ALTER TABLE PROC_SOURCING_FORM_REQ ADD BASE_CURRENCY VARCHAR(64);
 ALTER TABLE PROC_SOURCING_FORM_REQ ADD CONSTRAINT FK_RFS_BASE_CURRENCY_ID FOREIGN KEY (BASE_CURRENCY) REFERENCES PROC_CURRENCY (ID)
 
 
 
----------------------------------------------------------------------------------
---------------------- PH-1179- BUYER POOL ---------------------------------------
----------------------------------------------------------------------------------
ALTER TABLE PROC_BUYER ADD IS_PUBLISHED_PROFILE NUMBER DEFAULT 0;
ALTER TABLE PROC_BUYER ADD PUB_PROF_COMMUNICATION_EMAIL VARCHAR2(128);
ALTER TABLE PROC_BUYER ADD PUB_PROF_CONTACT_NUMBER VARCHAR2(20);
ALTER TABLE PROC_BUYER ADD PUB_PROF_CONTACT_PERSON VARCHAR2(128);
ALTER TABLE PROC_BUYER ADD PUB_PROF_WEBSITE VARCHAR2(64);
ALTER TABLE PROC_BUYER ADD PUB_PROF_INFO_TO_SUPPLIERS VARCHAR2(500);
ALTER TABLE PROC_BUYER ADD PUB_PROF_IS_ALLOW_CATEGORIES NUMBER DEFAULT 0;
ALTER TABLE PROC_BUYER ADD PUB_PROF_MINIMUM_CATEGORIES NUMBER(3);
ALTER TABLE PROC_BUYER ADD PUB_PROF_MAXIMUM_CATEGORIES NUMBER(3);


CREATE TABLE PROC_REQUEST_ASSOCIATED_BUYER (
ID VARCHAR2(64 CHAR) NOT NULL ENABLE,
BUYER_ID VARCHAR2(64 CHAR) NOT NULL ENABLE,
SUPPLIER_ID VARCHAR2(64 CHAR) NOT NULL ENABLE,
REQUESTED_STATUS  VARCHAR2(255 CHAR) NOT NULL ENABLE,
REQUESTED_DATE TIMESTAMP(6) NOT NULL ENABLE,
REJECTED_DATE TIMESTAMP(6),
ASSOCITED_DATE TIMESTAMP(6),
REQUESTED_BY VARCHAR2(64 CHAR),
SUPPLIER_REMARK VARCHAR2(500 CHAR),
BUYER_REMARK VARCHAR2(500 CHAR),
PRIMARY KEY (ID),
CONSTRAINT FK_SUPP_REQ_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER(BUYER_ID),
CONSTRAINT FK_SUPP_REQ_SUPPL_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID),
CONSTRAINT FK_SUPP_REQUESTED_BY FOREIGN KEY (REQUESTED_BY) REFERENCES PROC_USER(ID)
);

CREATE TABLE PROC_REQUESTED_SUPP_IND_CAT (
REQ_ASS_SUPP_ID VARCHAR2(64 CHAR) NOT NULL ENABLE,
IND_CAT_ID VARCHAR2(64 CHAR) NOT NULL ENABLE
);

ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD ASSOCIATED_DATE TIMESTAMP(6) 

 	---------------------------------------------------------------------------------
	--------------------------------PH-644 Budget Approval Comment-------------------
	---------------------------------------------------------------------------------
	https://id.atlassian.com/manage-profile/profile-and-visibility
-- PHERE.PROC_BUDGET definition

CREATE TABLE "PROC_BUDGET" 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"APPROVED_AMOUNT" NUMBER(22,6), 
	"BUDGET_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"ALLOW_BUDGET_LOCK" NUMBER(1,0), 
	"BUDGET_NAME" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"ALLOW_BUDGET_OVER_RUN" NUMBER(1,0), 
	"ALLOW_OVER_RUN_NOTIFICATION" NUMBER(1,0), 
	"BUDGET_STATUS" VARCHAR2(255 CHAR), 
	"CANCEL_REASON" VARCHAR2(550 CHAR), 
	"CONVERSION_RATE" NUMBER(22,6), 
	"CREATED_DATE" TIMESTAMP (6) NOT NULL ENABLE, 
	"AMOUNT_LOCKED" NUMBER(22,6), 
	"MODIFIED_DATE" TIMESTAMP (6), 
	"PAID_AMOUNT" NUMBER(22,6), 
	"PENDING_AMOUNT" NUMBER(22,6), 
	"REFERANCE_NUMBER" VARCHAR2(64 CHAR), 
	"REMAINING_AMOUNT" NUMBER(22,6), 
	"REVISION_AMOUNT" NUMBER(22,6), 
	"REVISION_JUSTIFICATION" VARCHAR2(255 CHAR), 
	"TENANT_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"TOTAL_AMOUNT" NUMBER(22,6), 
	"TRANSFER_AMOUNT" NUMBER(22,6), 
	"VALID_FROM" TIMESTAMP (6), 
	"VALID_TO" TIMESTAMP (6), 
	"CURRENCY_ID" VARCHAR2(64 CHAR), 
	"BUDGET_OWNER" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"BUSINESS_UNIT_ID" VARCHAR2(64 CHAR), 
	"COST_CENTER_ID" VARCHAR2(64 CHAR), 
	"CREATED_BY_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"MODIFIED_BY_ID" VARCHAR2(64 CHAR), 
	"TO_BUSINESS_UNIT_ID" VARCHAR2(64 CHAR), 
	"TO_COST_CENTER_ID" VARCHAR2(64 CHAR), 
	"REVISION_DATE" TIMESTAMP (6), 
	 PRIMARY KEY ("ID")

	 CONSTRAINT "FK_BUDGET_CURR_ID" FOREIGN KEY ("CURRENCY_ID")
	  REFERENCES "PROC_CURRENCY" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUDGET_OWN_USER_ID" FOREIGN KEY ("BUDGET_OWNER")
	  REFERENCES "PROC_USER" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUDGET_BU_ID" FOREIGN KEY ("BUSINESS_UNIT_ID")
	  REFERENCES "PROC_BUSINESS_UNIT" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUDGET_CS_ID" FOREIGN KEY ("COST_CENTER_ID")
	  REFERENCES "PROC_COST_CENTER" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUDGET_CREATED_BY" FOREIGN KEY ("CREATED_BY_ID")
	  REFERENCES "PROC_USER" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUDGET_MODIFIED_BY" FOREIGN KEY ("MODIFIED_BY_ID")
	  REFERENCES "PROC_USER" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUDGET_TO_BU_ID" FOREIGN KEY ("TO_BUSINESS_UNIT_ID")
	  REFERENCES "PROC_BUSINESS_UNIT" ("ID") ENABLE, 
	 CONSTRAINT "FK_BUDGET_TO_CS_ID" FOREIGN KEY ("TO_COST_CENTER_ID")
	  REFERENCES "PROC_COST_CENTER" ("ID") ENABLE
   )  

   
   -- PHERE.PROC_BUDGET_APPROVAL definition

CREATE TABLE "PROC_BUDGET_APPROVAL" 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"ACTIVE" NUMBER(1,0), 
	"APPROVAL_TYPE" VARCHAR2(255 CHAR), 
	"IS_DONE" NUMBER(1,0) NOT NULL ENABLE, 
	"APPROVAL_LEVEL" NUMBER(10,0) NOT NULL ENABLE, 
	"BATCH_NO" NUMBER(10,0), 
	"BUDGET_ID" VARCHAR2(64 CHAR), 
	 PRIMARY KEY ("ID"),
	 CONSTRAINT FK_BUDGET_APPR_BGT_ID FOREIGN KEY (BUDGET_ID) REFERENCES PROC_BUDGET(ID)
  );
   
  -- PHERE.PROC_BUDGET_APPROVAL_USER definition

CREATE TABLE "PROC_BUDGET_APPROVAL_USER" 
   (	"ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"ACTION_DATE" TIMESTAMP (6), 
	"APPROVAL_STATUS" VARCHAR2(255 CHAR), 
	"APPROVAL_REMARKS" VARCHAR2(500 CHAR), 
	"USER_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"BUDGET_APPROVAL_ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	 PRIMARY KEY ("ID"),
	 CONSTRAINT "FK_APPROVAL_USER_BUDGET_ID" FOREIGN KEY ("BUDGET_APPROVAL_ID")
	  REFERENCES "PROC_BUDGET_APPROVAL" ("ID") ENABLE
   )  
  
   	CREATE TABLE PROC_BUDGET_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	APPROVAL_USER_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	CREATED_BY VARCHAR2(64),
	BUDGET_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FKAJW24DL00J4DE48PAQ1K4QN22 FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_BUDGET_COMMENT_ID FOREIGN KEY (BUDGET_ID) REFERENCES PROC_BUDGET(ID)
);

-- PHERE.PROC_BUDGET_DOCUMENT definition

CREATE TABLE "PROC_BUDGET_DOCUMENT" 
   ("ID" VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	"CONTENT_TYPE" VARCHAR2(160 CHAR), 
	"DESCRIPTION" VARCHAR2(300 CHAR), 
	"FILE_DATA" BLOB, 
	"FILE_NAME" VARCHAR2(500 CHAR), 
	"FILE_SIZE" NUMBER(10,0), 
	"UPLOAD_DATE" TIMESTAMP (6), 
	"BUDGET_DOCUMENT" VARCHAR2(64 CHAR), 
	 PRIMARY KEY ("ID")
    ) ;
 

ALTER TABLE PROC_BUDGET ADD CONVERSION_RATE NUMBER(20,6);
ALTER TABLE PROC_PR ADD CONVERSION_RATE NUMBER(20,6);
ALTER TABLE PROC_TRANSACTION_LOG ADD CONVERSION_RATE NUMBER(20,6);


ALTER TABLE PROC_PR ADD LOCK_BUDGET NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_PR_TEMPLATE ADD LOCK_BUDGET NUMBER(1) DEFAULT 0;

 	
INSERT INTO PROC_ACCESS_RIGHTS
(ACL_VALUE, ACL_NAME, ACL_ORDER, FOR_BUYER, FOR_FINANCE_COMPANY, MENU_URL, FOR_OWNER, FOR_SUPPLIER, PARENT_ID)
VALUES('ROLE_BUDGET_PLANNER', 'Budget Planner', 28, 1, 0, NULL, 0, 0, NULL);
INSERT INTO PROC_ACCESS_RIGHTS
(ACL_VALUE, ACL_NAME, ACL_ORDER, FOR_BUYER, FOR_FINANCE_COMPANY, MENU_URL, FOR_OWNER, FOR_SUPPLIER, PARENT_ID)
VALUES('ROLE_BUDGET_PLANNER_EDIT', 'Create & Edit', 1, 1, 0, NULL, 0, 0, 'ROLE_BUDGET_PLANNER');
INSERT INTO PROC_ACCESS_RIGHTS
(ACL_VALUE, ACL_NAME, ACL_ORDER, FOR_BUYER, FOR_FINANCE_COMPANY, MENU_URL, FOR_OWNER, FOR_SUPPLIER, PARENT_ID)
VALUES('ROLE_BUDGET_PLANNER_VIEW_ONLY', 'View Only', 2, 1, 0, NULL, 0, 0, 'ROLE_BUDGET_PLANNER');


CREATE TABLE PROC_TRANSACTION_LOG (
	ID VARCHAR2(64)  NOT NULL ENABLE,
	TENANT_ID VARCHAR2(64) NOT NULL ENABLE,
	REFERANCE_NUMBER VARCHAR2(64),
	BUDGET_ID VARCHAR2(64) ,
	TRANSACTION_LOG_STATUS VARCHAR2(255) ,
	BUSINESS_UNIT_TO_ID VARCHAR2(64),
	BUSINESS_UNIT_ID VARCHAR2(64),
	COST_CENTER VARCHAR2(64),
	TRANSACTION_TIMESTAMP  TIMESTAMP (6),
	LOCKED_AMOUNT VARCHAR2(64),
	NEW_AMOUNT  NUMBER(22,6),
	ADD_AMOUNT  NUMBER(22,6),
	DEDUCT_AMOUNT  NUMBER(22,6),
	TRANSFER_AMOUNT  NUMBER(22,6),
	PO_AMOUNT  NUMBER(22,6)
	CONVERSION_RATE  NUMBER(22,6),
	AFTER_CONVERSION_AMOUNT  NUMBER(22,6),
	REMAINING_AMOUNT  NUMBER(22,6),
	PR_CURRENCY VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_BUDGET_ID FOREIGN KEY (BUDGET_ID)
	REFERENCES PROC_BUDGET (ID) ENABLE,
	CONSTRAINT FK_TL_BUDGET_TO_BU_ID FOREIGN KEY (BUSINESS_UNIT_TO_ID)
	REFERENCES PROC_BUSINESS_UNIT (ID) ENABLE, 
	CONSTRAINT FK_TL_BUDGET_FROM_BU_ID FOREIGN KEY (BUSINESS_UNIT_ID)
	REFERENCES PROC_BUSINESS_UNIT (ID) ENABLE, 
	CONSTRAINT FK_TL_COST_CENTER_ID FOREIGN KEY (COST_CENTER)
	REFERENCES PROC_COST_CENTER (ID) ENABLE
 );

 
 ----------------------------------------------------------------------------------
---------------------------------  PH-1225 --------------------------------------------
----------------------------------------------------------------------------------
DROP TABLE PROC_PO_CONTACTS

ALTER TABLE PROC_PO ADD PR_ID VARCHAR2(64 CHAR);
ALTER TABLE PROC_PO ADD CONSTRAINT FK_PO_PR_ID FOREIGN KEY (PR_ID) REFERENCES PROC_PR (ID);

CREATE TABLE PROC_PO_AUDIT 
   (ID VARCHAR2(64 CHAR) NOT NULL , 
	ACTION_TYPE VARCHAR2(255 CHAR) NOT NULL ENABLE, 
	ACTION_DATE TIMESTAMP (6) NOT NULL ENABLE, 
	THE_DESCRIPTION VARCHAR2(3000 CHAR), 
	ACTION_BY VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	PO_ID VARCHAR2(64 CHAR), 
	VISIBILITY_TYPE VARCHAR(255 CHAR),
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_PO_AUDIT_ACTION_BY FOREIGN KEY (ACTION_BY)
	  REFERENCES PROC_USER (ID) ENABLE, 
	 CONSTRAINT FK_PO_AUDIT_BUYER_ID FOREIGN KEY (BUYER_ID)
	  REFERENCES PROC_BUYER (BUYER_ID) ENABLE, 
	 CONSTRAINT FK_PO_AUDIT_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID)
	  REFERENCES PROC_SUPPLIER (SUPPLIER_ID) ENABLE,
	 CONSTRAINT FK_PO_AUDIT FOREIGN KEY (PO_ID)
	  REFERENCES PROC_PO (ID) ENABLE
	);
  


 

CREATE TABLE PROC_INVOICE
( ID VARCHAR2(64 CHAR) NOT NULL,
	 INVOICE_ID VARCHAR2(64 CHAR) NOT NULL,
	 INVOICE_NAME VARCHAR2(128 CHAR),	
	 REFERENCE_NUMBER VARCHAR2(64 CHAR),
	 DESCRIPTION VARCHAR2(1050 CHAR),
	 PO_ID VARCHAR2(64 CHAR), 
	 BUYER_ID VARCHAR2(64 CHAR),
	 REQUESTER VARCHAR2(550 CHAR),
	 CORRESPONDENCE_ADDRESS_ID VARCHAR2(64 CHAR),
	 BASE_CURRENCY_ID VARCHAR2(64 CHAR),
	 INVOICE_DECIMAL VARCHAR2(64 CHAR),
	 COST_CENTER_ID VARCHAR2(64 CHAR),
	 BUSINESS_UNIT_ID VARCHAR2(64 CHAR),
	 PAYMENT_TERM VARCHAR2(1000 CHAR),
	 SUPPLIER_ID VARCHAR2(64 CHAR),
	 SUPPLIER_NAME VARCHAR2(128 CHAR),
	 SUPPLIER_ADDRESS VARCHAR2(300 CHAR),
	 SUPPLIER_TEL_NO VARCHAR2(55 CHAR),
	 SUPPLIER_FAX_NO VARCHAR2(16 CHAR),
	 SUPPLIER_TAX_NO VARCHAR2(32 CHAR),
	 DELIVERY_DATE TIMESTAMP (6),
	 DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR),
	 DELIVERY_RECEIVER VARCHAR2(150 CHAR),
	 REMARKS VARCHAR2(1050 CHAR),
	 TERMS_AND_COND VARCHAR2(1000 CHAR),
	 FIELD1_LABEL VARCHAR2(32 CHAR),
	 FIELD2_LABEL VARCHAR2(32 CHAR),
	 FIELD3_LABEL VARCHAR2(32 CHAR),
	 FIELD4_LABEL VARCHAR2(32 CHAR),
	 FIELD5_LABEL VARCHAR2(32 CHAR),
	 FIELD6_LABEL VARCHAR2(32 CHAR),
	 FIELD7_LABEL VARCHAR2(32 CHAR),
	 FIELD8_LABEL VARCHAR2(32 CHAR),
	 FIELD9_LABEL VARCHAR2(32 CHAR),
	 FIELD10_LABEL VARCHAR2(32 CHAR),
	 STATUS VARCHAR2(10 CHAR),
 	 TOTAL NUMBER(20,4),
	 TAX_DESCRIPTION VARCHAR2(150 CHAR),  
	 ADDITIONAL_TAX NUMBER(20,4),
	 GRAND_TOTAL NUMBER(20,4),
	 CREATED_DATE TIMESTAMP(6),
	 CREATED_BY VARCHAR2(64 CHAR),  
	 MODIFIED_DATE TIMESTAMP(6),
	 MODIFIED_BY VARCHAR2(64 CHAR),
	 INVOICE_FOOTER   VARCHAR2(3999 CHAR),
	 CORRESPOND_ADDRESS_TITLE VARCHAR2(128 CHAR),
	 CORRESPOND_ADDRESS_LINE1 VARCHAR2(250 CHAR),
	 CORRESPOND_ADDRESS_LINE2 VARCHAR2(250 CHAR),
	 CORRESPOND_ADDRESS_CITY VARCHAR2(250 CHAR),
	 CORRESPOND_ADDRESS_STATE VARCHAR2(150 CHAR),
	 CORRESPOND_ADDRESS_ZIP VARCHAR2(32 CHAR),
	 CORRESPOND_ADDRESS_COUNTRY VARCHAR2(128 CHAR),
	 DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR),
	 DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_STATE VARCHAR2(250 CHAR),
 	 DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR),
	 DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR),
	  PRIMARY KEY (ID),
	 	CONSTRAINT FK_INVOICE_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID),
		CONSTRAINT FK_INVOICE_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER (BUYER_ID),
		CONSTRAINT FK_INVOICE_CADD_ID_ADDR FOREIGN KEY (CORRESPONDENCE_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID),
		CONSTRAINT FK_INVOICE_BUYER_CURRENCY FOREIGN KEY (BASE_CURRENCY_ID) REFERENCES PROC_CURRENCY (ID),
		CONSTRAINT FK_INVOICE_COSTCENTER_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER (ID),
		CONSTRAINT FK_INVOICE_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID),
		CONSTRAINT FK_INVOICE_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID),
		CONSTRAINT FK_INVOICE_DEL_ADD_ID FOREIGN KEY (DELIVERY_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID),
		CONSTRAINT FK_INVOICE_CREATED_BY_ID FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID),
		CONSTRAINT FK_INVOICE_MODIFIED_BY_ID FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID)
);



CREATE TABLE PROC_INVOICE_ITEM
( ID VARCHAR2(64 CHAR) NOT NULL,
	ITEM_NAME VARCHAR2(250 CHAR) NOT NULL,
	ITEM_LEVEL NUMBER(10,0) NOT NULL,
	SUB_ORDER NUMBER(10,0) NOT NULL,
	ITEM_QUANTITY NUMBER(18,2),
	UNIT_PRICE NUMBER(20,4),
	ITEM_DESCRIPTION VARCHAR2(1050 CHAR),
	INVOICE_ID VARCHAR2(64 CHAR) NOT NULL,
	PARENT_ID VARCHAR2(64 CHAR),
	DELIVERY_DATE TIMESTAMP (6),
	DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR),
	ITEM_TAX VARCHAR2(20 CHAR),
	TOTAL_AMOUNT NUMBER(20,4),
	TAX_AMOUNT NUMBER(20,4),
	TOTAL_AMT_WITH_TAX NUMBER(20,4),
	TENANT_ID VARCHAR2(64 CHAR) NOT NULL,
	UOM_ID VARCHAR2(64 CHAR),
	COST_CENTER_ID VARCHAR2(64 CHAR),
	BUSINESS_UNIT_ID VARCHAR2(64 CHAR),
	FIELD1 VARCHAR2(100 CHAR),
	FIELD2 VARCHAR2(100 CHAR),
	FIELD3 VARCHAR2(100 CHAR),
	FIELD4 VARCHAR2(100 CHAR),
	FIELD5 VARCHAR2(100 CHAR),
	FIELD6 VARCHAR2(100 CHAR),
	FIELD7 VARCHAR2(100 CHAR),
	FIELD8 VARCHAR2(100 CHAR),
	FIELD9 VARCHAR2(100 CHAR),
	FIELD10 VARCHAR2(100 CHAR),
	FREE_ITEM_TEXT_ENTERED NUMBER(1,0),
 	 DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR),
	 DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_STATE VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR),
	 DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR),
	 PO_ID VARCHAR2(64 CHAR),
	 PO_ITEM_ID VARCHAR2(64 CHAR),
	 
	PRIMARY KEY (ID),
	CONSTRAINT FK_INVOICE_ITEM_INV_ID FOREIGN KEY (INVOICE_ID) REFERENCES PROC_INVOICE (ID),
	CONSTRAINT FK_INVOICE_ITEM_PARENT_ID FOREIGN KEY (PARENT_ID) REFERENCES PROC_INVOICE_ITEM (ID),
	CONSTRAINT FK_INV_ITEM_DEL_ADD_ID FOREIGN KEY (DELIVERY_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID),
	CONSTRAINT FK_INV_ITEM_TENANT_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER (BUYER_ID),
	CONSTRAINT FK_INV_ITM_UOM_ID FOREIGN KEY (UOM_ID) REFERENCES PROC_BUYER_UOM (ID),
	CONSTRAINT FK_INV_ITM_COSTCEN_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER (ID),
	CONSTRAINT FK_INV_ITM_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID),
	CONSTRAINT FK_INVOICE_ITEM_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID),
	CONSTRAINT FK_INVOICE_ITEM_PO_ITEM_ID FOREIGN KEY (PO_ITEM_ID) REFERENCES PROC_PO (ID)
);   

CREATE TABLE PROC_INVOICE_AUDIT 
   (ID VARCHAR2(64 CHAR) NOT NULL , 
	ACTION_TYPE VARCHAR2(255 CHAR) NOT NULL ENABLE, 
	ACTION_DATE TIMESTAMP (6) NOT NULL ENABLE, 
	THE_DESCRIPTION VARCHAR2(3000 CHAR), 
	ACTION_BY VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	INVOICE_ID VARCHAR2(64 CHAR), 
	VISIBILITY_TYPE VARCHAR(255 CHAR),
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_INV_AUDIT_ACTION_BY FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_INV_AUDIT_BUYER_ID FOREIGN KEY (BUYER_ID)  REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_INV_AUDIT_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID),
	 CONSTRAINT FK_INV_AUDIT_ID FOREIGN KEY (INVOICE_ID) REFERENCES PROC_INVOICE (ID)
	);
  


ALTER TABLE PROC_PO_ITEM ADD ITEM_CODE VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO_ITEM ADD INVOICE_GENERATED NUMBER(1,0);
ALTER TABLE PROC_PO_ITEM ADD INVOICE_DATE_TIME TIMESTAMP (6);

ALTER TABLE PROC_PO_ITEM ADD INVOICE_ID VARCHAR2(64 CHAR);
ALTER TABLE PROC_PO_ITEM ADD CONSTRAINT FK_PO_ITEM_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES PROC_INVOICE (ID);

ALTER TABLE PROC_PO_ITEM ADD INVOICE_ITEM_ID VARCHAR2(64 CHAR);
ALTER TABLE PROC_PO_ITEM ADD CONSTRAINT FK_PO_ITM_INV_ITEM_ID FOREIGN KEY (INVOICE_ITEM_ID) REFERENCES PROC_INVOICE_ITEM (ID);

ALTER TABLE PROC_FINANCE_PO ADD FIN_PO_ID VARCHAR2(64);
ALTER TABLE PROC_FINANCE_PO ADD CONSTRAINT FK_FIN_PO_ID FOREIGN KEY (FIN_PO_ID) REFERENCES PROC_PO (ID);

ALTER TABLE PROC_PO ADD  SUPPLIER_REMARK VARCHAR2(500 CHAR);
ALTER TABLE PROC_PO ADD PO_ORDERED_DATE  TIMESTAMP (6);

ALTER TABLE PROC_PO ADD ORDERED_BY VARCHAR2(64 CHAR);
ALTER TABLE PROC_PO ADD CONSTRAINT FK_PO_ORDERED_BY_ID FOREIGN KEY (ORDERED_BY) REFERENCES PROC_USER (ID);

ALTER TABLE PROC_BUYER_SETTINGS ADD AUTO_CREATE_PO  NUMBER(1,0) DEFAULT 1
ALTER TABLE PROC_BUYER_SETTINGS ADD AUTO_PUBLISH_PO  NUMBER(1,0) DEFAULT 0

ALTER TABLE PROC_PO ADD CORRESPOND_ADDRESS_TITLE VARCHAR2(128 CHAR);
ALTER TABLE PROC_PO ADD CORRESPOND_ADDRESS_LINE1 VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO ADD CORRESPOND_ADDRESS_LINE2 VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO ADD CORRESPOND_ADDRESS_CITY VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO ADD CORRESPOND_ADDRESS_STATE VARCHAR2(150 CHAR);
ALTER TABLE PROC_PO ADD CORRESPOND_ADDRESS_ZIP VARCHAR2(32 CHAR);
ALTER TABLE PROC_PO ADD CORRESPOND_ADDRESS_COUNTRY VARCHAR2(128 CHAR);
ALTER TABLE PROC_PO ADD DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR);
ALTER TABLE PROC_PO ADD DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO ADD DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO ADD DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO ADD DELIVERY_ADDRESS_STATE VARCHAR2(150 CHAR);
ALTER TABLE PROC_PO ADD DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR);
ALTER TABLE PROC_PO ADD DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR);

ALTER TABLE PROC_FINANCE_PO DROP COLUMN PO_ID

ALTER TABLE PROC_PR_ITEM MODIFY ITEM_QUANTITY NUMBER(22,6);
ALTER TABLE PROC_PR_ITEM MODIFY UNIT_PRICE NUMBER(22,6);

ALTER TABLE PROC_PO_ITEM MODIFY ITEM_QUANTITY NUMBER(22,6);
ALTER TABLE PROC_PO_ITEM MODIFY UNIT_PRICE NUMBER(22,6);



CREATE TABLE PROC_DO
( ID VARCHAR2(64 CHAR) NOT NULL,
	 DO_ID VARCHAR2(64 CHAR) NOT NULL,
	 DO_NAME VARCHAR2(128 CHAR),	
	 REFERENCE_NUMBER VARCHAR2(64 CHAR),
	 DESCRIPTION VARCHAR2(1050 CHAR),
	 PO_ID VARCHAR2(64 CHAR), 
	 BUYER_ID VARCHAR2(64 CHAR),
	 REQUESTER VARCHAR2(550 CHAR),
	 CORRESPONDENCE_ADDRESS_ID VARCHAR2(64 CHAR),
	 BASE_CURRENCY_ID VARCHAR2(64 CHAR),
	 INVOICE_DECIMAL VARCHAR2(64 CHAR),
	 COST_CENTER_ID VARCHAR2(64 CHAR),
	 BUSINESS_UNIT_ID VARCHAR2(64 CHAR),
	 PAYMENT_TERM VARCHAR2(1000 CHAR),
	 SUPPLIER_ID VARCHAR2(64 CHAR),
	 SUPPLIER_NAME VARCHAR2(128 CHAR),
	 SUPPLIER_ADDRESS VARCHAR2(300 CHAR),
	 SUPPLIER_TEL_NO VARCHAR2(55 CHAR),
	 SUPPLIER_FAX_NO VARCHAR2(16 CHAR),
	 SUPPLIER_TAX_NO VARCHAR2(32 CHAR),
	 DELIVERY_DATE TIMESTAMP (6),
	 DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR),
	 DELIVERY_RECEIVER VARCHAR2(150 CHAR),
	 REMARKS VARCHAR2(1050 CHAR),
	 TERMS_AND_COND VARCHAR2(1000 CHAR),
	 FIELD1_LABEL VARCHAR2(32 CHAR),
	 FIELD2_LABEL VARCHAR2(32 CHAR),
	 FIELD3_LABEL VARCHAR2(32 CHAR),
	 FIELD4_LABEL VARCHAR2(32 CHAR),
	 FIELD5_LABEL VARCHAR2(32 CHAR),
	 FIELD6_LABEL VARCHAR2(32 CHAR),
	 FIELD7_LABEL VARCHAR2(32 CHAR),
	 FIELD8_LABEL VARCHAR2(32 CHAR),
	 FIELD9_LABEL VARCHAR2(32 CHAR),
	 FIELD10_LABEL VARCHAR2(32 CHAR),
	 STATUS VARCHAR2(10 CHAR),
	 TOTAL NUMBER(20,4),
	 TAX_DESCRIPTION VARCHAR2(150 CHAR),  
	 ADDITIONAL_TAX NUMBER(20,4),
	 GRAND_TOTAL NUMBER(20,4),
	 CREATED_DATE TIMESTAMP(6),
	 CREATED_BY VARCHAR2(64 CHAR),  
	 MODIFIED_DATE TIMESTAMP(6),
	 MODIFIED_BY VARCHAR2(64 CHAR),
	 DO_FOOTER   VARCHAR2(3999 CHAR),
	 CORRESPOND_ADDRESS_TITLE VARCHAR2(128 CHAR),
	 CORRESPOND_ADDRESS_LINE1 VARCHAR2(250 CHAR),
	 CORRESPOND_ADDRESS_LINE2 VARCHAR2(250 CHAR),
	 CORRESPOND_ADDRESS_CITY VARCHAR2(250 CHAR),
	 CORRESPOND_ADDRESS_STATE VARCHAR2(150 CHAR),
	 CORRESPOND_ADDRESS_ZIP VARCHAR2(32 CHAR),
	 CORRESPOND_ADDRESS_COUNTRY VARCHAR2(128 CHAR),
	 DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR),
	 DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_STATE VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR),
	 DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR),
	 
	  PRIMARY KEY (ID),
	 	CONSTRAINT FK_DO_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID),
		CONSTRAINT FK_DO_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER (BUYER_ID),
		CONSTRAINT FK_DO_CADD_ID FOREIGN KEY (CORRESPONDENCE_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID),
		CONSTRAINT FK_DO_BUYER_CURRENCY FOREIGN KEY (BASE_CURRENCY_ID) REFERENCES PROC_CURRENCY (ID),
		CONSTRAINT DO_FK_COSTCENTER_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER (ID),
		CONSTRAINT FK_DO_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID),
		CONSTRAINT FK_DO_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID),
		CONSTRAINT FK_DO_DEL_ADD_ID FOREIGN KEY (DELIVERY_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID),
		CONSTRAINT FK_DO_CREATED_BY_ID FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID),
		CONSTRAINT FK_DO_MODIFIED_BY_ID FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID)
);

CREATE TABLE PROC_DO_ITEM
( ID VARCHAR2(64 CHAR) NOT NULL,
	ITEM_NAME VARCHAR2(250 CHAR) NOT NULL,
	ITEM_LEVEL NUMBER(10,0) NOT NULL,
	SUB_ORDER NUMBER(10,0) NOT NULL,
	ITEM_QUANTITY NUMBER(18,2),
	UNIT_PRICE NUMBER(20,4),
	ITEM_DESCRIPTION VARCHAR2(1050 CHAR),
	DO_ID VARCHAR2(64 CHAR) NOT NULL,
	PARENT_ID VARCHAR2(64 CHAR),
	DELIVERY_DATE TIMESTAMP (6),
	DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR),
	ITEM_TAX VARCHAR2(20 CHAR),
	TOTAL_AMOUNT NUMBER(20,4),
	TAX_AMOUNT NUMBER(20,4),
	TOTAL_AMT_WITH_TAX NUMBER(20,4),
	TENANT_ID VARCHAR2(64 CHAR) NOT NULL,
	UOM_ID VARCHAR2(64 CHAR),
 	COST_CENTER_ID VARCHAR2(64 CHAR),
	BUSINESS_UNIT_ID VARCHAR2(64 CHAR),
	FIELD1 VARCHAR2(100 CHAR),
	FIELD2 VARCHAR2(100 CHAR),
	FIELD3 VARCHAR2(100 CHAR),
	FIELD4 VARCHAR2(100 CHAR),
	FIELD5 VARCHAR2(100 CHAR),
	FIELD6 VARCHAR2(100 CHAR),
	FIELD7 VARCHAR2(100 CHAR),
	FIELD8 VARCHAR2(100 CHAR),
	FIELD9 VARCHAR2(100 CHAR),
	FIELD10 VARCHAR2(100 CHAR),
	FREE_ITEM_TEXT_ENTERED NUMBER(1,0),
 	 DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR),
	 DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_STATE VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR),
	 DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR),
	 PO_ID VARCHAR2(64 CHAR),
	 PO_ITEM_ID VARCHAR2(64 CHAR),
	 
	PRIMARY KEY (ID),
	CONSTRAINT FK_DO_ITEM_PARENT_ID FOREIGN KEY (PARENT_ID) REFERENCES PROC_DO_ITEM (ID),
	CONSTRAINT FK_DO_ITEM_DEL_ADD_ID FOREIGN KEY (DELIVERY_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID),
	CONSTRAINT FK_DO_ITEM_TENANT_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER (BUYER_ID),
	CONSTRAINT FK_DO_ITM_UOM_ID FOREIGN KEY (UOM_ID) REFERENCES PROC_BUYER_UOM (ID),
	CONSTRAINT FK_DO_ITM_COSTCEN_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER (ID),
	CONSTRAINT FK_DO_ITM_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID),
	CONSTRAINT FK_DO_ITEM_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID),
	CONSTRAINT FK_DO_ITEM_PO_ITEM_ID FOREIGN KEY (PO_ITEM_ID) REFERENCES PROC_PO (ID)
);   

CREATE TABLE PROC_DO_AUDIT 
   (ID VARCHAR2(64 CHAR) NOT NULL , 
	ACTION_TYPE VARCHAR2(255 CHAR) NOT NULL ENABLE, 
	ACTION_DATE TIMESTAMP (6) NOT NULL ENABLE, 
	THE_DESCRIPTION VARCHAR2(3000 CHAR), 
	ACTION_BY VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	DO_ID VARCHAR2(64 CHAR), 
	VISIBILITY_TYPE VARCHAR(255 CHAR),
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_DO_AUDIT_ACTION_BY FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_DO_AUDIT_BUYER_ID FOREIGN KEY (BUYER_ID)  REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_DO_AUDIT_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID),
	 CONSTRAINT FK_DO_AUDIT_ID FOREIGN KEY (DO_ID) REFERENCES PROC_DO (ID)
	);
  
ALTER TABLE PROC_PO_ITEM ADD DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR);
ALTER TABLE PROC_PO_ITEM ADD DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO_ITEM ADD DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO_ITEM ADD DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR);
ALTER TABLE PROC_PO_ITEM ADD DELIVERY_ADDRESS_STATE VARCHAR2(150 CHAR);
ALTER TABLE PROC_PO_ITEM ADD DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR);
ALTER TABLE PROC_PO_ITEM ADD DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR);

ALTER TABLE PROC_SOURCING_FORM_REQ ADD 	SUBMITTED_DATE  TIMESTAMP (6);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD  APPROVED_DATE  TIMESTAMP (6);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD  APPROVAL_DAYS_HOURS NUMBER(8,2);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD  APPROVAL_TOTAL_LEVELS NUMBER(3,0);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD  APPROVAL_TOTAL_USERS NUMBER(3,0);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD 	FIRST_APPROVED_DATE  TIMESTAMP (6);

-----------------------------------------------------------------------------------------
----------------------------------  PH-1458 ---------------------------------------------
-----------------------------------------------------------------------------------------
ALTER TABLE PROC_SUPPLIER ADD (OLD_POSTAL_CODE VARCHAR2(15));
update PROC_SUPPLIER set OLD_POSTAL_CODE = POSTAL_CODE;
ALTER TABLE PROC_SUPPLIER DROP COLUMN POSTAL_CODE;
ALTER TABLE PROC_SUPPLIER RENAME COLUMN OLD_POSTAL_CODE TO POSTAL_CODE;

---------------------------------------------------------------------------------
---------------------------------  PH-1426 ---------------------------------------
----------------------------------------------------------------------------------

ALTER TABLE PROC_PR MODIFY TOTAL NUMBER(22,6);
ALTER TABLE PROC_PR MODIFY GRAND_TOTAL NUMBER(22,6);
ALTER TABLE PROC_PR MODIFY ADDITIONAL_TAX NUMBER(22,6);

ALTER TABLE PROC_PR_ITEM MODIFY ITEM_QUANTITY NUMBER(22,6);
ALTER TABLE PROC_PR_ITEM MODIFY UNIT_PRICE NUMBER(22,6);
ALTER TABLE PROC_PR_ITEM MODIFY TOTAL_AMOUNT NUMBER(22,6);
ALTER TABLE PROC_PR_ITEM MODIFY TAX_AMOUNT NUMBER(22,6);
ALTER TABLE PROC_PR_ITEM MODIFY TOTAL_AMT_WITH_TAX NUMBER(22,6);

ALTER TABLE PROC_PO MODIFY TOTAL NUMBER(22,6);
ALTER TABLE PROC_PO MODIFY GRAND_TOTAL NUMBER(22,6);
ALTER TABLE PROC_PO MODIFY ADDITIONAL_TAX NUMBER(22,6);

ALTER TABLE PROC_PO_ITEM MODIFY ITEM_QUANTITY NUMBER(22,6);
ALTER TABLE PROC_PO_ITEM MODIFY UNIT_PRICE NUMBER(22,6);
ALTER TABLE PROC_PO_ITEM MODIFY TOTAL_AMOUNT NUMBER(22,6);
ALTER TABLE PROC_PO_ITEM MODIFY TAX_AMOUNT NUMBER(22,6);
ALTER TABLE PROC_PO_ITEM MODIFY TOTAL_AMT_WITH_TAX NUMBER(22,6);

ALTER TABLE PROC_PO ADD LINE1 VARCHAR2(64);
ALTER TABLE PROC_PO ADD LINE2 VARCHAR2(64);
ALTER TABLE PROC_PO ADD LINE3 VARCHAR2(64);
ALTER TABLE PROC_PO ADD LINE4 VARCHAR2(64);
ALTER TABLE PROC_PO ADD LINE5 VARCHAR2(64);
ALTER TABLE PROC_PO ADD LINE6 VARCHAR2(64);
ALTER TABLE PROC_PO ADD LINE7 VARCHAR2(64);

UPDATE PROC_PO p SET  p.LINE1 = (SELECT b.LINE1 FROM PROC_BUSINESS_UNIT b WHERE b.ID = p.BUSINESS_UNIT_ID);
UPDATE PROC_PO p SET  p.LINE2 = (SELECT b.LINE2 FROM PROC_BUSINESS_UNIT b WHERE b.ID = p.BUSINESS_UNIT_ID);
UPDATE PROC_PO p SET  p.LINE3 = (SELECT b.LINE3 FROM PROC_BUSINESS_UNIT b WHERE b.ID = p.BUSINESS_UNIT_ID);
UPDATE PROC_PO p SET  p.LINE4 = (SELECT b.LINE4 FROM PROC_BUSINESS_UNIT b WHERE b.ID = p.BUSINESS_UNIT_ID);
UPDATE PROC_PO p SET  p.LINE5 = (SELECT b.LINE5 FROM PROC_BUSINESS_UNIT b WHERE b.ID = p.BUSINESS_UNIT_ID);
UPDATE PROC_PO p SET  p.LINE6 = (SELECT b.LINE6 FROM PROC_BUSINESS_UNIT b WHERE b.ID = p.BUSINESS_UNIT_ID);
UPDATE PROC_PO p SET  p.LINE7 = (SELECT b.LINE7 FROM PROC_BUSINESS_UNIT b WHERE b.ID = p.BUSINESS_UNIT_ID);



ALTER TABLE PROC_PO ADD  DO_COUNT NUMBER(3,0);  
ALTER TABLE PROC_PO ADD  DO_CANCEL_COUNT NUMBER(3,0);  
ALTER TABLE PROC_PO ADD  INVOICE_COUNT NUMBER(3,0);  
ALTER TABLE PROC_PO ADD  INVOICE_CANCEL_COUNT NUMBER(3,0);  

ALTER TABLE PROC_SUPPLIER_SETTINGS ADD FILE_DATA BLOB;
ALTER TABLE PROC_SUPPLIER_SETTINGS ADD FILE_NAME VARCHAR2(200);
ALTER TABLE PROC_SUPPLIER_SETTINGS ADD CONTENT_TYPE VARCHAR2(160); 
ALTER TABLE PROC_SUPPLIER_SETTINGS ADD FILE_SIZE_KB NUMBER(10);


-- PROC_FOOTER definition

CREATE TABLE PROC_FOOTER 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	FOOTER_TITLE VARCHAR2(128 CHAR) NOT NULL , 
	FOOTER_CONTENT VARCHAR2(4000 CHAR) NOT NULL , 
	FOOTER_TYPE VARCHAR2(255 CHAR) NOT NULL , 
	STATUS VARCHAR2(255 CHAR), 
	CREATED_BY VARCHAR2(64 CHAR) NOT NULL , 
	CREATED_DATE TIMESTAMP (6) NOT NULL , 
	MODIFIED_BY VARCHAR2(64 CHAR), 
	MODIFIED_DATE TIMESTAMP (6), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_FOOTER_CREATED_BY FOREIGN KEY (CREATED_BY)  REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_FOOTER_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID) , 
	 CONSTRAINT FK_FOOTER_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID) 
   );


CREATE TABLE PROC_DO 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	ADDITIONAL_TAX NUMBER(22,6), 
	CORRESPOND_ADDRESS_CITY VARCHAR2(250 CHAR), 
	CORRESPOND_ADDRESS_COUNTRY VARCHAR2(128 CHAR), 
	CORRESPOND_ADDRESS_LINE1 VARCHAR2(250 CHAR), 
	CORRESPOND_ADDRESS_LINE2 VARCHAR2(250 CHAR), 
	CORRESPOND_ADDRESS_STATE VARCHAR2(150 CHAR), 
	CORRESPOND_ADDRESS_TITLE VARCHAR2(128 CHAR), 
	CORRESPOND_ADDRESS_ZIP VARCHAR2(32 CHAR), 
	CREATED_DATE TIMESTAMP (6) NOT NULL , 
	INVOICE_DECIMAL VARCHAR2(64 CHAR) NOT NULL , 
	DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR), 
	DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_STATE VARCHAR2(150 CHAR), 
	DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR), 
	DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR), 
	DELIVERY_DATE TIMESTAMP (6), 
	DO_ID VARCHAR2(64 CHAR), 
	DELIVERY_RECEIVER VARCHAR2(150 CHAR), 
	DESCRIPTION VARCHAR2(1000 CHAR), 
	DO_FOOTER CLOB, 
	FIELD10_LABEL VARCHAR2(32 CHAR), 
	FIELD1_LABEL VARCHAR2(32 CHAR), 
	FIELD2_LABEL VARCHAR2(32 CHAR), 
	FIELD3_LABEL VARCHAR2(32 CHAR), 
	FIELD4_LABEL VARCHAR2(32 CHAR), 
	FIELD5_LABEL VARCHAR2(32 CHAR), 
	FIELD6_LABEL VARCHAR2(32 CHAR), 
	FIELD7_LABEL VARCHAR2(32 CHAR), 
	FIELD8_LABEL VARCHAR2(32 CHAR), 
	FIELD9_LABEL VARCHAR2(32 CHAR), 
	GRAND_TOTAL NUMBER(22,6), 
	MODIFIED_DATE TIMESTAMP (6), 
	DO_NAME VARCHAR2(128 CHAR) NOT NULL , 
	REFERENCE_NUMBER VARCHAR2(64 CHAR), 
	REMARKS VARCHAR2(1050 CHAR), 
	REQUESTER VARCHAR2(550 CHAR) NOT NULL , 
	STATUS VARCHAR2(10 CHAR), 
	SUPPLIER_ADDRESS VARCHAR2(300 CHAR), 
	SUPPLIER_FAX_NO VARCHAR2(16 CHAR), 
	SUPPLIER_NAME VARCHAR2(128 CHAR), 
	SUPPLIER_TAX_NO VARCHAR2(32 CHAR), 
	SUPPLIER_TEL_NO VARCHAR2(50 CHAR), 
	TAX_DESCRIPTION VARCHAR2(150 CHAR), 
	TERMS_AND_COND VARCHAR2(900 CHAR), 
	TOTAL NUMBER(22,6), 
	BUSINESS_UNIT_ID VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR), 
	CORRESPONDENCE_ADDRESS_ID VARCHAR2(64 CHAR), 
	COST_CENTER_ID VARCHAR2(64 CHAR), 
	CREATED_BY VARCHAR2(64 CHAR), 
	BASE_CURRENCY_ID VARCHAR2(64 CHAR) NOT NULL , 
	DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR), 
	MODIFIED_BY VARCHAR2(64 CHAR), 
	PO_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	FOOTER_ID VARCHAR2(64 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	ACTION_BY VARCHAR2(64), 
	ATTENTION_TO VARCHAR2(64), 
	LINE1 VARCHAR2(64), 
	LINE2 VARCHAR2(64), 
	LINE3 VARCHAR2(64), 
	LINE4 VARCHAR2(64), 
	LINE5 VARCHAR2(64), 
	LINE6 VARCHAR2(64), 
	LINE7 VARCHAR2(64), 
	SEND_DATE TIMESTAMP (6), 
	 PRIMARY KEY (ID) ,
   
  	 CONSTRAINT FK_DO_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID), 
	 CONSTRAINT FK_DO_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_DO_CADD_ID FOREIGN KEY (CORRESPONDENCE_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID) , 
	 CONSTRAINT FK_DO_COSTCENTER_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER (ID) , 
	 CONSTRAINT FK_DO_CREATED_BY_ID FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_DO_BUYER_CURRENCY FOREIGN KEY (BASE_CURRENCY_ID) REFERENCES PROC_CURRENCY (ID) , 
	 CONSTRAINT FK_DO_DEL_ADD_ID FOREIGN KEY (DELIVERY_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID) , 
	 CONSTRAINT FK_DO_MODIFIED_BY_ID FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID),  
	 CONSTRAINT FK_DO_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID) , 
	 CONSTRAINT FK_DO_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID) , 
	 CONSTRAINT FK_DO_FOOTER_ID FOREIGN KEY (FOOTER_ID) REFERENCES PROC_FOOTER (ID) , 
	 CONSTRAINT FK_DO_ACT_BY_ID FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER (ID) 
   ); 



-- PROC_DO_ITEM definition

CREATE TABLE PROC_DO_ITEM 
   (	
   ID VARCHAR2(64 CHAR) NOT NULL , 
	DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR), 
	DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_STATE VARCHAR2(150 CHAR), 
	DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR), 
	DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR), 
	DELIVERY_DATE TIMESTAMP (6), 
	DELIVERY_RECEIVER VARCHAR2(150 CHAR), 
	FIELD1 VARCHAR2(100 CHAR), 
	FIELD10 VARCHAR2(100 CHAR), 
	FIELD2 VARCHAR2(100 CHAR), 
	FIELD3 VARCHAR2(100 CHAR), 
	FIELD4 VARCHAR2(100 CHAR), 
	FIELD5 VARCHAR2(100 CHAR), 
	FIELD6 VARCHAR2(100 CHAR), 
	FIELD7 VARCHAR2(100 CHAR), 
	FIELD8 VARCHAR2(100 CHAR), 
	FIELD9 VARCHAR2(100 CHAR), 
	FREE_ITEM_TEXT_ENTERED NUMBER(1,0), 
	ITEM_DESCRIPTION VARCHAR2(1050 CHAR), 
	ITEM_NAME VARCHAR2(250 CHAR) NOT NULL , 
	ITEM_LEVEL NUMBER(10,0) NOT NULL , 
	SUB_ORDER NUMBER(10,0) NOT NULL , 
	ITEM_QUANTITY NUMBER(22,6), 
	TAX_AMOUNT NUMBER(22,6), 
	TOTAL_AMOUNT NUMBER(24,8), 
	TOTAL_AMT_WITH_TAX NUMBER(22,6), 
	UNIT_PRICE NUMBER(22,6), 
	BUSINESS_UNIT_ID VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR) NOT NULL , 
	COST_CENTER_ID VARCHAR2(64 CHAR), 
	DO_ID VARCHAR2(64 CHAR) NOT NULL , 
	DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR), 
	PARENT_ID VARCHAR2(64 CHAR), 
	PO_ID VARCHAR2(64 CHAR), 
	PO_ITEM_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	UOM_ID VARCHAR2(64 CHAR), 
	ITEM_TAX NUMBER(17,6), 
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_DO_ITM_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID)  REFERENCES PROC_BUSINESS_UNIT (ID) , 
	 CONSTRAINT FK_DO_ITEM_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_DO_ITM_COSTCEN_ID FOREIGN KEY (COST_CENTER_ID)  REFERENCES PROC_COST_CENTER (ID) , 
	 CONSTRAINT FK_DO_ITEM_INV_ID FOREIGN KEY (DO_ID) REFERENCES PROC_DO (ID) , 
	 CONSTRAINT FK_DO_ITEM_DEL_ADD_ID FOREIGN KEY (DELIVERY_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID) , 
	 CONSTRAINT FK_DO_ITEM_PARENT_ID FOREIGN KEY (PARENT_ID) REFERENCES PROC_DO_ITEM (ID) , 
	 CONSTRAINT FK_DO_ITEM_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID) , 
	 CONSTRAINT FK_DO_ITEM_PO_ITEM_ID FOREIGN KEY (PO_ITEM_ID) REFERENCES PROC_PO_ITEM (ID) , 
	 CONSTRAINT FK_DO_ITEM_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID) , 
	 CONSTRAINT FK_DO_ITM_UOM_ID FOREIGN KEY (UOM_ID) REFERENCES PROC_BUYER_UOM (ID) 
   ); 


-- PROC_DO_AUDIT definition

CREATE TABLE PROC_DO_AUDIT 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	ACTION_TYPE VARCHAR2(255 CHAR) NOT NULL , 
	ACTION_DATE TIMESTAMP (6) NOT NULL , 
	THE_DESCRIPTION VARCHAR2(3000 CHAR), 
	VISIBILITY_TYPE VARCHAR2(255 CHAR), 
	ACTION_BY VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR), 
	DO_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_DO_AUDIT_ACTION_BY FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_DO_AUDIT_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_DO_AUDIT_ID FOREIGN KEY (DO_ID) REFERENCES PROC_DO (ID) , 
	 CONSTRAINT FK_DO_AUDIT_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID) 
   );
   
   
-- PROC_INVOICE definition

CREATE TABLE PROC_INVOICE 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	ADDITIONAL_TAX NUMBER(22,6), 
	CORRESPOND_ADDRESS_CITY VARCHAR2(250 CHAR), 
	CORRESPOND_ADDRESS_COUNTRY VARCHAR2(128 CHAR), 
	CORRESPOND_ADDRESS_LINE1 VARCHAR2(250 CHAR), 
	CORRESPOND_ADDRESS_LINE2 VARCHAR2(250 CHAR), 
	CORRESPOND_ADDRESS_STATE VARCHAR2(150 CHAR), 
	CORRESPOND_ADDRESS_TITLE VARCHAR2(128 CHAR), 
	CORRESPOND_ADDRESS_ZIP VARCHAR2(32 CHAR), 
	CREATED_DATE TIMESTAMP (6) NOT NULL , 
	INVOICE_DECIMAL VARCHAR2(64 CHAR) NOT NULL , 
	DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR), 
	DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_STATE VARCHAR2(150 CHAR), 
	DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR), 
	DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR), 
	DELIVERY_DATE TIMESTAMP (6), 
	DELIVERY_RECEIVER VARCHAR2(150 CHAR), 
	DESCRIPTION VARCHAR2(1000 CHAR), 
	FIELD10_LABEL VARCHAR2(32 CHAR), 
	FIELD1_LABEL VARCHAR2(32 CHAR), 
	FIELD2_LABEL VARCHAR2(32 CHAR), 
	FIELD3_LABEL VARCHAR2(32 CHAR), 
	FIELD4_LABEL VARCHAR2(32 CHAR), 
	FIELD5_LABEL VARCHAR2(32 CHAR), 
	FIELD6_LABEL VARCHAR2(32 CHAR), 
	FIELD7_LABEL VARCHAR2(32 CHAR), 
	FIELD8_LABEL VARCHAR2(32 CHAR), 
	FIELD9_LABEL VARCHAR2(32 CHAR), 
	GRAND_TOTAL NUMBER(22,6), 
	INVOICE_FOOTER CLOB, 
	INVOICE_ID VARCHAR2(64 CHAR), 
	MODIFIED_DATE TIMESTAMP (6), 
	INVOICE_NAME VARCHAR2(128 CHAR) NOT NULL , 
	PROFORMA NUMBER(1,0) NOT NULL , 
	REFERENCE_NUMBER VARCHAR2(64 CHAR), 
	REMARKS VARCHAR2(1050 CHAR), 
	REQUESTER VARCHAR2(550 CHAR) NOT NULL , 
	STATUS VARCHAR2(10 CHAR), 
	SUPPLIER_ADDRESS VARCHAR2(300 CHAR), 
	SUPPLIER_FAX_NO VARCHAR2(16 CHAR), 
	SUPPLIER_NAME VARCHAR2(128 CHAR), 
	SUPPLIER_TAX_NO VARCHAR2(32 CHAR), 
	SUPPLIER_TEL_NO VARCHAR2(50 CHAR), 
	TAX_DESCRIPTION VARCHAR2(150 CHAR), 
	TERMS_AND_COND VARCHAR2(900 CHAR), 
	TOTAL NUMBER(22,6), 
	BUSINESS_UNIT_ID VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR), 
	CORRESPONDENCE_ADDRESS_ID VARCHAR2(64 CHAR), 
	COST_CENTER_ID VARCHAR2(64 CHAR), 
	CREATED_BY VARCHAR2(64 CHAR), 
	BASE_CURRENCY_ID VARCHAR2(64 CHAR) NOT NULL , 
	DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR), 
	MODIFIED_BY VARCHAR2(64 CHAR), 
	PO_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	FOOTER_ID VARCHAR2(64 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	ACTION_BY VARCHAR2(64), 
	DUE_DATE TIMESTAMP (6), 
	ATTENTION_TO VARCHAR2(64), 
	LINE1 VARCHAR2(64), 
	LINE2 VARCHAR2(64), 
	LINE3 VARCHAR2(64), 
	LINE4 VARCHAR2(64), 
	LINE5 VARCHAR2(64), 
	LINE6 VARCHAR2(64), 
	LINE7 VARCHAR2(64), 
	INCLUDE_DELIEVRY_ADRESS NUMBER, 
	SEND_DATE TIMESTAMP (6), 
	 PRIMARY KEY (ID) , 
	 CONSTRAINT FK_INVOICE_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID) , 
	 CONSTRAINT FK_INVOICE_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_INVOICE_CADD_ID FOREIGN KEY (CORRESPONDENCE_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID) , 
	 CONSTRAINT FK_INVOICE_COSTCENTER_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER (ID) , 
	 CONSTRAINT FK_INVOICE_CREATED_BY_ID FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_INVOICE_BUYER_CURRENCY FOREIGN KEY (BASE_CURRENCY_ID) REFERENCES PROC_CURRENCY (ID) , 
	 CONSTRAINT FK_INVOICE_DEL_ADD_ID FOREIGN KEY (DELIVERY_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID) , 
	 CONSTRAINT FK_INVOICE_MODIFIED_BY_ID FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_INVOICE_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID) , 
	 CONSTRAINT FK_INVOICE_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID) , 
	 CONSTRAINT FK_INV_FOOTER_ID FOREIGN KEY (FOOTER_ID) REFERENCES PROC_FOOTER (ID) , 
	 CONSTRAINT FK_INVOICE_ACT_BY_ID FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER (ID) 
   );
   
   
   -- PROC_INVOICE_ITEM definition

CREATE TABLE PROC_INVOICE_ITEM 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR), 
	DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR), 
	DELIVERY_ADDRESS_STATE VARCHAR2(150 CHAR), 
	DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR), 
	DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR), 
	DELIVERY_DATE TIMESTAMP (6), 
	DELIVERY_RECEIVER VARCHAR2(150 CHAR), 
	FIELD1 VARCHAR2(100 CHAR), 
	FIELD10 VARCHAR2(100 CHAR), 
	FIELD2 VARCHAR2(100 CHAR), 
	FIELD3 VARCHAR2(100 CHAR), 
	FIELD4 VARCHAR2(100 CHAR), 
	FIELD5 VARCHAR2(100 CHAR), 
	FIELD6 VARCHAR2(100 CHAR), 
	FIELD7 VARCHAR2(100 CHAR), 
	FIELD8 VARCHAR2(100 CHAR), 
	FIELD9 VARCHAR2(100 CHAR), 
	FREE_ITEM_TEXT_ENTERED NUMBER(1,0), 
	ITEM_DESCRIPTION VARCHAR2(1050 CHAR), 
	ITEM_NAME VARCHAR2(250 CHAR) NOT NULL , 
	ITEM_TAX VARCHAR2(20 CHAR), 
	ITEM_LEVEL NUMBER(10,0) NOT NULL , 
	SUB_ORDER NUMBER(10,0) NOT NULL , 
	ITEM_QUANTITY NUMBER(22,6), 
	TAX_AMOUNT NUMBER(22,6), 
	TOTAL_AMOUNT NUMBER(24,8), 
	TOTAL_AMT_WITH_TAX NUMBER(22,6), 
	UNIT_PRICE NUMBER(22,6), 
	BUSINESS_UNIT_ID VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR) NOT NULL , 
	COST_CENTER_ID VARCHAR2(64 CHAR), 
	DELIVERY_ADDRESS_ID VARCHAR2(64 CHAR), 
	INVOICE_ID VARCHAR2(64 CHAR) NOT NULL , 
	PARENT_ID VARCHAR2(64 CHAR), 
	PO_ID VARCHAR2(64 CHAR), 
	PO_ITEM_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	UOM_ID VARCHAR2(64 CHAR), 
	 PRIMARY KEY (ID) , 
	 CONSTRAINT FK_INV_ITM_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID)  REFERENCES PROC_BUSINESS_UNIT (ID) , 
	 CONSTRAINT FK_INV_ITEM_BUYER_ID FOREIGN KEY (BUYER_ID)  REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_INV_ITM_COSTCEN_ID FOREIGN KEY (COST_CENTER_ID)  REFERENCES PROC_COST_CENTER (ID) , 
	 CONSTRAINT FK_INV_ITEM_DEL_ADD_ID FOREIGN KEY (DELIVERY_ADDRESS_ID) REFERENCES PROC_BUYER_ADDRESS (ID) , 
	 CONSTRAINT FK_INVOICE_ITEM_INV_ID FOREIGN KEY (INVOICE_ID) REFERENCES PROC_INVOICE (ID) , 
	 CONSTRAINT FK_INVOICE_ITEM_PARENT_ID FOREIGN KEY (PARENT_ID) REFERENCES PROC_INVOICE_ITEM (ID) , 
	 CONSTRAINT FK_INVOICE_ITEM_PO_ID FOREIGN KEY (PO_ID)  REFERENCES PROC_PO (ID) , 
	 CONSTRAINT FK_INVOICE_ITEM_PO_ITEM_ID FOREIGN KEY (PO_ITEM_ID) REFERENCES PROC_PO_ITEM (ID) , 
	 CONSTRAINT FK_INV_ITEM_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID) , 
	 CONSTRAINT FK_INV_ITM_UOM_ID FOREIGN KEY (UOM_ID) REFERENCES PROC_BUYER_UOM (ID) 
   ) ;  

-- PROC_INVOICE_AUDIT definition

CREATE TABLE PROC_INVOICE_AUDIT 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	ACTION_TYPE VARCHAR2(255 CHAR) NOT NULL , 
	ACTION_DATE TIMESTAMP (6) NOT NULL , 
	THE_DESCRIPTION VARCHAR2(3000 CHAR), 
	VISIBILITY_TYPE VARCHAR2(255 CHAR), 
	ACTION_BY VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR), 
	INVOICE_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	 PRIMARY KEY (ID) , 
	 CONSTRAINT FK_INV_AUDIT_ACTION_BY FOREIGN KEY (ACTION_BY)  REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_INV_AUDIT_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_INV_AUDIT_ID FOREIGN KEY (INVOICE_ID) REFERENCES PROC_INVOICE (ID) , 
	 CONSTRAINT FK_INV_AUDIT_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID) 
   ) ;
 
 -------------------------------------------------------------------------------------
---------------------------------  PH-1466 -------------------------------------------
--------------------------------------------------------------------------------------
CREATE TABLE PROC_SUPPLIER_FORM 
   (	ID VARCHAR2(64 CHAR) NOT NULL, 
	ACCEPTED_COUNT NUMBER(19,0), 
	CREATED_DATE TIMESTAMP (6), 
	DESCRIPTION VARCHAR2(550 CHAR), 
	MODIFIED_DATE TIMESTAMP (6), 
	NAME VARCHAR2(128 CHAR), 
	PENDING_COUNT NUMBER(19,0), 
	STATUS VARCHAR2(255 CHAR), 
	SUBMITTED_COUNT NUMBER(19,0), 
	TENANT_ID VARCHAR2(64 CHAR) NOT NULL, 
	CREATED_BY VARCHAR2(64 CHAR), 
	USER_LAST_MODIFIED_BY VARCHAR2(64 CHAR), 
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_SF_USER_CREATED_BY FOREIGN KEY (CREATED_BY)  REFERENCES PROC_USER (ID) ENABLE, 
	 CONSTRAINT FK_SF_USER_MODIFIED_BY FOREIGN KEY (USER_LAST_MODIFIED_BY)  REFERENCES PROC_USER (ID) ENABLE
   );
   

CREATE TABLE PROC_SUPPLIER_FORM_ITEM 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	IS_ATTACHMENT NUMBER(1,0), 
	CQ_TYPE VARCHAR2(255 CHAR), 
	IS_SUPPLIER_ATTACH_REQUIRED NUMBER(1,0), 
	ITEM_DESCRIPTION VARCHAR2(1050 CHAR), 
	ITEM_NAME VARCHAR2(250 CHAR) NOT NULL , 
	ITEM_LEVEL NUMBER(10,0) NOT NULL , 
	IS_OPTIONAL NUMBER(1,0), 
	SUB_ORDER NUMBER(10,0) NOT NULL , 
	TENANT_ID VARCHAR2(64 CHAR) NOT NULL , 
	PARENT_ID VARCHAR2(64 CHAR), 
	FORM_ID VARCHAR2(64 CHAR) NOT NULL , 
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_SFI_ITEM_PARENT_ID FOREIGN KEY (PARENT_ID)  REFERENCES PROC_SUPPLIER_FORM_ITEM (ID) , 
	 CONSTRAINT FK_SFI_ITEM_FOMR_ID FOREIGN KEY (FORM_ID)  REFERENCES PROC_SUPPLIER_FORM (ID) 
   ) ;
 
CREATE TABLE PROC_SUP_FORM_ITEM_OPT 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	OPTION_ORDER NUMBER(10,0), 
	SCORING NUMBER(10,0), 
	TENANT_ID VARCHAR2(64 CHAR) NOT NULL , 
	OPTION_VALUE VARCHAR2(250 CHAR), 
	ITEM_ID VARCHAR2(64 CHAR) NOT NULL , 
	 PRIMARY KEY (ID) , 
	 CONSTRAINT FK_SFI_OPT_ITM_ID FOREIGN KEY (ITEM_ID)  REFERENCES PROC_SUPPLIER_FORM_ITEM (ID) 
   );
 

CREATE TABLE PROC_SUP_FORM_ITEM_ATTA 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	ATTACHMENT_CONTENT_TYPE VARCHAR2(160 CHAR), 
	ATTACHMENT_FILE_DATA BLOB, 
	ATTACHMENT_FILE_NAME VARCHAR2(500 CHAR), 
	TENANT_ID VARCHAR2(64 CHAR) NOT NULL , 
	ITEM_ID VARCHAR2(64 CHAR) NOT NULL , 
	 PRIMARY KEY (ID) , 
	 CONSTRAINT FK_SFA_ATTA_ITM_ID FOREIGN KEY (ITEM_ID)  REFERENCES PROC_SUPPLIER_FORM_ITEM (ID) 
   );
 

CREATE TABLE PROC_SUPPLIER_FORM_SUBM 
   (	
   ID VARCHAR2(64 CHAR) NOT NULL , 
	DESCRIPTION VARCHAR2(550 CHAR), 
	IS_ONBOARDING_FORM NUMBER(1,0), 
	NAME VARCHAR2(128 CHAR), 
	REQUESTED_DATE TIMESTAMP (6), 
	STATUS VARCHAR2(255 CHAR), 
	SUBMITED_DATE TIMESTAMP (6), 
	BUYER_ID VARCHAR2(64 CHAR) NOT NULL , 
	FAV_SUPPLIER_ID VARCHAR2(64 CHAR) NOT NULL , 
	REQUESTED_BY VARCHAR2(64 CHAR), 
	USER_SUBMITED_BY VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR) NOT NULL , 
	FORM_ID VARCHAR2(64 CHAR) NOT NULL , 
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_SFB_BUYER_ID FOREIGN KEY (BUYER_ID)  REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_SFB_FAV_SUPPLIER_ID FOREIGN KEY (FAV_SUPPLIER_ID)  REFERENCES PROC_FAVOURITE_SUPPLIER (FAV_SUPPLIER_ID) , 
	 CONSTRAINT FK_SFB_USER_REQ_BY FOREIGN KEY (REQUESTED_BY)  REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_SFB_USER_SUB_BY FOREIGN KEY (USER_SUBMITED_BY)  REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_SFB_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID) , 
	 CONSTRAINT FK_SFB_FOMR_ID FOREIGN KEY (FORM_ID)  REFERENCES PROC_SUPPLIER_FORM (ID) 
   ) ;

 
CREATE TABLE PROC_SUPPLIER_FORM_SUBM_ITEM 
   (	
   ID VARCHAR2(64 CHAR) NOT NULL , 
	CONTENT_TYPE VARCHAR2(160 CHAR), 
	FILE_DATA BLOB, 
	FILE_NAME VARCHAR2(500 CHAR), 
	TEXT_ANSWERS VARCHAR2(1500 CHAR), 
	FORM_ITEM_ID VARCHAR2(64 CHAR) NOT NULL , 
	FORM_SUB_ID VARCHAR2(64 CHAR) NOT NULL , 
	 PRIMARY KEY (ID) , 
	 CONSTRAINT FK_SFS_FORM_ITEM_ID FOREIGN KEY (FORM_ITEM_ID)  REFERENCES PROC_SUPPLIER_FORM_ITEM (ID) , 
	 CONSTRAINT FK_SFS_SUB_FORM_ID FOREIGN KEY (FORM_SUB_ID)  REFERENCES PROC_SUPPLIER_FORM_SUBM (ID) 
   ) ; 

 CREATE TABLE PROC_SUP_FORM_SUB_ITEM_OPT 
   (	
   ID VARCHAR2(64 CHAR) NOT NULL , 
	OPTION_ORDER NUMBER(10,0), 
	SCORING NUMBER(10,0), 
	OPTION_VALUE VARCHAR2(250 CHAR), 
	SUB_ITEM_ID VARCHAR2(64 CHAR) NOT NULL , 
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_SFS_SUB_OPT_ITM_ID FOREIGN KEY (SUB_ITEM_ID)  REFERENCES PROC_SUPPLIER_FORM_SUBM_ITEM (ID) 
   ) ; 
   

CREATE TABLE PROC_SUPP_FORM_SUB_AUDIT 
   (	ID VARCHAR2(64 CHAR) NOT NULL , 
	ACTION_TYPE VARCHAR2(255 CHAR) NOT NULL , 
	ACTION_DATE TIMESTAMP (6) NOT NULL , 
	THE_DESCRIPTION VARCHAR2(3000 CHAR), 
	VISIBILITY_TYPE VARCHAR2(255 CHAR), 
	ACTION_BY VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	FORM_SUB_ID VARCHAR2(64 CHAR), 
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_SFS_AUDIT_ACTION_BY FOREIGN KEY (ACTION_BY)  REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_SFS_AUDIT_BUYER_ID FOREIGN KEY (BUYER_ID)  REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_SFS_AUDIT_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID)  REFERENCES PROC_SUPPLIER (SUPPLIER_ID) , 
	 CONSTRAINT FK_FORM_SUB_AUDIT FOREIGN KEY (FORM_SUB_ID)  REFERENCES PROC_SUPPLIER_FORM_SUBM (ID) 
   ); 
	

INSERT INTO PROC_ACCESS_RIGHTS
(ACL_VALUE, ACL_NAME, ACL_ORDER, FOR_BUYER, FOR_FINANCE_COMPANY, MENU_URL, FOR_OWNER, FOR_SUPPLIER, PARENT_ID)
VALUES('ROLE_SUPPLIER_FORMS', 'Supplier Forms', 6, 1, 0, NULL, 1, 0, 'ROLE_SUPPLIER_LIST');

ALTER TABLE PROC_BUYER ADD IS_ENA_PREQULI_FORM NUMBER(1,0) DEFAULT 0; 

ALTER TABLE PROC_BUYER ADD SUPPLIER_FORM_ID VARCHAR2(64);
ALTER TABLE PROC_BUYER ADD CONSTRAINT FK_PRE_SUPP_FORM_ID FOREIGN KEY (SUPPLIER_FORM_ID) REFERENCES PROC_SUPPLIER_FORM (ID);
   
-------------------------------  PH-1476   -------------------------------------

  ALTER TABLE PROC_PR ADD IS_ENABLE_APPROVAL_REMINDER NUMBER(1) DEFAULT 0 NOT NULL;
  ALTER TABLE PROC_PR ADD REMINDER_HOURS NUMBER(2);
  ALTER TABLE PROC_PR ADD REMINDER_COUNT NUMBER(2);
  
  ALTER TABLE PROC_PR_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_BUDGET_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_PR_TEMPALTE_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_RFI_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_RFQ_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_RFP_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_RFA_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_RFT_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_FORM_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_FORM_APPROVAL_USER_REQ add NEXT_REMINDER_TIME TIMESTAMP (6);
  ALTER TABLE PROC_TEMPLATE_APPROVAL_USER add NEXT_REMINDER_TIME TIMESTAMP (6);
  
  ALTER TABLE PROC_RFA_EVENTS ADD IS_ENABLE_APPROVAL_REMINDER NUMBER(1) DEFAULT 0 NOT NULL;
  ALTER TABLE PROC_RFA_EVENTS ADD REMINDER_HOURS NUMBER(2);
  ALTER TABLE PROC_RFA_EVENTS ADD REMINDER_COUNT NUMBER(2);
  
  ALTER TABLE PROC_RFI_EVENTS ADD IS_ENABLE_APPROVAL_REMINDER NUMBER(1) DEFAULT 0 NOT NULL;
  ALTER TABLE PROC_RFI_EVENTS ADD REMINDER_HOURS NUMBER(2);
  ALTER TABLE PROC_RFI_EVENTS ADD REMINDER_COUNT NUMBER(2);
  
  ALTER TABLE PROC_RFQ_EVENTS ADD IS_ENABLE_APPROVAL_REMINDER NUMBER(1) DEFAULT 0 NOT NULL;
  ALTER TABLE PROC_RFQ_EVENTS ADD REMINDER_HOURS NUMBER(2);
  ALTER TABLE PROC_RFQ_EVENTS ADD REMINDER_COUNT NUMBER(2);
  
  ALTER TABLE PROC_RFP_EVENTS ADD IS_ENABLE_APPROVAL_REMINDER NUMBER(1) DEFAULT 0 NOT NULL;
  ALTER TABLE PROC_RFP_EVENTS ADD REMINDER_HOURS NUMBER(2);
  ALTER TABLE PROC_RFP_EVENTS ADD REMINDER_COUNT NUMBER(2);
  
  ALTER TABLE PROC_RFT_EVENTS ADD IS_ENABLE_APPROVAL_REMINDER NUMBER(1) DEFAULT 0 NOT NULL;
  ALTER TABLE PROC_RFT_EVENTS ADD REMINDER_HOURS NUMBER(2);
  ALTER TABLE PROC_RFT_EVENTS ADD REMINDER_COUNT NUMBER(2);
  
  ALTER TABLE PROC_SOURCING_FORM_REQ ADD IS_ENABLE_APPROVAL_REMINDER NUMBER(1) DEFAULT 0 NOT NULL;
  ALTER TABLE PROC_SOURCING_FORM_REQ ADD REMINDER_HOURS NUMBER(2);
  ALTER TABLE PROC_SOURCING_FORM_REQ ADD REMINDER_COUNT NUMBER(2);
  
  ALTER TABLE PROC_PR_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_BUDGET_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_PR_TEMPALTE_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_RFI_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_RFQ_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_RFP_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_RFA_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_RFT_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_FORM_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_FORM_APPROVAL_USER_REQ ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  ALTER TABLE PROC_TEMPLATE_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;
  
  CREATE INDEX IDX_PR_APP_USR_NOTI ON PROC_PR_APPROVAL_USER (APPROVAL_STATUS, REMINDER_COUNT, NEXT_REMINDER_TIME) TABLESPACE PROCV7PRD_IDX; 
  CREATE INDEX IDX_RFI_APP_USR_NOTI ON PROC_RFI_APPROVAL_USER (APPROVAL_STATUS, REMINDER_COUNT, NEXT_REMINDER_TIME) TABLESPACE PROCV7PRD_IDX;
  CREATE INDEX IDX_RFT_APP_USR_NOTI ON PROC_RFT_APPROVAL_USER (APPROVAL_STATUS, REMINDER_COUNT, NEXT_REMINDER_TIME) TABLESPACE PROCV7PRD_IDX;
  CREATE INDEX IDX_RFA_APP_USR_NOTI ON PROC_RFA_APPROVAL_USER (APPROVAL_STATUS, REMINDER_COUNT, NEXT_REMINDER_TIME) TABLESPACE PROCV7PRD_IDX;
  CREATE INDEX IDX_RFP_APP_USR_NOTI ON PROC_RFP_APPROVAL_USER (APPROVAL_STATUS, REMINDER_COUNT, NEXT_REMINDER_TIME) TABLESPACE PROCV7PRD_IDX;
  CREATE INDEX IDX_RFQ_APP_USR_NOTI ON PROC_RFQ_APPROVAL_USER (APPROVAL_STATUS, REMINDER_COUNT, NEXT_REMINDER_TIME) TABLESPACE PROCV7PRD_IDX;
  CREATE INDEX IDX_BUDG_APP_USR_NOTI ON PROC_BUDGET_APPROVAL_USER (APPROVAL_STATUS, REMINDER_COUNT, NEXT_REMINDER_TIME) TABLESPACE PROCV7PRD_IDX;
  
  ---------------------------------------------------------------------------------
---------------------------------  Jasper-Report ---------------------------------
----------------------------------------------------------------------------------

CREATE TABLE "PROC_PO_REPORT" 
   (ID VARCHAR2(64 CHAR) NOT NULL, 
	FILE_DATA BLOB, 
	FILE_NAME VARCHAR2(500 CHAR),
	PO_NUMBER VARCHAR2(64 CHAR),
    TENANT_ID VARCHAR2(64 CHAR) NOT NULL, 
	PO_ID VARCHAR2(64) NOT NULL,
	PRIMARY KEY (ID),
	CONSTRAINT FK_REP_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID)
    ) ;
    
    CREATE TABLE "PROC_DO_REPORT" 
   (ID VARCHAR2(64 CHAR) NOT NULL, 
	FILE_DATA BLOB, 
	FILE_NAME VARCHAR2(500 CHAR),
	DO_NUMBER VARCHAR2(64 CHAR),
    TENANT_ID VARCHAR2(64 CHAR) NOT NULL, 
	DO_ID VARCHAR2(64) NOT NULL,
	PRIMARY KEY (ID),
	CONSTRAINT FK_REP_DO_ID FOREIGN KEY (DO_ID) REFERENCES PROC_DO (ID)
    ) ;
    
    CREATE TABLE "PROC_INVOICE_REPORT" 
   (ID VARCHAR2(64 CHAR) NOT NULL, 
	FILE_DATA BLOB, 
	FILE_NAME VARCHAR2(500 CHAR),
	INVOICE_NUMBER VARCHAR2(64 CHAR),
    TENANT_ID VARCHAR2(64 CHAR) NOT NULL, 
	INVOICE_ID VARCHAR2(64) NOT NULL,
	PRIMARY KEY (ID),
	CONSTRAINT FK_REP_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES PROC_INVOICE (ID)
    ) ;
  
----------------------------------------------------------------------------------
---------------------------------  PH-984 --------------------------------------
----------------------------------------------------------------------------------
ALTER TABLE PROC_PR_ITEM MODIFY ITEM_QUANTITY NUMBER(22,6);
ALTER TABLE PROC_PR_ITEM MODIFY UNIT_PRICE NUMBER(22,6);

--------------------------------------------------------------------------------------
---------------------------------  PH-1520 -------------------------------------------
--------------------------------------------------------------------------------------

CREATE TABLE PROC_SUPP_FORM_APPROVAL 
   (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	APPROVAL_TYPE VARCHAR2(255 CHAR), 
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE, 
	FORM_ID VARCHAR2(64 CHAR), 
	PRIMARY KEY (ID),
	CONSTRAINT FK_FORM_APPR_ID FOREIGN KEY (FORM_ID) REFERENCES PROC_SUPPLIER_FORM(ID)
  );

  
CREATE TABLE PROC_SUPP_FORM_APPROVAL_USER 
   (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	USER_ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	FORM_APPROVAL_ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	PRIMARY KEY (ID),
	CONSTRAINT FK_SUPP_FORM_APP_USER_ID FOREIGN KEY (USER_ID)  REFERENCES PROC_USER (ID) , 
	CONSTRAINT FK_APPROVAL_USER_FORM_ID FOREIGN KEY (FORM_APPROVAL_ID) REFERENCES PROC_SUPP_FORM_APPROVAL (ID) ENABLE
   );  
   

ALTER TABLE PROC_SUPPLIER_FORM_SUBM ADD APPROVAL_STATUS VARCHAR2(255 CHAR);

CREATE TABLE PROC_SUPP_FORM_SUB_APPROVAL 
   (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	ACTIVE NUMBER(1,0), 
	APPROVAL_TYPE VARCHAR2(255 CHAR), 
	IS_DONE NUMBER(1,0) NOT NULL ENABLE, 
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE, 
	BATCH_NO NUMBER(10,0), 
	FORM_SUB_ID VARCHAR2(64 CHAR), 
	PRIMARY KEY (ID),
	CONSTRAINT FK_FORM_SUB_APPR_ID FOREIGN KEY (FORM_SUB_ID) REFERENCES PROC_SUPPLIER_FORM_SUBM(ID)
  );

  
CREATE TABLE PROC_SUPP_FORM_SUB_APPR_USER 
   (ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	ACTION_DATE TIMESTAMP (6), 
	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
	USER_ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	FORM_SUB_APPR_ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SUPP_FORM_SUB_APP_USER_ID FOREIGN KEY (USER_ID)  REFERENCES PROC_USER (ID) , 
	CONSTRAINT FK_APPR_USER_SUB_FORM_ID FOREIGN KEY (FORM_SUB_APPR_ID) REFERENCES PROC_SUPP_FORM_SUB_APPROVAL (ID) ENABLE
   );  

   
CREATE TABLE PROC_SUPP_FORM_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	APPROVAL_USER_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	CREATED_BY VARCHAR2(64),
	FORM_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_FORM_COMM_USER_ID FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SUPP_FORM_COMMENT_ID FOREIGN KEY (FORM_ID) REFERENCES PROC_SUPPLIER_FORM_SUBM(ID)
);

--------------------------------------------------------------------------------------
---------------------------------  PH-1192 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_FAVOURITE_SUPPLIER ADD SUBSIDIARY NUMBER default 0;

-------------------------------------------------------------------------------------
---------------------------------  PH-1528 -------------------------------------------
-------------------------------------------------------------------------------------
 
ALTER TABLE PROC_ERP_SETUP ADD ENABLE_PO_ACC_DECL_PUSH NUMBER(1,0)  DEFAULT 0 NOT NULL;  

--------------------------------------------------------------------------------------
------------------------------------------PH-1612 ------------------------------------  
--------------------------------------------------------------------------------------
CREATE INDEX IDX_RFI_EVT_SUP_CQ_ITEM ON PROC_RFI_EVENT_SUPP_CQ_ITEM (CQ_ID, SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFA_EVT_SUP_CQ_ITEM ON PROC_RFA_EVENT_SUPP_CQ_ITEM (CQ_ID, SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFT_EVT_SUP_CQ_ITEM ON PROC_RFT_EVENT_SUPP_CQ_ITEM (CQ_ID, SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFP_EVT_SUP_CQ_ITEM ON PROC_RFP_EVENT_SUPP_CQ_ITEM (CQ_ID, SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFQ_EVT_SUP_CQ_ITEM ON PROC_RFQ_EVENT_SUPP_CQ_ITEM (CQ_ID, SUPPLIER_ID) TABLESPACE PROCV7PRD_IDX;


CREATE INDEX IDX_RFA_EVNV_EVENT_ID ON PROC_RFA_ENVELOP (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFT_EVNV_EVENT_ID ON PROC_RFT_ENVELOP (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFP_EVNV_EVENT_ID ON PROC_RFP_ENVELOP (EVENT_ID) TABLESPACE PROCV7PRD_IDX;		
CREATE INDEX IDX_RFQ_EVNV_EVENT_ID ON PROC_RFQ_ENVELOP (EVENT_ID) TABLESPACE PROCV7PRD_IDX;		
CREATE INDEX IDX_RFI_EVNV_EVENT_ID ON PROC_RFI_ENVELOP (EVENT_ID) TABLESPACE PROCV7PRD_IDX;		


CREATE INDEX IDX_RFA_TEAM_EVENT_ID ON PROC_RFA_TEAM (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFT_TEAM_EVENT_ID ON PROC_RFT_TEAM (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFP_TEAM_EVENT_ID ON PROC_RFP_TEAM (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFQ_TEAM_EVENT_ID ON PROC_RFQ_TEAM (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFI_TEAM_EVENT_ID ON PROC_RFI_TEAM (EVENT_ID) TABLESPACE PROCV7PRD_IDX;	


CREATE INDEX IDX_RFA_APPROVAL_EVENT_ID ON PROC_RFA_EVENT_APPROVAL (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFT_APPROVAL_EVENT_ID ON PROC_RFT_EVENT_APPROVAL (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFP_APPROVAL_EVENT_ID ON PROC_RFP_EVENT_APPROVAL (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFQ_APPROVAL_EVENT_ID ON PROC_RFQ_EVENT_APPROVAL (EVENT_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFI_APPROVAL_EVENT_ID ON PROC_RFI_EVENT_APPROVAL (EVENT_ID) TABLESPACE PROCV7PRD_IDX;


CREATE INDEX IDX_RFA_EVNV_USER_COMP ON PROC_RFA_EVALUATOR_USER (RFA_ENVELOPE_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFT_EVNV_USER_COMP ON PROC_RFT_EVALUATOR_USER (RFT_ENVELOPE_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFP_EVNV_USER_COMP ON PROC_RFP_EVALUATOR_USER (RFP_ENVELOPE_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFQ_EVNV_USER_COMP ON PROC_RFQ_EVALUATOR_USER (RFQ_ENVELOPE_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFI_EVNV_USER_COMP ON PROC_RFI_EVALUATOR_USER (RFI_ENVELOPE_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;


CREATE INDEX IDX_RFA_APPR_USER_COMP ON PROC_RFA_APPROVAL_USER (RFA_EVENT_APPROVAL_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFT_APPR_USER_COMP ON PROC_RFT_APPROVAL_USER (RFT_EVENT_APPROVAL_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFP_APPR_USER_COMP ON PROC_RFP_APPROVAL_USER (RFP_EVENT_APPROVAL_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;
CREATE INDEX IDX_RFQ_APPR_USER_COMP ON PROC_RFQ_APPROVAL_USER (RFQ_EVENT_APPROVAL_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;	
CREATE INDEX IDX_RFI_APPR_USER_COMP ON PROC_RFI_APPROVAL_USER (RFI_EVENT_APPROVAL_ID, USER_ID) TABLESPACE PROCV7PRD_IDX;

 -------------------------------------------------------------------------------------
---------------------------------  PH-1553 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_PR ADD IS_NOTIFY_EVENT_OWNER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_SOURCING_FORM_REQ ADD IS_NOTIFY_EVENT_OWNER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFA_EVENTS ADD IS_NOTIFY_EVENT_OWNER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFI_EVENTS ADD IS_NOTIFY_EVENT_OWNER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFP_EVENTS ADD IS_NOTIFY_EVENT_OWNER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFQ_EVENTS ADD IS_NOTIFY_EVENT_OWNER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFT_EVENTS ADD IS_NOTIFY_EVENT_OWNER NUMBER(1) DEFAULT 0 NOT NULL;


ALTER TABLE PROC_PR_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_BUDGET_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_PR_TEMPLATE_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFI_EVENT_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFQ_EVENT_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFP_EVENT_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFA_EVENT_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFT_EVENT_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_SOURCING_FORM_APP ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_SOURCING_FORM_APP_REQ ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_SUPP_FORM_SUB_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_TEMPLATE_EVENT_APPROVAL ADD IS_ESCALATED NUMBER(1) DEFAULT 0;
  

--------------------------------------------------------------------------------------
---------------------------------  PH-1543 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_PRODUCT_ITEM ADD INTERFACE_CODE VARCHAR2(20 CHAR);
ALTER TABLE PROC_PRODUCT_ITEM MODIFY PRODUCT_CODE VARCHAR2(50 CHAR);
UPDATE PROC_PRODUCT_ITEM SET INTERFACE_CODE = PRODUCT_CODE WHERE INTERFACE_CODE IS NULL
UPDATE PROC_PRODUCT_ITEM SET PRODUCT_CODE = PRODUCT_CODE || PURCHASE_GROUP_CODE  WHERE PURCHASE_GROUP_CODE IS NOT NULL 



 -------------------------------------------------------------------------------------
---------------------------------  PH-1621 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_RFA_EVALUATOR_USER ADD (EVALUATOR_SUMMARY_TMP  CLOB);
UPDATE PROC_RFA_EVALUATOR_USER SET EVALUATOR_SUMMARY_TMP=EVALUATOR_SUMMARY;
COMMIT;
ALTER TABLE PROC_RFA_EVALUATOR_USER DROP COLUMN EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFA_EVALUATOR_USER RENAME COLUMN EVALUATOR_SUMMARY_TMP TO EVALUATOR_SUMMARY;


ALTER TABLE PROC_RFI_EVALUATOR_USER ADD (EVALUATOR_SUMMARY_TMP  CLOB);
UPDATE PROC_RFI_EVALUATOR_USER SET EVALUATOR_SUMMARY_TMP=EVALUATOR_SUMMARY;
COMMIT;
ALTER TABLE PROC_RFI_EVALUATOR_USER DROP COLUMN EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFI_EVALUATOR_USER RENAME COLUMN EVALUATOR_SUMMARY_TMP TO EVALUATOR_SUMMARY;


ALTER TABLE PROC_RFP_EVALUATOR_USER ADD (EVALUATOR_SUMMARY_TMP  CLOB);
UPDATE PROC_RFP_EVALUATOR_USER SET EVALUATOR_SUMMARY_TMP=EVALUATOR_SUMMARY;
COMMIT;
ALTER TABLE PROC_RFP_EVALUATOR_USER DROP COLUMN EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFP_EVALUATOR_USER RENAME COLUMN EVALUATOR_SUMMARY_TMP TO EVALUATOR_SUMMARY;


ALTER TABLE PROC_RFQ_EVALUATOR_USER ADD (EVALUATOR_SUMMARY_TMP  CLOB);
UPDATE PROC_RFQ_EVALUATOR_USER SET EVALUATOR_SUMMARY_TMP=EVALUATOR_SUMMARY;
COMMIT;
ALTER TABLE PROC_RFQ_EVALUATOR_USER DROP COLUMN EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFQ_EVALUATOR_USER RENAME COLUMN EVALUATOR_SUMMARY_TMP TO EVALUATOR_SUMMARY;


ALTER TABLE PROC_RFT_EVALUATOR_USER ADD (EVALUATOR_SUMMARY_TMP  CLOB);
UPDATE PROC_RFT_EVALUATOR_USER SET EVALUATOR_SUMMARY_TMP=EVALUATOR_SUMMARY;
COMMIT;
ALTER TABLE PROC_RFT_EVALUATOR_USER DROP COLUMN EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFT_EVALUATOR_USER RENAME COLUMN EVALUATOR_SUMMARY_TMP TO EVALUATOR_SUMMARY;


-- ENVELOP


ALTER TABLE PROC_RFA_ENVELOP ADD (LEAD_EVALUATOR_SUMMARY_TMP CLOB);
UPDATE PROC_RFA_ENVELOP SET LEAD_EVALUATOR_SUMMARY_TMP=LEAD_EVALUATOR_SUMMARY;
COMMIT ;
ALTER TABLE PROC_RFA_ENVELOP DROP COLUMN LEAD_EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFA_ENVELOP RENAME COLUMN LEAD_EVALUATOR_SUMMARY_TMP TO LEAD_EVALUATOR_SUMMARY;


ALTER TABLE PROC_RFI_ENVELOP ADD (LEAD_EVALUATOR_SUMMARY_TMP CLOB);
UPDATE PROC_RFI_ENVELOP SET LEAD_EVALUATOR_SUMMARY_TMP=LEAD_EVALUATOR_SUMMARY;
COMMIT ;
ALTER TABLE PROC_RFI_ENVELOP DROP COLUMN LEAD_EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFI_ENVELOP RENAME COLUMN LEAD_EVALUATOR_SUMMARY_TMP TO LEAD_EVALUATOR_SUMMARY;


ALTER TABLE PROC_RFP_ENVELOP ADD (LEAD_EVALUATOR_SUMMARY_TMP CLOB);
UPDATE PROC_RFP_ENVELOP SET LEAD_EVALUATOR_SUMMARY_TMP=LEAD_EVALUATOR_SUMMARY;
COMMIT ;
ALTER TABLE PROC_RFP_ENVELOP DROP COLUMN LEAD_EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFP_ENVELOP RENAME COLUMN LEAD_EVALUATOR_SUMMARY_TMP TO LEAD_EVALUATOR_SUMMARY;


ALTER TABLE PROC_RFQ_ENVELOP ADD (LEAD_EVALUATOR_SUMMARY_TMP CLOB);
UPDATE PROC_RFQ_ENVELOP SET LEAD_EVALUATOR_SUMMARY_TMP=LEAD_EVALUATOR_SUMMARY;
COMMIT ;
ALTER TABLE PROC_RFQ_ENVELOP DROP COLUMN LEAD_EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFQ_ENVELOP RENAME COLUMN LEAD_EVALUATOR_SUMMARY_TMP TO LEAD_EVALUATOR_SUMMARY;


ALTER TABLE PROC_RFT_ENVELOP ADD (LEAD_EVALUATOR_SUMMARY_TMP CLOB);
UPDATE PROC_RFT_ENVELOP SET LEAD_EVALUATOR_SUMMARY_TMP=LEAD_EVALUATOR_SUMMARY;
COMMIT ;
ALTER TABLE PROC_RFT_ENVELOP DROP COLUMN LEAD_EVALUATOR_SUMMARY;
ALTER TABLE PROC_RFT_ENVELOP RENAME COLUMN LEAD_EVALUATOR_SUMMARY_TMP TO LEAD_EVALUATOR_SUMMARY;

--------------------------------------------------------------------------------------
---------------------------------  PH-1575 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_SOURCING_FORM_CQ ADD CQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFA_EVENT_CQ ADD CQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFI_EVENT_CQ ADD CQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFP_EVENT_CQ ADD CQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFQ_EVENT_CQ ADD CQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFT_EVENT_CQ ADD CQ_ORDER NUMBER(10);
ALTER TABLE PROC_SOURCING_FORM_BQ_REQ ADD BQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFA_EVENT_BQ ADD BQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFP_EVENT_BQ ADD BQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFQ_EVENT_BQ ADD BQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFT_EVENT_BQ ADD BQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD BQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD BQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD BQ_ORDER NUMBER(10);
ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD BQ_ORDER NUMBER(10);  


-------------------------------------------------------------------------------------
---------------------------------  PH-1567 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_BUYER_SETTINGS ADD BUYER_STRIPE_PUBLISH_KEY varchar2(500) NULL;
ALTER TABLE PROC_BUYER_SETTINGS ADD BUYER_STRIPE_SECRET_KEY varchar2(500) NULL;
ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD FEE_REFERENCE_CLIENT_ID varchar2(250) NULL;
ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD FEE_REFERENCE_CLIENT_ID varchar2(250) NULL;
ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD FEE_REFERENCE_CLIENT_ID varchar2(250) NULL;
ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD FEE_REFERENCE_CLIENT_ID varchar2(250) NULL;
ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD FEE_REFERENCE_CLIENT_ID varchar2(250) NULL;

--------------------------------------------------------------------------------------
---------------------------------  PH-1701 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_RFA_EVENTS ADD DISABLE_TOTAL_AMOUNT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFP_EVENTS ADD DISABLE_TOTAL_AMOUNT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFQ_EVENTS ADD DISABLE_TOTAL_AMOUNT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFT_EVENTS ADD DISABLE_TOTAL_AMOUNT NUMBER(1) DEFAULT 0 NOT NULL;


-------------------------------------------------------------------------------------
---------------------------------  PH-1812 -------------------------------------------
--------------------------------------------------------------------------------------

CREATE TABLE PROC_EVENT_SETTINGS 
   (	
    ID VARCHAR2(64 CHAR) NOT NULL , 
	TENANT_ID VARCHAR2(64 CHAR) NOT NULL, 
	MODIFIED_BY VARCHAR2(64 CHAR), 
	MODIFIED_DATE TIMESTAMP (6),
	RFI_CREATE_FRM_BLANK NUMBER(1) DEFAULT 1 NOT NULL ,
	RFI_COPY_FRM_PREV NUMBER(1) DEFAULT 1 NOT NULL ,
	
	RFQ_CREATE_FRM_BLANK NUMBER(1) DEFAULT 1 NOT NULL ,
 	RFQ_COPY_FRM_PREV NUMBER(1) DEFAULT 1 NOT NULL ,
 	
 	RFP_CREATE_FRM_BLANK NUMBER(1) DEFAULT 1 NOT NULL ,
 	RFP_COPY_FRM_PREV NUMBER(1) DEFAULT 1 NOT NULL ,
 	
 	RFT_CREATE_FRM_BLANK NUMBER(1) DEFAULT 1 NOT NULL ,
 	RFT_COPY_FRM_PREV NUMBER(1) DEFAULT 1 NOT NULL ,
 	
 	RFA_CREATE_FRM_BLANK NUMBER(1) DEFAULT 1 NOT NULL ,
 	RFA_COPY_FRM_PREV NUMBER(1) DEFAULT 1 NOT NULL ,
 	
 	RFS_COPY_FRM_PREV NUMBER(1) DEFAULT 1 NOT NULL ,
 	PR_COPY_FRM_PREV NUMBER(1) DEFAULT 1 NOT NULL ,
 	
	 PRIMARY KEY (ID), 
	  CONSTRAINT FK_EVT_SETT_TENANT_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER (BUYER_ID) , 
	  CONSTRAINT FK_EVT_SETT_MODIFIED_BY_ID FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID)
   ); 
  
  
  create index IDX_EVT_SETT_TENANT_ID on PROC_EVENT_SETTINGS ( TENANT_ID ) TABLESPACE PROCV7PRD_IDX;
  
  --------------------------------------------------------------------------------------
---------------------------------  PH-1328 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_FAVOURITE_SUPPLIER MODIFY SUSPEND_REMARK VARCHAR2(700); 
ALTER TABLE PROC_FAVOURITE_SUPPLIER MODIFY BLACKLIST_REMARK VARCHAR2(700);
ALTER TABLE PROC_FAVOURITE_SUPPLIER_STATUS MODIFY BUYER_REMARK VARCHAR2(1000);

-------------------------------------------------------------------------------------
---------------------------------  PH-1483 -------------------------------------------
--------------------------------------------------------------------------------------
  
ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD REJECTION_REMARKS VARCHAR2(200);
ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD REJECTION_REMARKS VARCHAR2(200);
ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD REJECTION_REMARKS VARCHAR2(200);
ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD REJECTION_REMARKS VARCHAR2(200);  
ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD REJECTION_REMARKS VARCHAR2(200);
  
ALTER TABLE PROC_RFI_EVENT_SUPPLIERS ADD IS_REJECTED_AFTER_START NUMBER(1);
ALTER TABLE PROC_RFP_EVENT_SUPPLIERS ADD IS_REJECTED_AFTER_START NUMBER(1);
ALTER TABLE PROC_RFQ_EVENT_SUPPLIERS ADD IS_REJECTED_AFTER_START NUMBER(1);
ALTER TABLE PROC_RFT_EVENT_SUPPLIERS ADD IS_REJECTED_AFTER_START NUMBER(1);
ALTER TABLE PROC_RFA_EVENT_SUPPLIERS ADD IS_REJECTED_AFTER_START NUMBER(1);

-------------------------------------------------------------------------------------
---------------------------------  PH-1641 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_RFA_SUPPLIER_BQ ADD SUPPLIER_BQ_STATUS VARCHAR2(255);
ALTER TABLE PROC_RFP_SUPPLIER_BQ ADD SUPPLIER_BQ_STATUS VARCHAR2(255);
ALTER TABLE PROC_RFQ_SUPPLIER_BQ ADD SUPPLIER_BQ_STATUS VARCHAR2(255);
ALTER TABLE PROC_RFT_SUPPLIER_BQ ADD SUPPLIER_BQ_STATUS VARCHAR2(255);



CREATE TABLE "PROC_RFA_SUPPLIER_CQ"
 (
   ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
   EVENT_ID VARCHAR2(64),
   CQ_ID VARCHAR2(64),
   SUPPLIER_ID VARCHAR2(64),
   SUPPLIER_CQ_STATUS VARCHAR2(255),
   
   CONSTRAINT FK_RFA_EVENT_CQ FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID),
   CONSTRAINT FK_RFA_EVENT_CQ_ID FOREIGN KEY (CQ_ID) REFERENCES PROC_RFA_EVENT_CQ(ID),
   CONSTRAINT FK_CQ_RFA_EVENT_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID)
 );

CREATE TABLE "PROC_RFI_SUPPLIER_CQ"
 (
   ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
   EVENT_ID VARCHAR2(64),
   CQ_ID VARCHAR2(64),
   SUPPLIER_ID VARCHAR2(64),
   SUPPLIER_CQ_STATUS VARCHAR2(255),
   
   CONSTRAINT FK_RFI_EVENT_CQ FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFI_EVENTS(ID),
   CONSTRAINT FK_RFI_EVENT_CQ_ID FOREIGN KEY (CQ_ID) REFERENCES PROC_RFI_EVENT_CQ(ID),
   CONSTRAINT FK_CQ_RFI_EVENT_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID)
 );

CREATE TABLE "PROC_RFP_SUPPLIER_CQ"
 (
   ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
   EVENT_ID VARCHAR2(64),
   CQ_ID VARCHAR2(64),
   SUPPLIER_ID VARCHAR2(64),
   SUPPLIER_CQ_STATUS VARCHAR2(255),
   
   CONSTRAINT FK_RFP_EVENT_CQ FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFP_EVENTS(ID),
   CONSTRAINT FK_RFP_EVENT_CQ_ID FOREIGN KEY (CQ_ID) REFERENCES PROC_RFP_EVENT_CQ(ID),
   CONSTRAINT FK_CQ_RFP_EVENT_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID)
 );

CREATE TABLE "PROC_RFQ_SUPPLIER_CQ"
 (
   ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
   EVENT_ID VARCHAR2(64),
   CQ_ID VARCHAR2(64),
   SUPPLIER_ID VARCHAR2(64),
   SUPPLIER_CQ_STATUS VARCHAR2(255),
   
   CONSTRAINT FK_RFQ_EVENT_CQ FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID),
   CONSTRAINT FK_RFQ_EVENT_CQ_ID FOREIGN KEY (CQ_ID) REFERENCES PROC_RFQ_EVENT_CQ(ID),
   CONSTRAINT FK_CQ_RFQ_EVENT_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID)
 );

CREATE TABLE "PROC_RFT_SUPPLIER_CQ"
 (
   ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
   EVENT_ID VARCHAR2(64),
   CQ_ID VARCHAR2(64),
   SUPPLIER_ID VARCHAR2(64),
   SUPPLIER_CQ_STATUS VARCHAR2(255),
   
   CONSTRAINT FK_RFT_EVENT_CQ FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID),
   CONSTRAINT FK_RFT_EVENT_CQ_ID FOREIGN KEY (CQ_ID) REFERENCES PROC_RFT_EVENT_CQ(ID),
   CONSTRAINT FK_CQ_RFT_EVENT_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID)
 );


--------------------------------------------------------------------------------------
---------------------------------  PH-1705 -------------------------------------------
--------------------------------------------------------------------------------------


SELECT 'INSERT INTO PROC_ID_SETTINGS (ID, ID_DATE_PATTERN, ID_DELIMITER, ID_PREFIX, ID_SEQUENCE, ID_TYPE, ID_PADDING_LENGTH, TENANT_ID, MODIFIED_BY, MODIFIED_DATE, ID_SETTING_TYPE, ID_SETTING_PATTERN) VALUES(''' || BUYER_ID || ''', NULL, NULL, ''PO'', 2, ''PO'', 6, ''' || BUYER_ID  || ''', NULL, NULL, ''COMPANY_LEVEL'', NULL);'
FROM PROC_BUYER 


-------------------------------------------------------------------------------------
---------------------------------  PH-1251 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_PAYMENT_TRANSACTION ADD  EVENT_QUANTITY NUMBER(6);
ALTER TABLE PROC_PAYMENT_TRANSACTION ADD USER_QUANTITY NUMBER(6);

ALTER TABLE PROC_SUPPLIER_SUBSCRIPTION ADD NEXT_SUBSCRIPTION_ID VARCHAR2(64);
ALTER TABLE PROC_SUPPLIER_SUBSCRIPTION ADD CONSTRAINT FK_SUP_NEXT_SUBS_ID FOREIGN KEY (NEXT_SUBSCRIPTION_ID) REFERENCES PROC_SUPPLIER_SUBSCRIPTION (ID);
ALTER TABLE PROC_SUPPLIER_SUBSCRIPTION MODIFY END_DATE TIMESTAMP;
ALTER TABLE PROC_SUPPLIER_SUBSCRIPTION MODIFY START_DATE TIMESTAMP;
ALTER TABLE PROC_SUPPLIER_PACKAGE MODIFY END_DATE TIMESTAMP;
ALTER TABLE PROC_SUPPLIER_PACKAGE MODIFY START_DATE TIMESTAMP;


--------------------------------------------------------------------------------------
---------------------------------  PH-1600 -------------------------------------------
--------------------------------------------------------------------------------------
CREATE TABLE PROC_BUSINESS_COST_MAPPING (
	BUSINESS_UNIT_ID VARCHAR2(64),
	COST_CENTER_ID VARCHAR2(64),
	CONSTRAINT FK_BUSINESS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID)  REFERENCES PROC_BUSINESS_UNIT(ID) ,
	CONSTRAINT FK_COST_CENTER_ID FOREIGN KEY (COST_CENTER_ID)  REFERENCES PROC_COST_CENTER (ID) 
 );

ALTER TABLE PROC_BUSINESS_COST_MAPPING ADD CONSTRAINT FK_BUSINESS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID); 
ALTER TABLE PROC_BUSINESS_COST_MAPPING ADD CONSTRAINT FK_COST_CENTER_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER (ID); 



ALTER TABLE PROC_BUYER_SETTINGS ADD IS_ENA_UNIT_COST_REL NUMBER(1) default 0;

--------------------------------------------------------------------------------------
---------------------------------  PH-1670 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_PRODUCT_CONTRACT ADD EXP_REM_BFR_30_DAY NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_PRODUCT_CONTRACT ADD EXP_REM_BFR_90_DAY NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_PRODUCT_CONTRACT ADD EXP_REM_BFR_180_DAY NUMBER(1) DEFAULT 0 NOT NULL;

CREATE TABLE PROC_PROD_CONT_NOTIFY (
	ID varchar2(64) NOT NULL,
	USER_ID varchar2(64) NOT NULL,
	CONTRACT_ID varchar2(64),
	PRIMARY KEY(ID),
	CONSTRAINT FK_PROD_CONTRACT_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_PROD_CONTT_NOTIFY FOREIGN KEY (CONTRACT_ID) REFERENCES PROC_PRODUCT_CONTRACT(ID));

	
CREATE TABLE PROC_PROD_CONT_REMINDER (
	ID varchar2(64) NOT NULL,
	REMINDER_DATE  DATE NOT NULL,
	REM_INTERVAL NUMBER(3), 
	REMINDER_SENT NUMBER(1),
	CONTRACT_ID varchar2(64),
	PRIMARY KEY(ID),
	CONSTRAINT FK_PROD_CONTRACT_REM FOREIGN KEY (CONTRACT_ID) REFERENCES PROC_PRODUCT_CONTRACT(ID));



--------------------------------------------------------------------------------------
---------------------------------  PH-1933 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_BUSINESS_UNIT ADD PR_ID_SEQUENCE NUMBER(10);
ALTER TABLE PROC_BUSINESS_UNIT ADD PO_ID_SEQUENCE NUMBER(10);
ALTER TABLE PROC_BUSINESS_UNIT ADD RFA_ID_SEQUENCE NUMBER(10);
ALTER TABLE PROC_BUSINESS_UNIT ADD RFI_ID_SEQUENCE NUMBER(10);
ALTER TABLE PROC_BUSINESS_UNIT ADD RFP_ID_SEQUENCE NUMBER(10);
ALTER TABLE PROC_BUSINESS_UNIT ADD RFQ_ID_SEQUENCE NUMBER(10);
ALTER TABLE PROC_BUSINESS_UNIT ADD RFT_ID_SEQUENCE NUMBER(10);
ALTER TABLE PROC_BUSINESS_UNIT ADD SR_ID_SEQUENCE NUMBER(10);
ALTER TABLE PROC_BUSINESS_UNIT ADD BG_ID_SEQUENCE NUMBER(10);


UPDATE PROC_BUSINESS_UNIT SET PR_ID_SEQUENCE = ID_SEQUENCE, PO_ID_SEQUENCE = ID_SEQUENCE, RFA_ID_SEQUENCE = ID_SEQUENCE,
RFI_ID_SEQUENCE = ID_SEQUENCE, RFP_ID_SEQUENCE = ID_SEQUENCE, RFQ_ID_SEQUENCE = ID_SEQUENCE , RFT_ID_SEQUENCE = ID_SEQUENCE, 
SR_ID_SEQUENCE = ID_SEQUENCE, BG_ID_SEQUENCE = ID_SEQUENCE;


--------------------------------------------------------------------------------------
------------------------------------------PH-1405 ------------------------------------  
--------------------------------------------------------------------------------------

ALTER TABLE PROC_ERP_SETUP ADD ENABLE_GRN_CREATE_API NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_ERP_SETUP ADD ENABLE_DO_CREATE_API NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_ERP_SETUP ADD ENABLE_INV_CREATE_API NUMBER(1) DEFAULT 0;

CREATE TABLE PROC_GRN
( ID VARCHAR2(64 CHAR) NOT NULL,
	 GRN_NUMBER VARCHAR2(64 CHAR) NOT NULL,
	 PO_ID VARCHAR2(64 CHAR), 
	 GRN_NAME VARCHAR2(200 CHAR),	
	 REFERENCE_NUMBER VARCHAR2(64 CHAR),
	 DESCRIPTION VARCHAR2(1050 CHAR),
	 BUYER_ID VARCHAR2(64 CHAR),
	 CURRENCY_ID VARCHAR2(64 CHAR),
	 GRN_DECIMAL NUMBER(2),
	 COST_CENTER_ID VARCHAR2(64 CHAR),
	 BUSINESS_UNIT_ID VARCHAR2(64 CHAR),
	 LINE1 VARCHAR2(64 CHAR),
	 LINE2 VARCHAR2(64 CHAR),
	 LINE3 VARCHAR2(64 CHAR),
	 LINE4 VARCHAR2(64 CHAR),
	 LINE5 VARCHAR2(64 CHAR),
	 LINE6 VARCHAR2(64 CHAR),
	 LINE7 VARCHAR2(64 CHAR),
	 SUPPLIER_ID VARCHAR2(64 CHAR),
	 SUPPLIER_NAME VARCHAR2(128 CHAR),
	 SUPPLIER_ADDRESS VARCHAR2(300 CHAR),
	 SUPPLIER_TEL_NO VARCHAR2(55 CHAR),
	 SUPPLIER_FAX_NO VARCHAR2(16 CHAR),
	 SUPPLIER_TAX_NO VARCHAR2(32 CHAR),
	 REMARKS VARCHAR2(1050 CHAR),
	 TERMS_AND_COND VARCHAR2(1000 CHAR),
	 FIELD1_LABEL VARCHAR2(32 CHAR),
	 FIELD2_LABEL VARCHAR2(32 CHAR),
	 FIELD3_LABEL VARCHAR2(32 CHAR),
	 FIELD4_LABEL VARCHAR2(32 CHAR),
	 FIELD5_LABEL VARCHAR2(32 CHAR),
	 FIELD6_LABEL VARCHAR2(32 CHAR),
	 FIELD7_LABEL VARCHAR2(32 CHAR),
	 FIELD8_LABEL VARCHAR2(32 CHAR),
	 FIELD9_LABEL VARCHAR2(32 CHAR),
	 FIELD10_LABEL VARCHAR2(32 CHAR),
	 STATUS VARCHAR2(240 CHAR),
	 TOTAL NUMBER(20,4),
	 TAX_DESCRIPTION VARCHAR2(150 CHAR),  
	 ADDITIONAL_TAX NUMBER(20,4),
	 GRAND_TOTAL NUMBER(20,4),
	 CREATED_DATE TIMESTAMP(6),
	 CREATED_BY VARCHAR2(64 CHAR),  
	 MODIFIED_DATE TIMESTAMP(6),
	 MODIFIED_BY VARCHAR2(64 CHAR),
	 DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR),
	 DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_STATE VARCHAR2(250 CHAR),
	 DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR),
	 DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR),
	 GOODS_RECEIPT_DATE TIMESTAMP(6),
	 RECEIVED_BY VARCHAR2(64 CHAR),  
	 RECEIVED_DATE TIMESTAMP(6),
	 DELIVERY_RECEIVER VARCHAR2(150 CHAR),

	  PRIMARY KEY (ID),
	 	CONSTRAINT FK_GRN_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID),
		CONSTRAINT FK_GRN_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER (BUYER_ID),
		CONSTRAINT FK_GRN_BUYER_CURRENCY FOREIGN KEY (CURRENCY_ID) REFERENCES PROC_CURRENCY (ID),
		CONSTRAINT FK_GRN_COSTCENTER_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER (ID),
		CONSTRAINT FK_GRN_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID),
		CONSTRAINT FK_GRN_SUP_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID),
		CONSTRAINT FK_GRN_CREATED_BY_ID FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID),
		CONSTRAINT FK_GRN_MODIFIED_BY_ID FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID),
		CONSTRAINT FK_GRN_REC_BY_ID FOREIGN KEY (RECEIVED_BY) REFERENCES PROC_USER (ID)
);

 
 
CREATE TABLE PROC_GRN_ITEM
( ID VARCHAR2(64 CHAR) NOT NULL,
	ITEM_NAME VARCHAR2(250 CHAR) NOT NULL,
	ITEM_LEVEL NUMBER(10,0) NOT NULL,
	SUB_ORDER NUMBER(10,0) NOT NULL,
	ITEM_QUANTITY NUMBER(22,6),
	UNIT_PRICE NUMBER(22,6),
	ITEM_DESCRIPTION VARCHAR2(1050 CHAR),
	GRN_ID VARCHAR2(64 CHAR) NOT NULL,
	PARENT_ID VARCHAR2(64 CHAR),
	ITEM_TAX VARCHAR2(20 CHAR),
	TOTAL_AMOUNT NUMBER(22,6),
	TAX_AMOUNT NUMBER(22,6),
	TOTAL_AMT_WITH_TAX NUMBER(22,6),
	BUYER_ID VARCHAR2(64 CHAR) NOT NULL,
	UOM_ID VARCHAR2(64 CHAR),
 	COST_CENTER_ID VARCHAR2(64 CHAR),
	BUSINESS_UNIT_ID VARCHAR2(64 CHAR),
	FIELD1 VARCHAR2(100 CHAR),
	FIELD2 VARCHAR2(100 CHAR),
	FIELD3 VARCHAR2(100 CHAR),
	FIELD4 VARCHAR2(100 CHAR),
	FIELD5 VARCHAR2(100 CHAR),
	FIELD6 VARCHAR2(100 CHAR),
	FIELD7 VARCHAR2(100 CHAR),
	FIELD8 VARCHAR2(100 CHAR),
	FIELD9 VARCHAR2(100 CHAR),
	FIELD10 VARCHAR2(100 CHAR),
	PO_ID VARCHAR2(64 CHAR),
	PO_ITEM_ID VARCHAR2(64 CHAR),
 	DELIVERY_ADDRESS_TITLE VARCHAR2(128 CHAR),
	DELIVERY_ADDRESS_LINE1 VARCHAR2(250 CHAR),
	DELIVERY_ADDRESS_LINE2 VARCHAR2(250 CHAR),
	DELIVERY_ADDRESS_CITY VARCHAR2(250 CHAR),
	DELIVERY_ADDRESS_STATE VARCHAR2(250 CHAR),
	DELIVERY_ADDRESS_ZIP VARCHAR2(32 CHAR),
	DELIVERY_ADDRESS_COUNTRY VARCHAR2(128 CHAR),
	ITEM_RECEIVED NUMBER(22,6),
	PRIMARY KEY (ID),
	CONSTRAINT FK_GRN_ITEM_NOTE_ID FOREIGN KEY (GRN_ID) REFERENCES PROC_GRN (ID),
	CONSTRAINT FK_GRN_ITEM_PARENT_ID FOREIGN KEY (PARENT_ID) REFERENCES PROC_GRN_ITEM (ID),
	CONSTRAINT FK_GRN_ITEM_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES PROC_BUYER (BUYER_ID),
	CONSTRAINT FK_GRN_ITM_UOM_ID FOREIGN KEY (UOM_ID) REFERENCES PROC_BUYER_UOM (ID),
	CONSTRAINT FK_GRN_ITM_COSTCEN_ID FOREIGN KEY (COST_CENTER_ID) REFERENCES PROC_COST_CENTER (ID),
	CONSTRAINT FK_GRN_ITM_BUSS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT (ID),
	CONSTRAINT FK_GRN_ITEM_PO_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO (ID),
	CONSTRAINT FK_GRN_ITEM_PO_ITEM_ID FOREIGN KEY (PO_ITEM_ID) REFERENCES PROC_PO_ITEM (ID)
	);   

CREATE TABLE PROC_GRN_AUDIT 
   (ID VARCHAR2(64 CHAR) NOT NULL , 
	ACTION_TYPE VARCHAR2(255 CHAR) NOT NULL ENABLE, 
	ACTION_DATE TIMESTAMP (6) NOT NULL ENABLE, 
	THE_DESCRIPTION VARCHAR2(3000 CHAR), 
	ACTION_BY VARCHAR2(64 CHAR), 
	BUYER_ID VARCHAR2(64 CHAR), 
	SUPPLIER_ID VARCHAR2(64 CHAR), 
	GRN_ID VARCHAR2(64 CHAR), 
	VISIBILITY_TYPE VARCHAR(255 CHAR),
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_GRN_AUDIT_ACTION_BY FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_GRN_AUDIT_BUYER_ID FOREIGN KEY (BUYER_ID)  REFERENCES PROC_BUYER (BUYER_ID) , 
	 CONSTRAINT FK_GRN_AUDIT_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID) REFERENCES PROC_SUPPLIER (SUPPLIER_ID),
	 CONSTRAINT FK_GRN_AUDIT FOREIGN KEY (GRN_ID) REFERENCES PROC_GRN (ID)
	);

CREATE TABLE "PROC_GRN_REPORT" 
   (ID VARCHAR2(64 CHAR) NOT NULL, 
	FILE_DATA BLOB, 
	FILE_NAME VARCHAR2(500 CHAR),
	GRN_NUMBER VARCHAR2(64 CHAR),
    TENANT_ID VARCHAR2(64 CHAR) NOT NULL, 
	GRN_ID VARCHAR2(64) NOT NULL,
	PRIMARY KEY (ID),
	CONSTRAINT FK_REP_GRN_ID FOREIGN KEY (GRN_ID) REFERENCES PROC_GRN (ID)
    ) ;
    
      
ALTER TABLE PROC_PO ADD  GRN_COUNT NUMBER(3,0);  
ALTER TABLE PROC_PO ADD  GRN_CANCEL_COUNT NUMBER(3,0);  
ALTER TABLE PROC_BUSINESS_UNIT ADD GRN_ID_SEQUENCE NUMBER(10);


CREATE INDEX PROC_SUP_COVER_TO_IDX ON PROC_SUPPLIER_STATES (SUPPLIER_ID);
CREATE INDEX PROC_SUP_STAT_COUNTRY_IDX ON PROC_STATE (COUNTRY_CODE);
CREATE INDEX PROC_SUP_COM_PROF_IDX ON PROC_SUPPLIER_COMPANY_PROFILE (SUPPLIER_ID);	
CREATE INDEX PROC_SUP_FIN_DOC_IDX ON FINANICAL_DOCUMENTS (SUPPLIER_ID);
CREATE INDEX PROC_SUP_OTH_DOC_IDX ON PROC_SUPPLIER_OTHER_DOCS (SUPPLIER_ID);
CREATE INDEX PROC_SUP_NAIC_COD_IDX ON PROC_SUPP_NAICS_CODE_MAPPING (SUPPLIER_ID);



-------------------------------------------------------------------------------------
-------------------------------  FINANSHERE -----------------------------------------
-------------------------------------------------------------------------------------
ALTER TABLE PROC_INVOICE ADD FINANCE_REQUEST NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_INVOICE ADD PAYMENT_TERMS NUMBER(3);

ALTER TABLE PROC_PO ADD PAYMENT_TERMS NUMBER(3);
ALTER TABLE PROC_PO ADD FINANCE_REQUEST NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_INVOICE_REPORT MODIFY TENANT_ID VARCHAR2(64) NULL;


ALTER TABLE PROC_PO ADD PAYMENT_TERM_DAYS NUMBER(3);
ALTER TABLE PROC_INVOICE ADD PAYMENT_TERM_DAYS NUMBER(3);


--------------------------------------------------------------------------------------
---------------------------------  PH-2082 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_PAYMENT_TERMS ADD PAYMENT_CODE VARCHAR2(8);


 CREATE TABLE PROC_PAYMENT_TERMS 
   (
   	ID VARCHAR2(64 CHAR) NOT NULL ,
	BUYER_ID VARCHAR2(64 CHAR) NOT NULL,	
	PAYMENT_CODE VARCHAR2(8) NOT NULL,	
	DESCRIPTION VARCHAR2(500 CHAR) NOT NULL,
	PAYMENT_DAYS NUMBER(4) NOT NULL,	
 	STATUS VARCHAR2(12 CHAR) NOT NULL,
 	CREATED_DATE TIMESTAMP (6), 
	CREATED_BY VARCHAR2(64 CHAR),
 	MODIFIED_DATE TIMESTAMP (6), 
	MODIFIED_BY VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_PAY_TRANS_BUYER_ID FOREIGN KEY (BUYER_ID)  REFERENCES PROC_BUYER (BUYER_ID) , 
	CONSTRAINT FK_PAY_TERM_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID),
	CONSTRAINT FK_PAY_TERM_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID)
   );
   

 ALTER TABLE PROC_PR_TEMPLATE ADD PAYMENT_TERMES VARCHAR2(64 CHAR);
 ALTER TABLE PROC_PR_TEMPLATE ADD CONSTRAINT FK_PR_TMPLATE_PAY_TERMS FOREIGN KEY (PAYMENT_TERMES) REFERENCES PROC_PAYMENT_TERMS(ID);

 ALTER TABLE PROC_PR ADD PAYMENT_TERMES VARCHAR2(64 CHAR);
 ALTER TABLE PROC_PR ADD CONSTRAINT FK_PR_PAYMENT_TERMS FOREIGN KEY (PAYMENT_TERMES) REFERENCES PROC_PAYMENT_TERMS(ID);
 ALTER TABLE PROC_PR ADD PAYMENT_TERM_DAYS NUMBER(3);
 
 ALTER TABLE PROC_PO ADD PAYMENT_TERMES VARCHAR2(64 CHAR);
 ALTER TABLE PROC_PO ADD CONSTRAINT FK_PO_PAYMENT_TERMS FOREIGN KEY (PAYMENT_TERMES) REFERENCES PROC_PAYMENT_TERMS(ID);
 
 ALTER TABLE PROC_INVOICE ADD PAYMENT_TERM VARCHAR2(550 CHAR)
 ALTER TABLE PROC_INVOICE ADD PAYMENT_TERMES VARCHAR2(64 CHAR);
 ALTER TABLE PROC_INVOICE ADD CONSTRAINT FK_INVOICE_PAYMENT_TERMS FOREIGN KEY (PAYMENT_TERMES) REFERENCES PROC_PAYMENT_TERMS(ID);
  
--------------------------------------------------------------------------------------
---------------------------------  PH-2060 -------------------------------------------
--------------------------------------------------------------------------------------
 
CREATE TABLE PROC_USER_RFS_TEMP_MAPPING (
	USER_ID VARCHAR2(64),
	SOURCING_TEMPLATE_ID VARCHAR2(64),
	CONSTRAINT FK_SOURCING_USER_ID FOREIGN KEY (USER_ID)  REFERENCES PROC_USER(ID) ,
	CONSTRAINT FK_SOURCING_TEMPLATE_ID FOREIGN KEY (SOURCING_TEMPLATE_ID)  REFERENCES PROC_SOURCING_FORM_TEMPLATE (ID) 
 );
 

--------------------------------------------------------------------------------------
---------------------------------  PH-1979 -------------------------------------------
--------------------------------------------------------------------------------------
 
ALTER TABLE PROC_DO ADD TRACKING_NUMBER VARCHAR2(128); 
ALTER TABLE PROC_DO ADD COURIER_NAME VARCHAR2(64);

--------------------------------------------------------------------------------------
------------------------------------------PH-1937------------------------------------  
--------------------------------------------------------------------------------------

ALTER TABLE PROC_SUPPLIER ADD FORMER_COMPANY_NAME VARCHAR2(128);   
ALTER TABLE PROC_SUPPLIER ADD FORMER_REGISTRATION_NUMBER VARCHAR2(128); 




--------------------------------------------------------------------------------------
---------------------------------  PH-2167 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_SOURCING_FORM_REQ ADD ESTIMATED_BUDGET NUMBER(20,4)

ALTER TABLE PROC_RFA_EVENTS ADD ESTIMATED_BUDGET NUMBER(20,4);

ALTER TABLE PROC_RFQ_EVENTS ADD ESTIMATED_BUDGET NUMBER(20,4);

ALTER TABLE PROC_RFT_EVENTS ADD ESTIMATED_BUDGET NUMBER(20,4);

ALTER TABLE PROC_RFP_EVENTS ADD ESTIMATED_BUDGET NUMBER(20,4);

ALTER TABLE PROC_RFI_EVENTS ADD ESTIMATED_BUDGET NUMBER(20,4);


-------------------------------------------------------------------------------------
---------------------------------  PH-2168 -------------------------------------------
--------------------------------------------------------------------------------------
 
CREATE TABLE PROC_PROCUREMENT_METHOD 
   (
   	ID VARCHAR2(64 CHAR) NOT NULL ,
	BUYER_ID VARCHAR2(64 CHAR) NOT NULL,	
	PROCUREMENT_METHOD VARCHAR2(64 CHAR) NOT NULL,	
	DESCRIPTION VARCHAR2(400 CHAR),
 	STATUS VARCHAR2(12 CHAR) NOT NULL,
 	CREATED_DATE TIMESTAMP (6), 
	CREATED_BY VARCHAR2(64 CHAR),
 	MODIFIED_DATE TIMESTAMP (6), 
	MODIFIED_BY VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_PM_BUYER_ID FOREIGN KEY (BUYER_ID)  REFERENCES PROC_BUYER (BUYER_ID) , 
	CONSTRAINT FK_PM_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID),
	CONSTRAINT FK_PM_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID)
   );
   
   CREATE TABLE PROC_PROCUREMENT_CATEGORIES 
   (
   	ID VARCHAR2(64 CHAR) NOT NULL ,
	BUYER_ID VARCHAR2(64 CHAR) NOT NULL,	
	PROCUREMENT_CATEGORIES VARCHAR2(64 CHAR) NOT NULL,	
	DESCRIPTION VARCHAR2(400 CHAR),
 	STATUS VARCHAR2(12 CHAR) NOT NULL,
 	CREATED_DATE TIMESTAMP (6), 
	CREATED_BY VARCHAR2(64 CHAR),
 	MODIFIED_DATE TIMESTAMP (6), 
	MODIFIED_BY VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_PC_BUYER_ID FOREIGN KEY (BUYER_ID)  REFERENCES PROC_BUYER (BUYER_ID) , 
	CONSTRAINT FK_PC_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID),
	CONSTRAINT FK_PC_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID)
   );
   
   
   
ALTER TABLE PROC_SOURCING_FORM_REQ ADD PROCUREMENT_METHOD VARCHAR2(64);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD CONSTRAINT FK_RFS_PROC_METHOD_ID FOREIGN KEY (PROCUREMENT_METHOD) REFERENCES PROC_PROCUREMENT_METHOD(ID);

ALTER TABLE PROC_SOURCING_FORM_REQ ADD PROCUREMENT_CATEGORIES VARCHAR2(64);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD CONSTRAINT FK_RFS_PROC_CATEGORIES_ID FOREIGN KEY (PROCUREMENT_CATEGORIES) REFERENCES PROC_PROCUREMENT_CATEGORIES(ID);


ALTER TABLE PROC_RFA_EVENTS ADD PROCUREMENT_METHOD VARCHAR2(64);
ALTER TABLE PROC_RFA_EVENTS ADD CONSTRAINT FK_RFA_PROC_METHOD_ID FOREIGN KEY (PROCUREMENT_METHOD) REFERENCES PROC_PROCUREMENT_METHOD(ID);

   
ALTER TABLE PROC_RFQ_EVENTS ADD PROCUREMENT_METHOD VARCHAR2(64);
ALTER TABLE PROC_RFQ_EVENTS ADD CONSTRAINT FK_RFQ_PROC_METHOD_ID FOREIGN KEY (PROCUREMENT_METHOD) REFERENCES PROC_PROCUREMENT_METHOD(ID);

ALTER TABLE PROC_RFT_EVENTS ADD PROCUREMENT_METHOD VARCHAR2(64);
ALTER TABLE PROC_RFT_EVENTS ADD CONSTRAINT FK_RFT_PROC_METHOD_ID FOREIGN KEY (PROCUREMENT_METHOD) REFERENCES PROC_PROCUREMENT_METHOD(ID);

ALTER TABLE PROC_RFP_EVENTS ADD PROCUREMENT_METHOD VARCHAR2(64);
ALTER TABLE PROC_RFP_EVENTS ADD CONSTRAINT FK_RFP_PROC_METHOD_ID FOREIGN KEY (PROCUREMENT_METHOD) REFERENCES PROC_PROCUREMENT_METHOD(ID);

ALTER TABLE PROC_RFI_EVENTS ADD PROCUREMENT_METHOD VARCHAR2(64);
ALTER TABLE PROC_RFI_EVENTS ADD CONSTRAINT FK_RFI_PROC_METHOD_ID FOREIGN KEY (PROCUREMENT_METHOD) REFERENCES PROC_PROCUREMENT_METHOD(ID);


ALTER TABLE PROC_RFA_EVENTS ADD PROCUREMENT_CATEGORIES VARCHAR2(64);
ALTER TABLE PROC_RFA_EVENTS ADD CONSTRAINT FK_RFA_PROC_CATEGORIES_ID FOREIGN KEY (PROCUREMENT_CATEGORIES) REFERENCES PROC_PROCUREMENT_CATEGORIES(ID);


ALTER TABLE PROC_RFQ_EVENTS ADD PROCUREMENT_CATEGORIES VARCHAR2(64);
ALTER TABLE PROC_RFQ_EVENTS ADD CONSTRAINT FK_RFQ_PROC_CATEGORIES_ID FOREIGN KEY (PROCUREMENT_CATEGORIES) REFERENCES PROC_PROCUREMENT_CATEGORIES(ID);

ALTER TABLE PROC_RFT_EVENTS ADD PROCUREMENT_CATEGORIES VARCHAR2(64);
ALTER TABLE PROC_RFT_EVENTS ADD CONSTRAINT FK_RFT_PROC_CATEGORIES_ID FOREIGN KEY (PROCUREMENT_CATEGORIES) REFERENCES PROC_PROCUREMENT_CATEGORIES(ID);

ALTER TABLE PROC_RFP_EVENTS ADD PROCUREMENT_CATEGORIES VARCHAR2(64);
ALTER TABLE PROC_RFP_EVENTS ADD CONSTRAINT FK_RFP_PROC_CATEGORIES_ID FOREIGN KEY (PROCUREMENT_CATEGORIES) REFERENCES PROC_PROCUREMENT_CATEGORIES(ID);

ALTER TABLE PROC_RFI_EVENTS ADD PROCUREMENT_CATEGORIES VARCHAR2(64);
ALTER TABLE PROC_RFI_EVENTS ADD CONSTRAINT FK_RFI_PROC_CATEGORIES_ID FOREIGN KEY (PROCUREMENT_CATEGORIES) REFERENCES PROC_PROCUREMENT_CATEGORIES(ID);


  --------------------------------------------------------------------------------------
---------------------------------  PH-2124 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_RFX_TEMPLATE ADD IS_ENABLE_SUSPEND_APPROVAL NUMBER(1) DEFAULT 0;
 
 
ALTER TABLE PROC_RFX_TEMPLATE ADD IS_VISIBLE_SUSPEND_APPROVAL NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFX_TEMPLATE ADD IS_READ_ONLY_SUSPEND_APPROVAL NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFX_TEMPLATE ADD IS_OPTIONAL_SUSPEND_APPROVAL NUMBER(1) DEFAULT 0;	
 

CREATE TABLE PROC_TEMP_SUSPENSION_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	RFX_TEMPLATE_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_TMPL_SUSPENSION_TMPL_ID FOREIGN KEY (RFX_TEMPLATE_ID) REFERENCES PROC_RFX_TEMPLATE(ID)
  );

  
CREATE TABLE PROC_TEMP_SUSPENSION_APPR_USER (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_REMARKS VARCHAR2(500 CHAR),
	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
	APPROVAL_STATUS VARCHAR2(255 CHAR),
	ACTION_DATE TIMESTAMP (6),
	NEXT_REMINDER_TIME TIMESTAMP (6), 
	REMINDER_COUNT NUMBER(2),
	TEMPLATE_APPROVAL_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_TMPL_SUSPENSION_APPROVAL_ID FOREIGN KEY (TEMPLATE_APPROVAL_ID) REFERENCES PROC_TEMP_SUSPENSION_APPROVAL(ID)
  );

  
  
CREATE TABLE PROC_RFA_SUSPENSION_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	EVENT_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFA_EVE_ID_SUSP_APPR FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID)
);


CREATE TABLE PROC_RFI_SUSPENSION_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	EVENT_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFI_EVE_ID_SUSP_APPR FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFI_EVENTS(ID)
);

CREATE TABLE PROC_RFP_SUSPENSION_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	EVENT_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFP_EVE_ID_SUSP_APPR FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFP_EVENTS(ID)
);

CREATE TABLE PROC_RFQ_SUSPENSION_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	EVENT_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFQ_EVE_ID_SUSP_APPR FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID)
);

CREATE TABLE PROC_RFT_SUSPENSION_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	EVENT_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFT_EVE_ID_SUSP_APPR FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID)
);



CREATE TABLE PROC_RFA_SUSPENSION_APPR_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	RFA_EVENT_SUSP_APPR_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_RFA_SUSP_APPR_USER_ID FOREIGN KEY (RFA_EVENT_SUSP_APPR_ID) REFERENCES PROC_RFA_SUSPENSION_APPROVAL(ID) 
 )
 
 
CREATE TABLE PROC_RFI_SUSPENSION_APPR_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	RFI_EVENT_SUSP_APPR_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_RFI_SUSP_APPR_USER_ID FOREIGN KEY (RFI_EVENT_SUSP_APPR_ID) REFERENCES PROC_RFI_SUSPENSION_APPROVAL(ID) 
 )
 
 CREATE TABLE PROC_RFP_SUSPENSION_APPR_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	RFP_EVENT_SUSP_APPR_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_RFP_SUSP_APPR_USER_ID FOREIGN KEY (RFP_EVENT_SUSP_APPR_ID) REFERENCES PROC_RFP_SUSPENSION_APPROVAL(ID) 
 )
 
CREATE TABLE PROC_RFQ_SUSPENSION_APPR_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	RFQ_EVENT_SUSP_APPR_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_RFQ_SUSP_APPR_USER_ID FOREIGN KEY (RFQ_EVENT_SUSP_APPR_ID) REFERENCES PROC_RFQ_SUSPENSION_APPROVAL(ID) 
 )
 
CREATE TABLE PROC_RFT_SUSPENSION_APPR_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	RFT_EVENT_SUSP_APPR_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_RFT_SUSP_APPR_USER_ID FOREIGN KEY (RFT_EVENT_SUSP_APPR_ID) REFERENCES PROC_RFT_SUSPENSION_APPROVAL(ID) 
 )
 
 
ALTER TABLE PROC_RFA_EVENTS ADD IS_ENABLE_SUSPENSION_APPROVAL NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFI_EVENTS ADD IS_ENABLE_SUSPENSION_APPROVAL NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFP_EVENTS ADD IS_ENABLE_SUSPENSION_APPROVAL NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFQ_EVENTS ADD IS_ENABLE_SUSPENSION_APPROVAL NUMBER(1) DEFAULT 0;
ALTER TABLE PROC_RFT_EVENTS ADD IS_ENABLE_SUSPENSION_APPROVAL NUMBER(1) DEFAULT 0;

CREATE TABLE PROC_RFA_SUSP_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_RFA_SUSP_COMM_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID)
);

CREATE TABLE PROC_RFI_SUSP_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_RFI_SUSP_COMM_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFI_EVENTS(ID)
);
		
CREATE TABLE PROC_RFP_SUSP_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_RFP_SUSP_COMM_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFP_EVENTS(ID)
);
	
CREATE TABLE PROC_RFQ_SUSP_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_RFQ_SUSP_COMM_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID)
);

CREATE TABLE PROC_RFT_SUSP_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_RFT_SUSP_COMM_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID)
);


--------------------------------------------------------------------------------------
---------------------------------  PH-2147 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_SOURCING_FORM_REQ ADD CONCLUDE_REMARKS VARCHAR2(500);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD CONCLUDE_DATE TIMESTAMP;

ALTER TABLE PROC_SOURCING_FORM_REQ ADD CONCLUDE_BY VARCHAR2(64);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD CONSTRAINT FK_RFS_CONCLUDE_BY_ID FOREIGN KEY (CONCLUDE_BY) REFERENCES PROC_USER (ID);


 --------------------------------------------------------------------------------------
---------------------------------  PH-2157 -------------------------------------------
--------------------------------------------------------------------------------------

CREATE TABLE PROC_GROUP_CODE (
	ID VARCHAR2(64 CHAR)  NOT NULL,
	GROUP_CODE VARCHAR2(64 CHAR)  NOT NULL,
	DESCRIPTION VARCHAR2(128 CHAR) ,
	STATUS VARCHAR2(255 CHAR)  NOT NULL,
	CREATED_DATE TIMESTAMP (6) NOT NULL,
	CREATED_BY VARCHAR2(64 CHAR) NOT NULL,
	MODIFIED_DATE TIMESTAMP (6),
	MODIFIED_BY VARCHAR2(64 CHAR),
	TENANT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_GRPCODE_BUYER_ID FOREIGN KEY (TENANT_ID)  REFERENCES PROC_BUYER (BUYER_ID),
	CONSTRAINT FK_GRPCODE_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER (ID), 
	CONSTRAINT FK_GRPCODE_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER (ID)
);


ALTER TABLE PROC_BUYER_SETTINGS ADD IS_ENA_UNIT_GRPCOD_REL NUMBER(1) default 0;
	
CREATE TABLE PROC_BUSNS_GROUP_CD_MAPPING (
	BUSINESS_UNIT_ID VARCHAR2(64),
	GROUP_CODE_ID VARCHAR2(64),
	CONSTRAINT FK_BU_BUSINESS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID)  REFERENCES PROC_BUSINESS_UNIT(ID) ,
	CONSTRAINT FK_BU_GROUP_CODE_ID FOREIGN KEY (GROUP_CODE_ID)  REFERENCES PROC_GROUP_CODE (ID) 
 );

 
ALTER TABLE  PROC_RFA_EVENTS ADD GROUP_CODE VARCHAR2(64);
ALTER TABLE  PROC_RFI_EVENTS ADD GROUP_CODE VARCHAR2(64);
ALTER TABLE  PROC_RFP_EVENTS ADD GROUP_CODE VARCHAR2(64);
ALTER TABLE  PROC_RFQ_EVENTS ADD GROUP_CODE VARCHAR2(64);
ALTER TABLE  PROC_RFT_EVENTS ADD GROUP_CODE VARCHAR2(64);

ALTER TABLE PROC_RFA_EVENTS ADD CONSTRAINT FK_RFA_GROUP_CODE_ID FOREIGN KEY (GROUP_CODE) REFERENCES PROC_GROUP_CODE (ID);
ALTER TABLE PROC_RFI_EVENTS ADD CONSTRAINT FK_RFI_GROUP_CODE_ID FOREIGN KEY (GROUP_CODE) REFERENCES PROC_GROUP_CODE (ID);
ALTER TABLE PROC_RFP_EVENTS ADD CONSTRAINT FK_RFP_GROUP_CODE_ID FOREIGN KEY (GROUP_CODE) REFERENCES PROC_GROUP_CODE (ID);
ALTER TABLE PROC_RFQ_EVENTS ADD CONSTRAINT FK_RFQ_GROUP_CODE_ID FOREIGN KEY (GROUP_CODE) REFERENCES PROC_GROUP_CODE (ID);
ALTER TABLE PROC_RFT_EVENTS ADD CONSTRAINT FK_RFT_GROUP_CODE_ID FOREIGN KEY (GROUP_CODE) REFERENCES PROC_GROUP_CODE (ID);


ALTER TABLE PROC_SOURCING_FORM_REQ RENAME COLUMN GROUP_CODE TO GROUP_CODE_OLD;
ALTER TABLE PROC_SOURCING_FORM_REQ ADD GROUP_CODE VARCHAR2(64);
ALTER TABLE PROC_SOURCING_FORM_REQ ADD CONSTRAINT FK_RFS_GROUP_CODE_ID FOREIGN KEY (GROUP_CODE) REFERENCES PROC_GROUP_CODE (ID);



SELECT
	'INSERT INTO PROC_SOURCING_TEMPLATE_FIELD (ID, DEFAULT_VALUE, FIELD_NAME, IS_OPTIONAL, IS_READ_ONLY, IS_VISIBLE, TENANT_ID, TEMPLATE_ID) VALUES(NEW_UUID(), NULL, ''GROUP_CODE'', 0, 0, 1, ''' || TENANT_ID || ''', ''' || ID || ''');'
FROM
	PROC_SOURCING_FORM_TEMPLATE
WHERE
	TENANT_ID = '2c9fde456a979a59016af8e15d4a7d6f'

	
	
SELECT
	'INSERT INTO PROC_SOURCING_TEMPLATE_FIELD (ID, DEFAULT_VALUE, FIELD_NAME, IS_OPTIONAL, IS_READ_ONLY, IS_VISIBLE, TENANT_ID, TEMPLATE_ID) VALUES(NEW_UUID(), NULL, ''GROUP_CODE'', 0, 0, 0, ''' || TENANT_ID || ''', ''' || ID || ''');'
FROM
	PROC_SOURCING_FORM_TEMPLATE
WHERE
	TENANT_ID <> '2c9fde456a979a59016af8e15d4a7d6f'	
	

SELECT
	'INSERT INTO PROC_TEMPLATE_FIELD (ID, DEFAULT_VALUE, FIELD_NAME, IS_OPTIONAL, IS_READ_ONLY, IS_VISIBLE, TENANT_ID, TEMPLATE_ID) VALUES(NEW_UUID(), NULL, ''GROUP_CODE'', 0, 0, 1, ''' || TENANT_ID || ''', ''' || ID || ''');'
FROM
	PROC_RFX_TEMPLATE
WHERE
	TENANT_ID = '2c9fde456a979a59016af8e15d4a7d6f'

	
	
SELECT
	'INSERT INTO PROC_TEMPLATE_FIELD (ID, DEFAULT_VALUE, FIELD_NAME, IS_OPTIONAL, IS_READ_ONLY, IS_VISIBLE, TENANT_ID, TEMPLATE_ID) VALUES(NEW_UUID(), NULL, ''GROUP_CODE'', 0, 0, 0, ''' || TENANT_ID || ''', ''' || ID || ''');'
FROM
	PROC_RFX_TEMPLATE
WHERE
	TENANT_ID <> '2c9fde456a979a59016af8e15d4a7d6f'	
	
--------------------------------------------------------------------------------------
---------------------------------  PH-2177 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE  PROC_SUPPLIER ADD BUYER_ACCOUNT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE  PROC_SUPPLIER ADD IS_ONBOARDING_FORM NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE  PROC_SUPPLIER ADD FORM_SUBMITED_DATE TIMESTAMP;
ALTER TABLE  PROC_SUPPLIER ADD FORM_SUBMITED_BY VARCHAR2(64);
ALTER TABLE  PROC_SUPPLIER ADD CONSTRAINT FK_SUP_SFB_USER_SUB_BY FOREIGN KEY (FORM_SUBMITED_BY) REFERENCES PROC_USER(ID);

 --------------------------------------------------------------------------------------
---------------------------------  PH-2183 -------------------------------------------
--------------------------------------------------------------------------------------
 
ALTER  TABLE PROC_AUCTION_RULES ADD PRE_SET_SAME_PRE_BID_SUPP  NUMBER(1) DEFAULT 0	

--------------------------------------------------------------------------------------
---------------------------------  PH-2177 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE  PROC_SUPPLIER ADD BUYER_ACCOUNT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE  PROC_SUPPLIER ADD IS_ONBOARDING_FORM NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE  PROC_SUPPLIER ADD FORM_SUBMITED_DATE TIMESTAMP;
ALTER TABLE  PROC_SUPPLIER ADD FORM_SUBMITED_BY VARCHAR2(64);
ALTER TABLE  PROC_SUPPLIER ADD CONSTRAINT FK_SUP_SFB_USER_SUB_BY FOREIGN KEY (FORM_SUBMITED_BY) REFERENCES PROC_USER(ID);

-------------------------------------------------------------------------------------
---------------------------------  PH-2185 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_RFA_EVALUATOR_USER ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFA_EVALUATOR_USER ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFA_EVALUATOR_USER ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFA_EVALUATOR_USER ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFA_EVALUATOR_USER ADD FILE_SIZE Number(10,0);

ALTER TABLE PROC_RFP_EVALUATOR_USER ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFP_EVALUATOR_USER ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFP_EVALUATOR_USER ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFP_EVALUATOR_USER ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFP_EVALUATOR_USER ADD FILE_SIZE Number(10,0);


ALTER TABLE PROC_RFI_EVALUATOR_USER ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFI_EVALUATOR_USER ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFI_EVALUATOR_USER ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFI_EVALUATOR_USER ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFI_EVALUATOR_USER ADD FILE_SIZE Number(10,0);


ALTER TABLE PROC_RFT_EVALUATOR_USER ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFT_EVALUATOR_USER ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFT_EVALUATOR_USER ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFT_EVALUATOR_USER ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFT_EVALUATOR_USER ADD FILE_SIZE Number(10,0);


ALTER TABLE PROC_RFQ_EVALUATOR_USER ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFQ_EVALUATOR_USER ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFQ_EVALUATOR_USER ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFQ_EVALUATOR_USER ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFQ_EVALUATOR_USER ADD FILE_SIZE Number(10,0);


ALTER TABLE PROC_RFA_ENVELOP ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFA_ENVELOP ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFA_ENVELOP ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFA_ENVELOP ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFA_ENVELOP ADD FILE_SIZE NUMBER(10,0);


ALTER TABLE PROC_RFT_ENVELOP ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFT_ENVELOP ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFT_ENVELOP ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFT_ENVELOP ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFT_ENVELOP ADD FILE_SIZE NUMBER(10,0);


ALTER TABLE PROC_RFI_ENVELOP ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFI_ENVELOP ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFI_ENVELOP ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFI_ENVELOP ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFI_ENVELOP ADD FILE_SIZE NUMBER(10,0);


ALTER TABLE PROC_RFP_ENVELOP ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFP_ENVELOP ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFP_ENVELOP ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFP_ENVELOP ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFP_ENVELOP ADD FILE_SIZE NUMBER(10,0);
 

ALTER TABLE PROC_RFQ_ENVELOP ADD FILE_DATA BLOB;

ALTER TABLE PROC_RFQ_ENVELOP ADD FILE_NAME varchar2(500);

ALTER TABLE PROC_RFQ_ENVELOP ADD UPLOAD_DATE TIMESTAMP;

ALTER TABLE PROC_RFQ_ENVELOP ADD CONTENT_TYPE varchar2(160);

ALTER TABLE PROC_RFQ_ENVELOP ADD FILE_SIZE NUMBER(10,0);

ALTER TABLE PROC_RFQ_EVENTS ADD ALLOW_DISQ_SUP_DOWNLOAD NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFT_EVENTS ADD ALLOW_DISQ_SUP_DOWNLOAD NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFP_EVENTS ADD ALLOW_DISQ_SUP_DOWNLOAD NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFI_EVENTS ADD ALLOW_DISQ_SUP_DOWNLOAD NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFA_EVENTS ADD ALLOW_DISQ_SUP_DOWNLOAD NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFX_TEMPLATE ADD ALLOW_DISQ_SUP_DOWNLOAD NUMBER(1) DEFAULT 0 NOT NULL;


--------------------------------------------------------------------------------------
---------------------------------  PH-2165 -------------------------------------------
--------------------------------------------------------------------------------------
       
        
CREATE TABLE PROC_TAT_REPORT (
	ID VARCHAR2(64) NOT NULL,
	BUSINESS_UNIT VARCHAR2(150),
	COST_CENTER VARCHAR2(150),
	GROUP_CODE VARCHAR2(150),
	REQUEST_OWNER VARCHAR2(400),
	SOURCING_FORM_NAME VARCHAR2(250),
	FORM_DESCRIPTION VARCHAR2(1250),
	FORM_ID VARCHAR2(128),
	REQUEST_STATUS VARCHAR2(255),
	PROCUREMENT_METHOD VARCHAR2(150),
	PROCUREMENT_CATEGORIES VARCHAR2(150),
	SAP_PR_ID VARCHAR2(128),
	REQ_CREATED_DATE TIMESTAMP,
	REQ_FINISHED_DATE TIMESTAMP,
	AVAILABLE_BUDGET NUMBER(20,4),
	ESTIMATED_BUDGET NUMBER(20,4), 
	REQ_REJECTED_DATE TIMESTAMP,
	FIRST_APPROVED_DATE TIMESTAMP,
	LAST_APPROVED_DATE TIMESTAMP,
	REQ_APPROVAL_DAYS_COUNT NUMBER(5,2),
	EVENT_TYPE VARCHAR2(255),
	EVENT_ID VARCHAR2(64),
	STATUS VARCHAR2(255),
	EVENT_NAME VARCHAR2(350),
	EVENT_CREATED_DATE TIMESTAMP, 
	EVENT_OWNER VARCHAR2(420),
	EVENT_REFERANCE_NUMBER VARCHAR2(128),
	INVITED_SUPPLIER_COUNT NUMBER(4),
	ACCEPTED_SUPPLIER_COUNT NUMBER(4),
	SUBMITED_SUPPLIER_COUNT NUMBER(4),
	EV_FINISH_DATE TIMESTAMP, 
	EV_FIRST_APPROVED_DATE TIMESTAMP, 
	EV_LAST_APPROVED_DATE TIMESTAMP, 
	EV_REJECTED_DATE TIMESTAMP, 
	EV_APPROVAL_DAYS_COUNT NUMBER(5,2),
	EVENT_START TIMESTAMP,
	EVENT_END TIMESTAMP,
	EVENT_PUBLISH_DATE TIMESTAMP,
	EVENT_FIRST_MEETING_DATE TIMESTAMP,
	EVENT_OPEN_DURATION NUMBER(5,2),
	FIRST_ENVELOP_OPEN_DATE TIMESTAMP,
	EVALUATION_COMPLETED_DATE TIMESTAMP,
	UNMSKING_DATE TIMESTAMP,
	EVENT_CONCLUDE_DATE TIMESTAMP,
	EVENT_AWARD_DATE TIMESTAMP,
	AWARDED_SUPPLIER VARCHAR2(4000),
	SAP_PO_ID VARCHAR2(255),
	SAP_PO_CREATED_DATE TIMESTAMP,
	AWARD_VALUE VARCHAR2(4000),
	PAPER_APPROVAL_DAYS_COUNT NUMBER(5,2),
	OVERALL_TAT NUMBER(7,2),
	TANANT_ID VARCHAR2(128),
	REQUEST_GEN_ID VARCHAR2(64),
	EVENT_GEN_ID VARCHAR2(64),
	BASE_CURRENCY VARCHAR2(150),
	REQ_DECIMAL VARCHAR2(8),
	EVENT_DECIMAL  VARCHAR2(8),
	EV_FINISHED_DATE TIMESTAMP, 
	PRIMARY KEY (ID)
);
   
--------------------------------------------------------------------------------------
---------------------------------  PH-2375 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_SUPPLIER  ADD APPROVED_DATE TIMESTAMP;
UPDATE PROC_SUPPLIER  SET SUPPLIER_STATUS = 'SUSPENDED' WHERE SUPPLIER_STATUS = 'SUSPPENDED';




--------------------------------------------------------------------------------------
---------------------------------  PH-2289 -------------------------------------------
--------------------------------------------------------------------------------------

UPDATE PROC_RFT_EVENT_AUDIT SET TENANT_ID = NULL WHERE ID IN (
	SELECT ID FROM PROC_RFT_EVENT_AUDIT WHERE ACTION_TYPE = 'Transfer' AND TENANT_ID IS NOT NULL 
)

UPDATE PROC_RFA_EVENT_AUDIT SET TENANT_ID = NULL WHERE ID IN (
	SELECT ID FROM PROC_RFA_EVENT_AUDIT WHERE ACTION_TYPE = 'Transfer' AND TENANT_ID IS NOT NULL 
)

UPDATE PROC_RFP_EVENT_AUDIT SET TENANT_ID = NULL WHERE ID IN (
	SELECT ID FROM PROC_RFP_EVENT_AUDIT WHERE ACTION_TYPE = 'Transfer' AND TENANT_ID IS NOT NULL 
)

UPDATE PROC_RFQ_EVENT_AUDIT SET TENANT_ID = NULL WHERE ID IN (
	SELECT ID FROM PROC_RFQ_EVENT_AUDIT WHERE ACTION_TYPE = 'Transfer' AND TENANT_ID IS NOT NULL 
)
--------------------------------------------------------------------------------------
---------------------------------  PH-2431 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_PRODUCT_CONTRACT ADD BASE_CURRENCY_ID VARCHAR2(64 CHAR);
ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONSTRAINT FK_PROD_CONTRACT_CURRENCY FOREIGN KEY (BASE_CURRENCY_ID) REFERENCES PROC_CURRENCY (ID);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD GROUP_CODE_ID VARCHAR2(64 CHAR);
ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONSTRAINT FK_PC_GRP_CODE_ID FOREIGN KEY (GROUP_CODE_ID)  REFERENCES PROC_GROUP_CODE (ID);

CREATE TABLE PROC_CONTRACT_DOCUMENTS (	
    ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
    CONTRACT_ID VARCHAR2(64 CHAR) NOT NULL,
	CONTENT_TYPE VARCHAR2(160 CHAR), 
	FILE_DATA BLOB NOT NULL, 
	FILE_NAME VARCHAR2(500 CHAR) NOT NULL,
	FILE_SIZE NUMBER(10,0), 
	UPLOAD_DATE TIMESTAMP (6) NOT NULL,
	TENANT_ID VARCHAR2(64) NOT NULL,
	PRIMARY KEY (ID)
);
ALTER TABLE PROC_CONTRACT_DOCUMENTS ADD CONSTRAINT FK_CONTRACT_DOC_CON_ID FOREIGN KEY (CONTRACT_ID) REFERENCES PROC_PRODUCT_CONTRACT (ID);
CREATE INDEX IDX_CONTRACT_DOC_TENANT ON PROC_CONTRACT_DOCUMENTS (TENANT_ID);

ALTER TABLE PROC_BUSINESS_UNIT ADD CTR_ID_SEQUENCE NUMBER(10,0);
ALTER TABLE PROC_PRODUCT_CONTRACT MODIFY CONTRACT_VALUE NUMBER(25,6);
ALTER TABLE PROC_PRODUCT_CONTRACT MODIFY CONTRACT_REFERENCE_NUMBER VARCHAR2(64);
ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONTRACT_DECIMAL VARCHAR2(64 CHAR) NOT NULL DEFAULT '2';
ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONTRACT_ID VARCHAR2(64 CHAR);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM MODIFY UNIT_PRICE NUMBER(25,6);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM MODIFY QUANTITY NUMBER(25,6);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM MODIFY BALANCE_QUANTITY NUMBER(25,6);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD BRAND VARCHAR2(64 CHAR);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD TAX NUMBER(22,6);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD PRODUCT_ITEM_TYPE VARCHAR2(255);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD TOTAL_AMOUNT NUMBER(22,6);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD TAX_AMOUNT NUMBER(22,6);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD TOTAL_AMT_WITH_TAX NUMBER(22,6);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD ITEM_NAME VARCHAR2(250);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD ITEM_DESCRIPTION VARCHAR2(1050);

 
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD  FREE_ITEM_TEXT_ENTERED NUMBER(1)
 -- Data Patching
UPDATE PROC_PRODUCT_CONTRACT_ITEM pci SET ITEM_NAME = (SELECT PRODUCT_NAME FROM PROC_PRODUCT_ITEM WHERE ID = pci.PRODUCT_ITEM_ID  ), FREE_ITEM_TEXT_ENTERED = 0 WHERE PRODUCT_ITEM_ID IS NOT NULL;
UPDATE PROC_PRODUCT_CONTRACT c set c.GROUP_CODE_ID = (SELECT gc.ID FROM PROC_GROUP_CODE gc WHERE gc.GROUP_CODE = c.GROUP_CODE AND c.TENANT_ID = gc.TENANT_ID);
 
 
CREATE INDEX IDX_USR_ROL_ACL_MAP on PROC_ROLE_ACL_MAPPING ( ROLE_ID ) TABLESPACE PROCV7PRD_IDX;


--------------------------------------------------------------------------------------
---------------------------------  ADD FOR EVENT REPORT -------------------------------------------
--------------------------------------------------------------------------------------
CREATE INDEX IDX_RFQ_EVE_CRE_DT on PROC_RFQ_EVENTS ( CREATED_DATE  )
CREATE INDEX IDX_RFQ_SUP_BQ_EVT_SUP  ON  PROC_RFQ_SUPPLIER_BQ  (EVENT_ID, SUPPLIER_ID) 
CREATE INDEX IDX_RFP_EVE_CRE_DT on PROC_RFP_EVENTS ( CREATED_DATE  )
CREATE INDEX IDX_RFP_SUP_BQ_EVT_SUP  ON  PROC_RFP_SUPPLIER_BQ  (EVENT_ID, SUPPLIER_ID) 
CREATE INDEX IDX_RFT_EVE_CRE_DT on PROC_RFT_EVENTS ( CREATED_DATE  )
CREATE INDEX IDX_RFT_SUP_BQ_EVT_SUP  ON  PROC_RFT_SUPPLIER_BQ  (EVENT_ID, SUPPLIER_ID) 
CREATE INDEX IDX_RFA_EVE_CRE_DT on PROC_RFA_EVENTS ( CREATED_DATE  )
CREATE INDEX IDX_RFA_SUP_BQ_EVT_SUP  ON  PROC_RFA_SUPPLIER_BQ  (EVENT_ID, SUPPLIER_ID) 
CREATE INDEX IDX_RFI_EVE_CRE_DT on PROC_RFI_EVENTS ( CREATED_DATE  )


CREATE INDEX IDX_RFA_EVN_SUP_MSG on PROC_RFA_EVNT_MESG_SUPP (SUPPLIER_ID )
CREATE INDEX IDX_RFT_EVN_SUP_MSG on PROC_RFT_EVNT_MESG_SUPP (SUPPLIER_ID )
CREATE INDEX IDX_RFQ_EVN_SUP_MSG on PROC_RFQ_EVNT_MESG_SUPP (SUPPLIER_ID )
CREATE INDEX IDX_RFP_EVN_SUP_MSG on PROC_RFP_EVNT_MESG_SUPP (SUPPLIER_ID )
CREATE INDEX IDX_RFI_EVN_SUP_MSG on PROC_RFI_EVNT_MESG_SUPP (SUPPLIER_ID )

CREATE INDEX IDX_RFA_EVN_MSG_SUP_EVN_ID on PROC_RFA_EVENT_MESSAGE (EVENT_ID);
CREATE INDEX IDX_RFT_EVN_MSG_SUP_EVN_ID on PROC_RFT_EVENT_MESSAGE (EVENT_ID);
CREATE INDEX IDX_RFQ_EVN_MSG_SUP_EVN_ID on PROC_RFQ_EVENT_MESSAGE (EVENT_ID);
CREATE INDEX IDX_RFP_EVN_MSG_SUP_EVN_ID on PROC_RFP_EVENT_MESSAGE (EVENT_ID);
CREATE INDEX IDX_RFI_EVN_MSG_SUP_EVN_ID on PROC_RFI_EVENT_MESSAGE (EVENT_ID);


--------------------------------------------------------------------------------------
---------------------------------  PH-2690 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_PO ADD IS_ENABLE_APPROVAL_ROUTE NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_PO ADD IS_ENABLE_APPROVAL_REMINDER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_PO ADD REMINDER_HOURS NUMBER(2);
ALTER TABLE PROC_PO ADD REMINDER_COUNT NUMBER(2);
ALTER TABLE PROC_PO ADD IS_NOTIFY_EVENT_OWNER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_PO ADD IS_REVISED NUMBER(1) DEFAULT 0 NOT NULL;


ALTER TABLE PROC_PO_AUDIT ADD SUMMARY_SNAPSHOT BLOB;


CREATE TABLE PROC_PO_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	PO_ID VARCHAR2(64 CHAR),
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	PRIMARY KEY (ID),
	CONSTRAINT FK_PO_APPROVAL_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO(ID)
);

CREATE TABLE PROC_PO_APPROVAL_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	PO_APPROVAL_ID VARCHAR2(64 CHAR) NOT NULL ,
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_PO_APPROVAL_USER_AP_ID FOREIGN KEY (PO_APPROVAL_ID) REFERENCES PROC_PO_APPROVAL(ID) 
 );
  
CREATE TABLE PROC_PO_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	PO_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_PO_COMMENT_ID FOREIGN KEY (PO_ID) REFERENCES PROC_PO(ID)
);
	
CREATE INDEX IDX_RFA_EVT_SUP_BQ_SUP_ID on PROC_RFA_SUPPLIER_BQ ( SUPPLIER_ID  )

CREATE INDEX IDX_RFA_EVT_BQ_SUP_ITM  ON  PROC_RFA_EVENT_BQ_SUP_ITEM  (EVENT_ID, SUPPLIER_ID) 

=======================================================
PH-2842
=======================================================

CREATE TABLE PROC_PUR_ORD_DOCUMENTS 
   (	
    "ID" VARCHAR2(64 CHAR) NOT NULL , 
	"DOC_TYPE" VARCHAR2(32 CHAR), 
	"PO_ID" VARCHAR2(64 CHAR), 
	"CONTENT_TYPE" VARCHAR2(160 CHAR), 
	"DESCRIPTION" VARCHAR2(300 CHAR), 
	"FILE_DATA" BLOB, 
	"FILE_NAME" VARCHAR2(500 CHAR), 
	"FILE_SIZE" NUMBER(10,0), 
	"UPLOAD_DATE" TIMESTAMP (6),
	"IS_INTERNAL" NUMBER(1),
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "FK_PUR_ORD_DOCUMENT" FOREIGN KEY ("PO_ID") REFERENCES "PROC_PO" ("ID")
	  );

ALTER TABLE PROC_PO ADD REVISE_PO_DETAILS CLOB;
ALTER TABLE PROC_PO ADD REVISE_JUSTIFICATION VARCHAR2(550 CHAR);
ALTER TABLE PROC_PO ADD OLD_STATUS VARCHAR2(32 CHAR);

CREATE TABLE PROC_PO_SNAPSHOT_DOCS 
   (	
    "ID" VARCHAR2(64 CHAR) NOT NULL , 
	"DOC_TYPE" VARCHAR2(32 CHAR), 
	"PO_ID" VARCHAR2(64 CHAR), 
	"CONTENT_TYPE" VARCHAR2(160 CHAR), 
	"DESCRIPTION" VARCHAR2(300 CHAR), 
	"FILE_DATA" BLOB, 
	"FILE_NAME" VARCHAR2(500 CHAR), 
	"FILE_SIZE" NUMBER(10,0), 
	"UPLOAD_DATE" TIMESTAMP (6),
	"IS_INTERNAL" NUMBER(1),
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "FK_PUR_ORD_SNAP_DOCUMENT" FOREIGN KEY ("PO_ID") REFERENCES "PROC_PO" ("ID")
	  );


--------------------------------------------------------------------------------------
---------------------------------  PH-2723 -------------------------------------------
--------------------------------------------------------------------------------------

CREATE TABLE PROC_SUP_PERFORM_TEMPLATE (
	ID VARCHAR2(64),
	TEMPLATE_NAME VARCHAR2(100),
	TEMPLATE_DESCRIPTION VARCHAR2(300),
	TENANT_ID VARCHAR2(64),	
	CREATED_BY VARCHAR2(64),
	CREATED_DATE TIMESTAMP,
	MODIFIED_BY VARCHAR2(64),
	MODIFIED_DATE TIMESTAMP,
	TEMPLATE_STATUS VARCHAR2(255),
	PROCUREMENT_CATEGORY_ID VARCHAR2(64),
	IS_PROCMT_CATEGORY_VISIBLE NUMBER(1) DEFAULT 0,
	IS_PROCMT_CATEGORY_DISABLED NUMBER(1) DEFAULT 0,
	IS_PROCMT_CATEGORY_OPTIONAL NUMBER(1) DEFAULT 0,
	MAXIMUM_SCORE NUMBER(3,0),
	
	PRIMARY KEY (ID),
	CONSTRAINT FK_SP_TMPLATE_BUYER_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID),
	CONSTRAINT FK_SP_TEMPLATE_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SP_TEMPLATE_MODIFIED_BY FOREIGN KEY (MODIFIED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SP_TEMPL_PROC_CAT_ID FOREIGN KEY (PROCUREMENT_CATEGORY_ID) REFERENCES PROC_PROCUREMENT_CATEGORIES(ID)
) ;

  CREATE TABLE PROC_SCORE_RATING 
   (
    ID VARCHAR2(64 CHAR) NOT NULL, 
	CREATED_DATE TIMESTAMP NOT NULL , 
	CREATED_BY VARCHAR2(64 CHAR) NOT NULL , 
	MODIFIED_DATE TIMESTAMP, 
	MODIFIED_BY VARCHAR2(64 CHAR), 
	MINIMUM_SCORE NUMBER(3),
	MAXIMUM_SCORE NUMBER(3),
	RATING NUMBER(2), 
	DESCRIPTION VARCHAR2(16 CHAR),
	STATUS VARCHAR2(64),
	TENANT_ID VARCHAR2(64 CHAR), 
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_SCORE_CREATED_BY FOREIGN KEY (CREATED_BY)
	  REFERENCES PROC_USER (ID) , 
	 CONSTRAINT FK_SCORE_MODIFIED_BY FOREIGN KEY (MODIFIED_BY)
	  REFERENCES PROC_USER (ID),
	  CONSTRAINT FK_SCORE_RATING_TENANT_ID FOREIGN KEY (TENANT_ID)
	  REFERENCES PROC_BUYER (BUYER_ID)
   );
   
CREATE TABLE PROC_USER_SP_TEMP_MAPPING (
	USER_ID VARCHAR2(64),
	SUPP_PRFMC_TEMPLATE_ID VARCHAR2(64),
	CONSTRAINT FK_SP_TMPLT_USER_ID FOREIGN KEY (USER_ID)  REFERENCES PROC_USER(ID) ,
	CONSTRAINT FK_SP_TMPLT_TEMPLATE_ID FOREIGN KEY (SUPP_PRFMC_TEMPLATE_ID)  REFERENCES PROC_SUP_PERFORM_TEMPLATE (ID) 
);

CREATE TABLE PROC_SP_TMPLATE_CRITERIA (
	ID VARCHAR2(64),
	CRITERIA_NAME VARCHAR2(120),
	DESCRIPTION VARCHAR2(320),
	CRITERIA_LEVEL NUMBER(10,0) NOT NULL,
	CRITERIA_ORDER NUMBER(10,0) NOT NULL,
	MAXIMUM_SCORE NUMBER(3,0),
	WEIGHTAGE NUMBER(5,2),
	ALLW_TO_UPDATE_SECT_WEIGHTAGE NUMBER(1) DEFAULT 0,
	TEMPLATE_ID VARCHAR2(64),
	PARENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SP_TEMP_CRTR_TEMP_ID FOREIGN KEY (TEMPLATE_ID) REFERENCES PROC_SUP_PERFORM_TEMPLATE(ID),
	CONSTRAINT FK_SP_TEMP_CRTR_PARENT_ID FOREIGN KEY (PARENT_ID) REFERENCES PROC_SP_TMPLATE_CRITERIA(ID)
) ;

CREATE TABLE PROC_SUPPLIER_PERFORMANCE_FORM (
	ID VARCHAR2(64),
	FORM_ID VARCHAR2(64) NOT NULL,
	FORM_NAME VARCHAR2(70) NOT NULL,
	REFERENCE_NUMBER VARCHAR2(64),
	REFERENCE_NAME VARCHAR2(200),
	TEMPLATE_ID VARCHAR2(64) NOT NULL,
	FORM_OWNER_ID VARCHAR2(64),
	CREATED_BY_ID VARCHAR2(64),
	CREATED_DATE TIMESTAMP,
	EVENT_ID VARCHAR2(65),
	EVENT_TYPE VARCHAR2(255),
	AWARDED_SUPPLIER_ID VARCHAR2(64),
	FORM_STATUS VARCHAR2(255),
	PROCUREMENT_CATEGORY_ID VARCHAR2(64),
	BUSINESS_UNIT_ID VARCHAR2(64),
	EVALUATION_START_DATE TIMESTAMP,
	EVALUATION_END_DATE TIMESTAMP,
	OVERALL_SCORE NUMBER(5,2),
	SCORE_RATING_ID VARCHAR2(64),
	CONCLUDE_DATE TIMESTAMP,
	EVALUATION_DURATION NUMBER(3),
	RECURRENCE_EVALUATION NUMBER(3),
	NO_OF_RECURRENCE NUMBER(3),
	REF_FORM_ID,
	PRIMARY KEY (ID),
	CONSTRAINT FK_SP_FORM_TEMP_ID FOREIGN KEY (TEMPLATE_ID) REFERENCES PROC_SUP_PERFORM_TEMPLATE(ID),
	CONSTRAINT FK_SP_FORM_OWNER_ID FOREIGN KEY (FORM_OWNER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SP_FORM_CREATED_BY_ID FOREIGN KEY (CREATED_BY_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SPF_AWARDED_SUP_ID FOREIGN KEY (AWARDED_SUPPLIER_ID) REFERENCES PROC_SUPPLIER(SUPPLIER_ID),
	CONSTRAINT FK_SPF_PROCMT_CAT_ID FOREIGN KEY (PROCUREMENT_CATEGORY_ID) REFERENCES PROC_PROCUREMENT_CATEGORIES(ID),
	CONSTRAINT FK_SP_FORM_BU_ID FOREIGN KEY (BUSINESS_UNIT_ID) REFERENCES PROC_BUSINESS_UNIT(ID),
	CONSTRAINT FK_SPF_SCORE_RATING_ID FOREIGN KEY (SCORE_RATING_ID) REFERENCES PROC_SCORE_RATING(ID),
	CONSTRAINT FK_SP_FORM_REF_FORM_ID FOREIGN KEY (REF_FORM_ID) REFERENCES PROC_SUPPLIER_PERFORMANCE_FORM(ID)
) ;

CREATE TABLE PROC_SUPP_PERF_EVAL_USER (
	ID VARCHAR2(64) NOT NULL,
	EVALUATOR_ID VARCHAR2(64) NOT NULL,
	EVALUATION_STATUS VARCHAR2(255) NOT NULL,
	FORM_ID VARCHAR2(64) NOT NULL,
	CREATED_DATE TIMESTAMP NOT NULL,
	OVERALL_SCORE NUMBER(5,2),
	SCORE_RATING_ID VARCHAR2(64),
	PREVIEW_DATE TIMESTAMP,
	EVALUATE_DATE TIMESTAMP,
	APPROVED_DATE TIMESTAMP,
	ENABLE_PER_EVALUATION_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL,
	PRIMARY KEY (ID),
	CONSTRAINT FK_SP_EVAL_USER_ID FOREIGN KEY (EVALUATOR_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SP_EVAL_FORM_ID FOREIGN KEY (FORM_ID) REFERENCES PROC_SUPPLIER_PERFORMANCE_FORM(ID),
	CONSTRAINT FK_SP_EVAL_SCORE_RATING_ID FOREIGN KEY (SCORE_RATING_ID) REFERENCES PROC_SCORE_RATING(ID)
) ;

CREATE TABLE PROC_SUP_PER_CRITERIA (
	ID VARCHAR2(64) NOT NULL,
	CRITERIA_NAME VARCHAR2(120) NOT NULL,
	DESCRIPTION VARCHAR2(320),
	CRITERIA_LEVEL NUMBER(10,0) NOT NULL,
	CRITERIA_ORDER NUMBER(10,0) NOT NULL,
	MAXIMUM_SCORE NUMBER(3,0),
	WEIGHTAGE NUMBER(5,2),
	EVALUATOR_SCORE NUMBER(3,0),
	EVALUATOR_TOTAL_SCORE NUMBER(5,2),
	SUP_PER_CRT_USR_ID VARCHAR2(64) NOT NULL,
	FORM_ID VARCHAR2(64),
	PARENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SP_CR_PER_EVAL_USR_ID FOREIGN KEY (SUP_PER_CRT_USR_ID) REFERENCES PROC_SUPP_PERF_EVAL_USER(ID),
	CONSTRAINT FK_SP_CRT_FORM_ID FOREIGN KEY (FORM_ID) REFERENCES PROC_SUPPLIER_PERFORMANCE_FORM(ID),
	CONSTRAINT FK_SP_CRTR_PARENT_ID FOREIGN KEY (PARENT_ID) REFERENCES PROC_SUP_PER_CRITERIA(ID)
) ;

CREATE TABLE PROC_PER_EVALUATION_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	SP_EVAL_USER_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_PER_EVAL_APPR_SP_EVAL_ID FOREIGN KEY (SP_EVAL_USER_ID) REFERENCES PROC_SUPP_PERF_EVAL_USER(ID)
);
 
 CREATE TABLE PROC_PER_EVAL_APPROVAL_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	PER_EVALUATION_APPROVAL_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	PRIMARY KEY (ID),
	CONSTRAINT FK_PER_EVAL_APPR_USER_APP_ID FOREIGN KEY (PER_EVALUATION_APPROVAL_ID) REFERENCES PROC_PER_EVALUATION_APPROVAL(ID) 
 );

 CREATE TABLE PROC_SUP_PERFORMANCE_REMINDER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	EVENT_REMINDER_DATE TIMESTAMP (6),
 	REM_INTERVAL NUMBER(3,0),
 	INTERVAL_TYPE VARCHAR2(255 CHAR),
	REMINDER_SENT NUMBER(1) DEFAULT 0, 	
 	FORM_ID VARCHAR2(64 CHAR) NOT NULL ,
 	
	PRIMARY KEY (ID),
	CONSTRAINT FK_SP_REM_FORM_ID FOREIGN KEY (FORM_ID) REFERENCES PROC_SUPPLIER_PERFORMANCE_FORM(ID) 
 );

CREATE TABLE PROC_SUP_PERFORMANCE_AUDIT (
 	ID VARCHAR2(64 CHAR) NOT NULL,
 	ACTION_BY VARCHAR2(64 CHAR),
 	ACTION_DATE TIMESTAMP (6), 
 	ACTION_TYPE VARCHAR2(255 CHAR), 
 	DESCRIPTION VARCHAR2(3000 CHAR),
 	SUMMARY_SNAPSHOT BLOB, 
	FORM_ID VARCHAR2(64 CHAR) NOT NULL ,
	HAS_SNAPSHOT NUMBER(1,0) NOT NULL DEFAULT 0,
	
	PRIMARY KEY (ID),
	CONSTRAINT FK_SP_AUDIT_ACT_BY_ID FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_SP_AUDIT_FORM_ID FOREIGN KEY (FORM_ID) REFERENCES PROC_SUPPLIER_PERFORMANCE_FORM(ID) 
);
 
ALTER TABLE PROC_SUP_PERFORM_TEMPLATE ADD IS_DETAIL_COMPLETED NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_SUP_PERFORM_TEMPLATE ADD IS_PER_CRITERIA_COMPLETED NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD IS_RECURRENCE_EVALUATION NUMBER(1,0) DEFAULT 0 NOT NULL;

CREATE TABLE PROC_SUP_PER_FORM_CRITERIA (
	ID VARCHAR2(64) NOT NULL,
	CRITERIA_NAME VARCHAR2(120) NOT NULL,
	DESCRIPTION VARCHAR2(320),
	CRITERIA_LEVEL NUMBER(10,0) NOT NULL,
	CRITERIA_ORDER NUMBER(10,0) NOT NULL,
	MAXIMUM_SCORE NUMBER(3,0),
	WEIGHTAGE NUMBER(5,2),
	ALLW_TO_UPDATE_SECT_WEIGHTAGE NUMBER(1) DEFAULT 0,
	FORM_ID VARCHAR2(64) NOT NULL,
	PARENT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_SP_FRM_CRT_FORM_ID FOREIGN KEY (FORM_ID) REFERENCES PROC_SUPPLIER_PERFORMANCE_FORM(ID),
	CONSTRAINT FK_SP_FRM_CRTR_PARENT_ID FOREIGN KEY (PARENT_ID) REFERENCES PROC_SUP_PER_FORM_CRITERIA(ID)
) ;
 

ALTER TABLE PROC_SUP_PER_CRITERIA ADD EVALUATOR_COMMENTS VARCHAR2(128);

ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD CONCLUDE_REMARKS VARCHAR2(250 CHAR);
 		
CREATE TABLE PROC_SPF_EVAL_APP_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVALUATOR_USER_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_SPF_COMM_EVAL_USER_ID FOREIGN KEY (EVALUATOR_USER_ID) REFERENCES PROC_SUPP_PERF_EVAL_USER(ID)
);
 
ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD RECURRENCE_EXECUTED NUMBER(3) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_SUP_PER_FORM_CRITERIA ADD TOTAL_SCORE NUMBER(3);

ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD OLD_FORM_STATUS VARCHAR2(255 CHAR);

ALTER TABLE PROC_SUPP_PERF_EVAL_USER ADD OLD_EVALUATION_STATUS VARCHAR2(255 CHAR);

ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD TENANT_ID VARCHAR2(64 CHAR) NOT NULL;
ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD CONSTRAINT FK_SP_FORM_BUYER_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID);

ALTER TABLE PROC_SUPP_PERF_EVAL_USER ADD TENANT_ID VARCHAR2(64 CHAR) NOT NULL;
ALTER TABLE PROC_SUPP_PERF_EVAL_USER ADD CONSTRAINT FK_SP_EVAL_USR_BUYER_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER(BUYER_ID);


ALTER TABLE PROC_ERP_SETUP ADD ENABLE_SUPLIER_PERFORM_PUSH NUMBER(1) DEFAULT 0 NOT NULL;

-- ******** IMPORTANT
-- Enable ENABLE_SUPLIER_PERFORM_PUSH for FGV in PRODUCTION in table PROC_ERP_SETUP
-- ******** IMPORTANT

ALTER TABLE PROC_SUP_PERFORMANCE_AUDIT ADD HAS_SNAPSHOT NUMBER(1,0) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD REF_FORM_ID VARCHAR2(64 CHAR);
ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD CONSTRAINT FK_SP_FORM_REF_FORM_ID FOREIGN KEY (REF_FORM_ID) REFERENCES PROC_SUPPLIER_PERFORMANCE_FORM(ID);

UPDATE PROC_SUPPLIER_PERFORMANCE_FORM set RECURRENCE_EXECUTED = 0 WHERE RECURRENCE_EXECUTED is NULL

ALTER TABLE PROC_BUSINESS_UNIT ADD SP_ID_SEQUENCE NUMBER(10,0);


ALTER TABLE PROC_SUP_PERFORMANCE_AUDIT ADD SHOW_TO_OWNER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_SUP_PERFORMANCE_AUDIT ADD SHOW_TO_EVALUATOR NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_SUP_PERFORMANCE_AUDIT ADD SHOW_TO_APPROVER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_SUP_PERFORMANCE_AUDIT ADD SHOW_SNAPSHOT_TO_OWNER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_SUP_PERFORMANCE_AUDIT ADD SHOW_SNAPSHOT_TO_EVALUATOR NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_SUP_PERFORMANCE_AUDIT ADD SHOW_SNAPSHOT_TO_APPROVER NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_SUP_PERFORMANCE_AUDIT ADD FORM_EVAL_USER_ID VARCHAR2(64 CHAR);
ALTER TABLE PROC_SUP_PERFORMANCE_AUDIT ADD CONSTRAINT FK_SP_AUDIT_EVAL_USER_ID FOREIGN KEY (FORM_EVAL_USER_ID) REFERENCES PROC_SUPP_PERF_EVAL_USER(ID);


ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM MODIFY REFERENCE_NUMBER VARCHAR2(64) NULL;
ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM MODIFY REFERENCE_NAME VARCHAR2(200) NULL;
ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM MODIFY EVENT_ID VARCHAR2(65) NULL;
ALTER TABLE PROC_SUPPLIER_PERFORMANCE_FORM MODIFY EVENT_TYPE VARCHAR2(255) NULL;


ALTER TABLE PROC_BUSINESS_UNIT ADD SPM_INTEGRATION NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_SUP_PER_FORM_CRITERIA ADD AVG_SCORE NUMBER(5,2) DEFAULT 0 NOT NULL;
ALTER  TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD IS_SUP_PER_DETAIL_COMPLETED NUMBER(1) DEFAULT 0 NOT NULL;
ALTER  TABLE PROC_SUPPLIER_PERFORMANCE_FORM ADD IS_SUMMARY_COMPLETED NUMBER(1) DEFAULT 0 NOT NULL;

--------------------------------------------------------------------------------------
---------------------------------  PH-2652 -------------------------------------------
--------------------------------------------------------------------------------------

ALTER TABLE PROC_RFX_TEMPLATE ADD IS_ENABLE_AWARD_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFX_TEMPLATE ADD IS_VISIBLE_AWARD_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFX_TEMPLATE ADD IS_READ_ONLY_AWARD_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFX_TEMPLATE ADD IS_OPTIONAL_AWARD_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFT_EVENTS ADD IS_ENABLE_AWARD_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFA_EVENTS ADD IS_ENABLE_AWARD_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFQ_EVENTS ADD IS_ENABLE_AWARD_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFP_EVENTS ADD IS_ENABLE_AWARD_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL;


---------------------------------  Add new Award Status to event -------------------------------------------
ALTER TABLE PROC_RFA_EVENTS ADD AWARD_STATUS VARCHAR2(255 CHAR);

ALTER TABLE PROC_RFQ_EVENTS ADD AWARD_STATUS VARCHAR2(255 CHAR);

ALTER TABLE PROC_RFP_EVENTS ADD AWARD_STATUS VARCHAR2(255 CHAR);

ALTER TABLE PROC_RFT_EVENTS ADD AWARD_STATUS VARCHAR2(255 CHAR);

---------------------------------  To set the contract creator with created by -------------------------------------------
ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONTRACT_CREATOR VARCHAR2(64 CHAR);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONSTRAINT FK_PROD_CONTRACT_CONTRACT_CREATOR FOREIGN KEY (CONTRACT_CREATOR) REFERENCES PROC_USER(ID); 

UPDATE PROC_PRODUCT_CONTRACT set CONTRACT_CREATOR = CREATED_BY where CONTRACT_CREATOR is NULL

CREATE TABLE PROC_TEMP_AWARD_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	RFX_TEMPLATE_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_TMPL_AWARD_TMPL_ID FOREIGN KEY (RFX_TEMPLATE_ID) REFERENCES PROC_RFX_TEMPLATE(ID)
  );

  
CREATE TABLE PROC_TEMP_AWARD_APPR_USER (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_REMARKS VARCHAR2(500 CHAR),
	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
	APPROVAL_STATUS VARCHAR2(255 CHAR),
	ACTION_DATE TIMESTAMP (6),
	NEXT_REMINDER_TIME TIMESTAMP (6), 
	REMINDER_COUNT NUMBER(2),
	TEMPLATE_APPROVAL_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_TMPL_AWARD_APPROVAL_ID FOREIGN KEY (TEMPLATE_APPROVAL_ID) REFERENCES PROC_TEMP_AWARD_APPROVAL(ID)
  );

CREATE TABLE PROC_RFT_AWARD_APPR_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	RFT_EVENT_AWARD_APPR_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_RFT_AWARD_APPR_USER_ID FOREIGN KEY (RFT_EVENT_AWARD_APPR_ID) REFERENCES PROC_RFT_AWARD_APPROVAL(ID) 
 );

CREATE TABLE PROC_RFT_AWARD_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	EVENT_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFT_EVE_ID_AWARD_APPR FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID)
);



CREATE TABLE PROC_RFQ_AWARD_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	EVENT_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFQ_EVE_ID_AWARD_APPR FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID)
);

CREATE TABLE PROC_RFQ_AWARD_APPR_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	RFQ_EVENT_AWARD_APPR_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_RFQ_AWARD_APPR_USER_ID FOREIGN KEY (RFQ_EVENT_AWARD_APPR_ID) REFERENCES PROC_RFQ_AWARD_APPROVAL(ID) 
 );

CREATE TABLE PROC_RFP_AWARD_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	EVENT_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFP_EVE_ID_AWARD_APPR FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFP_EVENTS(ID)
);

CREATE TABLE PROC_RFP_AWARD_APPR_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	RFP_EVENT_AWARD_APPR_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_RFP_AWARD_APPR_USER_ID FOREIGN KEY (RFP_EVENT_AWARD_APPR_ID) REFERENCES PROC_RFP_AWARD_APPROVAL(ID) 
 );

CREATE TABLE PROC_RFA_AWARD_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL,
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL ENABLE,
	APPROVAL_TYPE VARCHAR2(255 CHAR),
	IS_DONE NUMBER(1,0) NOT NULL ENABLE,
	ACTIVE NUMBER(1,0), 
	IS_ESCALATED NUMBER(1,0), 
	EVENT_ID VARCHAR2(64 CHAR),
	PRIMARY KEY (ID),
	CONSTRAINT FK_RFA_EVE_ID_AWARD_APPR FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID)
);

CREATE TABLE PROC_RFA_AWARD_APPR_USER (
 	ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_REMARKS VARCHAR2(500 CHAR), 
 	USER_ID VARCHAR2(64 CHAR) NOT NULL , 
 	APPROVAL_STATUS VARCHAR2(255 CHAR), 
	ACTION_DATE TIMESTAMP (6), 
	NEXT_REMINDER_TIME TIMESTAMP (6),
	REMINDER_COUNT NUMBER(2),
	
	RFA_EVENT_AWARD_APPR_ID VARCHAR2(64 CHAR) NOT NULL ,
	
	 PRIMARY KEY (ID),
	 CONSTRAINT FK_RFA_AWARD_APPR_USER_ID FOREIGN KEY (RFA_EVENT_AWARD_APPR_ID) REFERENCES PROC_RFA_AWARD_APPROVAL(ID) 
 );

 CREATE TABLE PROC_RFA_AWARD_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_RFA_AWARD_COMM_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFA_EVENTS(ID)
);

CREATE TABLE PROC_RFP_AWARD_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_RFP_AWARD_COMM_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFP_EVENTS(ID)
);
	
CREATE TABLE PROC_RFQ_AWARD_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_RFQ_AWARD_COMM_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFQ_EVENTS(ID)
);

CREATE TABLE PROC_RFT_AWARD_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	CREATED_BY VARCHAR2(64),
	EVENT_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	APPROVAL_USER_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	
	CONSTRAINT FK_RFT_AWARD_COMM_ID FOREIGN KEY (EVENT_ID) REFERENCES PROC_RFT_EVENTS(ID)
);


--------------------------------------------------------------------------------------
---------------------------------  PH-2691 -------------------------------------------
--------------------------------------------------------------------------------------
CREATE TABLE PROC_AGREEMENT_TYPE (
	ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	AGREEMENT_TYPE VARCHAR2(8 CHAR) NOT NULL ENABLE, 
	DESCRIPTION VARCHAR2(250 CHAR), 
	STATUS VARCHAR2(255 CHAR), 
	CREATED_BY_ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	CREATED_DATE TIMESTAMP (6) NOT NULL ENABLE, 
	MODIFIED_BY_ID VARCHAR2(64 CHAR), 
	MODIFIED_DATE TIMESTAMP (6), 
	TENANT_ID VARCHAR2(64), 
	PRIMARY KEY (ID), 
	CONSTRAINT FK_AGR_TYPE_CREATED_BY FOREIGN KEY (CREATED_BY_ID) REFERENCES PROC_USER (ID) ENABLE, 
	CONSTRAINT FK_AGR_TYPE_MODIFIED_BY FOREIGN KEY (MODIFIED_BY_ID) REFERENCES PROC_USER (ID) ENABLE 
	);

CREATE TABLE PROC_BUSNS_AGR_TYP_MAPPING (
	BUSINESS_UNIT_ID VARCHAR2(64),
	AGREEMENT_TYPE_ID VARCHAR2(64),
	CONSTRAINT FK_BUSNS_UNIT_ID FOREIGN KEY (BUSINESS_UNIT_ID)  REFERENCES PROC_BUSINESS_UNIT(ID) ,
	CONSTRAINT FK_AGREEMENT_TYPE_ID FOREIGN KEY (AGREEMENT_TYPE_ID)  REFERENCES PROC_AGREEMENT_TYPE (ID) 
 );
 
 	
ALTER TABLE PROC_PRODUCT_CONTRACT ADD EVENT_ID VARCHAR2(64);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONTRACT_NAME VARCHAR2(250);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD PROCUREMENT_CATEGORIES VARCHAR2(64);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD SAP_CONTRACT_NO VARCHAR2(12);

UPDATE PROC_PRODUCT_CONTRACT set SAP_CONTRACT_NO = CONTRACT_REFERENCE_NUMBER where  SAP_CONTRACT_NO is null and VALIDATE_CONVERSION(CONTRACT_REFERENCE_NUMBER AS NUMBER) = 1 AND LENGTH(CONTRACT_REFERENCE_NUMBER) = 12

ALTER TABLE PROC_PRODUCT_CONTRACT ADD PREVIOUS_CONTRACT_NO VARCHAR2(32);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONTRACT_REMINDER_DATES VARCHAR2(2000);

ALTER TABLE PROC_AGREEMENT_TYPE ADD BUYER_ID VARCHAR2(64);

ALTER TABLE PROC_AGREEMENT_TYPE ADD CONSTRAINT FK_AGR_TYPE_BUYER_ID FOREIGN KEY (BUYER_ID) REFERENCES "PROC_BUYER" ("BUYER_ID");

ALTER TABLE PROC_PRODUCT_CONTRACT ADD RENEWAL_CONTRACT NUMBER(1,0);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD AGREEMENT_TYPE VARCHAR2(64);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONSTRAINT FK_PROC_ARG_TYPE_ID FOREIGN KEY (AGREEMENT_TYPE) REFERENCES PROC_AGREEMENT_TYPE (ID);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD LOA_AND_AGREEMENT_ID VARCHAR2(64);


CREATE TABLE PROC_LOA_AGREEMENT_DOCUMENTS (
    ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
    CONTRACT_ID VARCHAR2(64 CHAR) NOT NULL,
	LOA_DESCRIPTION VARCHAR2(300 CHAR), 
	LOA_FILE_DATA BLOB , 
	LOA_FILE_NAME VARCHAR2(500 CHAR),
	LOA_CONTENT_TYPE VARCHAR2(160 CHAR),
	LOA_FILE_SIZE NUMBER(10,0), 
	LOA_UPLOAD_DATE TIMESTAMP (6),
	AGR_DESCRIPTION VARCHAR2(300 CHAR), 
	AGR_FILE_DATA BLOB , 
	AGR_FILE_NAME VARCHAR2(500 CHAR),
	AGR_CONTENT_TYPE VARCHAR2(160 CHAR),
	AGR_FILE_SIZE NUMBER(10,0), 
	AGR_UPLOAD_DATE TIMESTAMP (6),
	TENANT_ID VARCHAR2(64) NOT NULL,
	PRIMARY KEY (ID),
	CONSTRAINT FK_CONTRACT_CON_ID FOREIGN KEY (CONTRACT_ID) REFERENCES PROC_PRODUCT_CONTRACT(ID)
);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD CONSTRAINT FK_PROD_CONT_LOA_AGR FOREIGN KEY (LOA_AND_AGREEMENT_ID) REFERENCES PROC_LOA_AGREEMENT_DOCUMENTS (ID);

ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS ADD LOA_DATE TIMESTAMP (6);

ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS ADD AGREEMENT_DATE TIMESTAMP (6);


CREATE TABLE PROC_CONTRACT_AUDIT (
	ID VARCHAR2(64 CHAR) NOT NULL ENABLE, 
	ACTION_TYPE VARCHAR2(255 CHAR) NOT NULL ENABLE, 
	ACTION_DATE TIMESTAMP (6) NOT NULL ENABLE, 
	THE_DESCRIPTION VARCHAR2(3000 CHAR), 
	ACTION_BY VARCHAR2(64 CHAR), 
	TENANT_ID VARCHAR2(64 CHAR), 
	CONTRACT_ID VARCHAR2(64 CHAR), 
	SUMMARY_SNAPSHOT BLOB,
	 PRIMARY KEY (ID), 
	 CONSTRAINT FK_CONTRACT_ACTION_BY FOREIGN KEY (ACTION_BY) REFERENCES PROC_USER (ID), 
	 CONSTRAINT FK_CONTRACT_BUYER_ID FOREIGN KEY (TENANT_ID) REFERENCES PROC_BUYER (BUYER_ID), 
	 CONSTRAINT FK_CONT_AUDIT_CONT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES PROC_PRODUCT_CONTRACT (ID)
);

CREATE TABLE PROC_CONTRACT_TEAM_MEMBER (
	ID varchar(64) NOT NULL,
	USER_ID varchar(255) NOT NULL,
	MEMBER_TYPE varchar(255) NOT NULL,
	CONTRACT_ID varchar(64),
	PRIMARY KEY (ID),
	constraint FK_CONT_TEAM_USR_ID foreign key (USER_ID) references PROC_USER(id),
	constraint FK_CONT_TEAM_PROD_CONT_ID foreign key (CONTRACT_ID) references PROC_PRODUCT_CONTRACT(ID)
);

CREATE TABLE PROC_CONTRACT_APPROVAL (
	ID VARCHAR2(64 CHAR) NOT NULL , 
	ACTIVE NUMBER(1,0), 
	APPROVAL_TYPE VARCHAR2(255 CHAR), 
	IS_DONE NUMBER(1,0) NOT NULL, 
	APPROVAL_LEVEL NUMBER(10,0) NOT NULL , 
	IS_ESCALATED NUMBER(1,0),
	CONTRACT_ID VARCHAR2(64 CHAR), 
	PRIMARY KEY (ID),
	CONSTRAINT FK_CONTRACT_APP_CONT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES PROC_PRODUCT_CONTRACT(ID)
);

CREATE TABLE PROC_CONTRACT_APPROVAL_USER (
	ID VARCHAR2(64) NOT NULL,
	ACTION_DATE TIMESTAMP,
	APPROVAL_STATUS VARCHAR2(255),
	APPROVAL_REMARKS VARCHAR2(500),
	USER_ID VARCHAR2(64) NOT NULL, 
	CONTRACT_APPROVAL_ID VARCHAR2(64) NOT NULL,
	PRIMARY KEY (ID),
	CONSTRAINT FK_CONTRACT_APP_USER_ID FOREIGN KEY (USER_ID) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_CONTRACT_APPR_USR_AP_ID FOREIGN KEY (CONTRACT_APPROVAL_ID) REFERENCES PROC_CONTRACT_APPROVAL(ID)
);

ALTER TABLE PROC_CONTRACT_APPROVAL_USER ADD NEXT_REMINDER_TIME TIMESTAMP (6);
ALTER TABLE PROC_CONTRACT_APPROVAL_USER ADD REMINDER_COUNT NUMBER(2) DEFAULT 0;

ALTER TABLE PROC_CONTRACT_DOCUMENTS ADD UPLOADED_BY VARCHAR2(64 CHAR);
ALTER TABLE PROC_CONTRACT_DOCUMENTS ADD CONSTRAINT FK_CONT_DOC_UPLOADED_BY FOREIGN KEY (UPLOADED_BY) REFERENCES PROC_USER (ID);

ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS ADD LOA_UPLOADED_BY VARCHAR2(64 CHAR);
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS ADD CONSTRAINT FK_LOA_DOC_UPLOAD_BY FOREIGN KEY (LOA_UPLOADED_BY) REFERENCES PROC_USER (ID);

ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS ADD AGREEMENT_UPLOADED_BY VARCHAR2(64 CHAR);
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS ADD CONSTRAINT FK_AGR_DOC_UPLOAD_BY FOREIGN KEY (AGREEMENT_UPLOADED_BY) REFERENCES PROC_USER (ID);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD IS_ENABLE_APPROVAL_REMINDER NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_PRODUCT_CONTRACT ADD REMINDER_HOURS NUMBER(2);
ALTER TABLE PROC_PRODUCT_CONTRACT ADD REMINDER_COUNT NUMBER(2);
ALTER TABLE PROC_PRODUCT_CONTRACT ADD IS_NOTIFY_EVENT_OWNER NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_PRODUCT_CONTRACT ADD IS_CONTRACT_DETAIL_COMPLETED NUMBER(1,0);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD IS_CONTRACT_ITEMS_COMPLETED NUMBER(1,0);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD IS_CONTRACT_SUMMARY_COMPLETED NUMBER(1,0);

CREATE TABLE PROC_CONTRACT_COMMENTS (
	ID VARCHAR2(64),
	USER_COMMENTS VARCHAR2(500),
	CREATED_DATE TIMESTAMP,
	APPROVAL_USER_ID VARCHAR2(64),
	APPROVED NUMBER(1,0),
	CREATED_BY VARCHAR2(64),
	PRODUCT_CONTRACT_ID VARCHAR2(64),
	PRIMARY KEY (ID),
	CONSTRAINT FK_CONT_COMM_CREATED_BY FOREIGN KEY (CREATED_BY) REFERENCES PROC_USER(ID),
	CONSTRAINT FK_CONT_COMM_CONT_ID FOREIGN KEY (PRODUCT_CONTRACT_ID) REFERENCES PROC_PRODUCT_CONTRACT(ID)
);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD IS_TERMINATION_REQUESTED NUMBER(1,0);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD TERMINATION_REMARKS VARCHAR2(250 CHAR);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD CANCEL_REASON VARCHAR2(1050 CHAR);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD IS_ENABLE_APPROVAL NUMBER(1) DEFAULT 0 NOT NULL;

UPDATE PROC_PRODUCT_CONTRACT set CONTRACT_CREATOR = CREATED_BY where CONTRACT_CREATOR is null;

ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD PRICE_PER_UNIT NUMBER(19,2);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD IS_ERP_TRANSFERRED NUMBER(1) DEFAULT 0 NOT NULL;

update PROC_BUYER_AUDIT_TRAIL set MODULE_TYPE = 'Contract List' WHERE MODULE_TYPE = 'Product Contract'

ALTER TABLE PROC_PRODUCT_CONTRACT ADD OLD_STATUS VARCHAR2(32);


CREATE INDEX IDX_TAT_RFS_TENANT on PROC_TAT_REPORT (REQUEST_GEN_ID, TANANT_ID );
CREATE INDEX IDX_TAT_RFX_TENANT on PROC_TAT_REPORT (EVENT_GEN_ID, TANANT_ID );
CREATE INDEX IDX_TAT_RFX_EVNID_TENANT on PROC_TAT_REPORT (EVENT_ID, TANANT_ID );
CREATE INDEX IDX_TAT_RFS_FRMID_TENANT on PROC_TAT_REPORT (FORM_ID, TANANT_ID );
CREATE INDEX IDX_TAT_RFX_RFS_TENANT on PROC_TAT_REPORT (EVENT_ID,REQUEST_GEN_ID, TANANT_ID );	  
	  
ALTER TABLE PROC_BUSINESS_UNIT ADD CONTRACT_INTEGRATION NUMBER(1) DEFAULT 0 NOT NULL;	  
ALTER TABLE PROC_ERP_SETUP ADD ENABLE_CONTRACT_ERP_PUSH NUMBER(1,0)  DEFAULT 0 NOT NULL;


ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS ADD AGR_FILE_DATA1 BLOB NULL;
UPDATE PROC_LOA_AGREEMENT_DOCUMENTS SET AGR_FILE_DATA1 = AGR_FILE_DATA;
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS RENAME COLUMN AGR_FILE_DATA TO AGR_FILE_DATA2;
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS RENAME COLUMN AGR_FILE_DATA1 TO AGR_FILE_DATA;
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS DROP COLUMN AGR_FILE_DATA2;

ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS ADD LOA_FILE_DATA1 BLOB NULL;
UPDATE PROC_LOA_AGREEMENT_DOCUMENTS SET LOA_FILE_DATA1 = LOA_FILE_DATA;
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS RENAME COLUMN LOA_FILE_DATA TO LOA_FILE_DATA2;
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS RENAME COLUMN LOA_FILE_DATA1 TO LOA_FILE_DATA;
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS DROP COLUMN LOA_FILE_DATA2;


ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS MODIFY AGR_UPLOAD_DATE TIMESTAMP NULL;
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS MODIFY AGR_FILE_NAME VARCHAR2(500) NULL;
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS MODIFY LOA_UPLOAD_DATE TIMESTAMP NULL;
ALTER TABLE PROC_LOA_AGREEMENT_DOCUMENTS MODIFY LOA_FILE_NAME VARCHAR2(500) NULL;

-- Change the order of Contract in ACL
UPDATE PROC_ACCESS_RIGHTS SET ACL_ORDER=18 WHERE ACL_VALUE='ROLE_CONTRACT_LIST';
UPDATE PROC_ACCESS_RIGHTS SET ACL_ORDER=19 WHERE ACL_VALUE = 'ROLE_BUYER_BILLING';

UPDATE PROC_PRODUCT_CONTRACT set PRODUCT_ACTIVE = 'EXPIRED' WHERE PRODUCT_ACTIVE = 'INACTIVE'
UPDATE PROC_PRODUCT_CONTRACT set OLD_STATUS = 'DRAFT' WHERE OLD_STATUS is null


ALTER TABLE PROC_PRODUCT_CONTRACT ADD DOCUMENT_DATE DATE;

ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD ITEM_CODE VARCHAR2(50);

UPDATE PROC_PRODUCT_CONTRACT_ITEM i SET ITEM_CODE = (SELECT p.PRODUCT_CODE FROM PROC_PRODUCT_ITEM p WHERE p.ID = i.PRODUCT_ITEM_ID) WHERE i.ITEM_CODE IS NULL AND i.PRODUCT_ITEM_ID IS NOT NULL



ALTER TABLE PROC_RFQ_EVENT_AWARD DROP COLUMN IS_ENABLE_AWARD_APPROVAL;

ALTER TABLE PROC_RFT_EVENT_AWARD DROP COLUMN IS_ENABLE_AWARD_APPROVAL;

ALTER TABLE PROC_RFP_EVENT_AWARD DROP COLUMN IS_ENABLE_AWARD_APPROVAL;

ALTER TABLE PROC_RFA_EVENT_AWARD DROP COLUMN IS_ENABLE_AWARD_APPROVAL;


ALTER TABLE PROC_CONTRACT_AUDIT ADD HAS_SNAPSHOT NUMBER(1) DEFAULT 0 NOT NULL;

UPDATE PROC_CONTRACT_AUDIT SET HAS_SNAPSHOT = 1 WHERE SUMMARY_SNAPSHOT IS NOT NULL 

ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD IS_DELETED NUMBER(1) DEFAULT 0 NOT NULL;


ALTER TABLE PROC_PRODUCT_CONTRACT ADD OLD_CONTRACT_START_DATE TIMESTAMP;
ALTER TABLE PROC_PRODUCT_CONTRACT ADD OLD_CONTRACT_END_DATE TIMESTAMP;
ALTER TABLE PROC_PRODUCT_CONTRACT ADD OLD_CONTRACT_VALUE NUMBER(25,6);
ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD OLD_QUANTITY NUMBER(25,6);

ALTER TABLE PROC_PRODUCT_CONTRACT ADD IS_ID_BASED_ON_BU NUMBER(1) DEFAULT 0 NOT NULL;


ALTER TABLE PROC_RFT_EVENT_AWARD ADD IS_TRANSFERRED NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFQ_EVENT_AWARD ADD IS_TRANSFERRED NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFP_EVENT_AWARD ADD IS_TRANSFERRED NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFA_EVENT_AWARD ADD IS_TRANSFERRED NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_PRODUCT_CONTRACT_ITEM ADD IS_ERP_TRANSFERRED NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFA_EVENT_AWARD_AUDIT ADD HAS_SNAPSHOT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFP_EVENT_AWARD_AUDIT ADD HAS_SNAPSHOT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFQ_EVENT_AWARD_AUDIT ADD HAS_SNAPSHOT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFT_EVENT_AWARD_AUDIT ADD HAS_SNAPSHOT NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFA_EVENT_AWARD_AUDIT ADD HAS_EXCEL_SNAPSHOT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFP_EVENT_AWARD_AUDIT ADD HAS_EXCEL_SNAPSHOT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFQ_EVENT_AWARD_AUDIT ADD HAS_EXCEL_SNAPSHOT NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_RFT_EVENT_AWARD_AUDIT ADD HAS_EXCEL_SNAPSHOT NUMBER(1) DEFAULT 0 NOT NULL;

UPDATE PROC_RFA_EVENT_AWARD_AUDIT SET HAS_SNAPSHOT = 1 WHERE AUDIT_SNAPSHOT IS NOT NULL;
UPDATE PROC_RFP_EVENT_AWARD_AUDIT SET HAS_SNAPSHOT = 1 WHERE AUDIT_SNAPSHOT IS NOT NULL;
UPDATE PROC_RFT_EVENT_AWARD_AUDIT SET HAS_SNAPSHOT = 1 WHERE AUDIT_SNAPSHOT IS NOT NULL;
UPDATE PROC_RFQ_EVENT_AWARD_AUDIT SET HAS_SNAPSHOT = 1 WHERE AUDIT_SNAPSHOT IS NOT NULL;

UPDATE PROC_RFA_EVENT_AWARD_AUDIT SET HAS_EXCEL_SNAPSHOT = 1 WHERE AUDIT_EXCEL_SNAPSHOT IS NOT NULL;
UPDATE PROC_RFP_EVENT_AWARD_AUDIT SET HAS_EXCEL_SNAPSHOT = 1 WHERE AUDIT_EXCEL_SNAPSHOT IS NOT NULL;
UPDATE PROC_RFT_EVENT_AWARD_AUDIT SET HAS_EXCEL_SNAPSHOT = 1 WHERE AUDIT_EXCEL_SNAPSHOT IS NOT NULL;
UPDATE PROC_RFQ_EVENT_AWARD_AUDIT SET HAS_EXCEL_SNAPSHOT = 1 WHERE AUDIT_EXCEL_SNAPSHOT IS NOT NULL;

ALTER TABLE PROC_CONTRACT_DOCUMENTS ADD DESCRIPTION VARCHAR2(300);


-- --------------------------------------------------------
-- DATA PATCHING FOR NEW AWARD STATUS AND TRANSFERRED FLAGS
-- --------------------------------------------------------

--RFQ Update Award status to APPROVED for finished events if they are not concluded via event or remarks
UPDATE PROC_RFQ_EVENTS e SET AWARD_STATUS = 'APPROVED' 
WHERE STATUS = 'FINISHED' AND IS_AWARDED = 1 AND NEXT_EVENT IS NULL AND EVENT_PUSH_DATE IS NULL AND (SELECT count(*) FROM PROC_RFQ_EVENT_AWARD a WHERE a.EVENT_ID = e.ID) > 0

UPDATE PROC_RFQ_EVENT_AWARD a SET IS_TRANSFERRED = 1 WHERE a.EVENT_ID IN (
SELECT ID FROM PROC_RFQ_EVENTS e WHERE IS_AWARDED = 1 AND STATUS = 'FINISHED' AND CONCLUDE_BY IS NOT NULL AND CONCLUDE_REMARKS IS NULL AND NEXT_EVENT IS NULL AND EVENT_PUSH_DATE IS NULL
)

UPDATE PROC_RFQ_EVENTS e SET AWARD_STATUS = 'DRAFT', IS_AWARDED = 0 WHERE STATUS = 'COMPLETE' AND (SELECT count(*) FROM PROC_RFQ_EVENT_AWARD ea WHERE ea.EVENT_ID = e.id) > 0
AND AWARD_STATUS IS NULL


--RFP Update Award status to APPROVED for finished events if they are not concluded via event or remarks
UPDATE PROC_RFP_EVENTS e SET AWARD_STATUS = 'APPROVED' 
WHERE STATUS = 'FINISHED' AND IS_AWARDED = 1 AND NEXT_EVENT IS NULL AND EVENT_PUSH_DATE IS NULL AND (SELECT count(*) FROM PROC_RFP_EVENT_AWARD a WHERE a.EVENT_ID = e.ID) > 0

UPDATE PROC_RFP_EVENT_AWARD a SET IS_TRANSFERRED = 1 WHERE a.EVENT_ID IN (
SELECT ID FROM PROC_RFP_EVENTS e WHERE IS_AWARDED = 1 AND STATUS = 'FINISHED' AND CONCLUDE_BY IS NOT NULL AND CONCLUDE_REMARKS IS NULL AND NEXT_EVENT IS NULL AND EVENT_PUSH_DATE IS NULL
)

UPDATE PROC_RFP_EVENTS e SET AWARD_STATUS = 'DRAFT', IS_AWARDED = 0 WHERE STATUS = 'COMPLETE' AND (SELECT count(*) FROM PROC_RFP_EVENT_AWARD ea WHERE ea.EVENT_ID = e.id) > 0
AND AWARD_STATUS IS NULL

--RFA Update Award status to APPROVED for finished events if they are not concluded via event or remarks
UPDATE PROC_RFA_EVENTS e SET AWARD_STATUS = 'APPROVED' 
WHERE STATUS = 'FINISHED' AND IS_AWARDED = 1 AND NEXT_EVENT IS NULL AND EVENT_PUSH_DATE IS NULL AND (SELECT count(*) FROM PROC_RFA_EVENT_AWARD a WHERE a.EVENT_ID = e.ID) > 0

UPDATE PROC_RFA_EVENT_AWARD a SET IS_TRANSFERRED = 1 WHERE a.EVENT_ID IN (
SELECT ID FROM PROC_RFA_EVENTS e WHERE IS_AWARDED = 1 AND STATUS = 'FINISHED' AND CONCLUDE_BY IS NOT NULL AND CONCLUDE_REMARKS IS NULL AND NEXT_EVENT IS NULL AND EVENT_PUSH_DATE IS NULL
)

UPDATE PROC_RFA_EVENTS e SET AWARD_STATUS = 'DRAFT', IS_AWARDED = 0 WHERE STATUS = 'COMPLETE' AND (SELECT count(*) FROM PROC_RFA_EVENT_AWARD ea WHERE ea.EVENT_ID = e.id) > 0
AND AWARD_STATUS IS NULL

--RFT Update Award status to APPROVED for finished events if they are not concluded via event or remarks
UPDATE PROC_RFT_EVENTS e SET AWARD_STATUS = 'APPROVED' 
WHERE STATUS = 'FINISHED' AND IS_AWARDED = 1 AND NEXT_EVENT IS NULL AND EVENT_PUSH_DATE IS NULL AND (SELECT count(*) FROM PROC_RFT_EVENT_AWARD a WHERE a.EVENT_ID = e.ID) > 0

UPDATE PROC_RFT_EVENT_AWARD a SET IS_TRANSFERRED = 1 WHERE a.EVENT_ID IN (
SELECT ID FROM PROC_RFT_EVENTS e WHERE IS_AWARDED = 1 AND STATUS = 'FINISHED' AND CONCLUDE_BY IS NOT NULL AND CONCLUDE_REMARKS IS NULL AND NEXT_EVENT IS NULL AND EVENT_PUSH_DATE IS NULL
)

UPDATE PROC_RFT_EVENTS e SET AWARD_STATUS = 'DRAFT', IS_AWARDED = 0 WHERE STATUS = 'COMPLETE' AND (SELECT count(*) FROM PROC_RFT_EVENT_AWARD ea WHERE ea.EVENT_ID = e.id) > 0
AND AWARD_STATUS IS NULL



--------------------------------------------------------------------------------------
---------------------------------  PH-2860 -------------------------------------------
--------------------------------------------------------------------------------------
ALTER TABLE PROC_ID_SETTINGS ADD IS_ENABLE_SUFFIX NUMBER(1) DEFAULT 0 NOT NULL;
ALTER TABLE PROC_PO ADD PO_REVISED_DATE TIMESTAMP;


CREATE INDEX IDX_TAT_RFS_TENANT on PROC_TAT_REPORT (REQUEST_GEN_ID, TANANT_ID );
CREATE INDEX IDX_TAT_RFX_TENANT on PROC_TAT_REPORT (EVENT_GEN_ID, TANANT_ID );
CREATE INDEX IDX_TAT_RFX_EVNID_TENANT on PROC_TAT_REPORT (EVENT_ID, TANANT_ID );
CREATE INDEX IDX_TAT_RFS_FRMID_TENANT on PROC_TAT_REPORT (FORM_ID, TANANT_ID );
CREATE INDEX IDX_TAT_RFX_RFS_TENANT on PROC_TAT_REPORT (EVENT_ID,REQUEST_GEN_ID, TANANT_ID );

--PH-3247
ALTER TABLE PROC_PROCUREMENT_METHOD ADD PROCUREMENT_METHOD_CODE VARCHAR2(64);

--PH-3250
ALTER TABLE PROC_PRODUCT_CONTRACT ADD REMARK VARCHAR2(1050) ;
ALTER TABLE PROC_PRODUCT_CONTRACT ADD SUPPLIER_NAME VARCHAR2(300) ;

--PH-3248

ALTER TABLE PROC_RFP_EVENTS
	ADD TRNSFR_AWRD_RESP_FLAG NUMBER(1,0) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFQ_EVENTS
	ADD TRNSFR_AWRD_RESP_FLAG NUMBER(1,0) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFT_EVENTS
	ADD TRNSFR_AWRD_RESP_FLAG NUMBER(1,0) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFA_EVENTS
	ADD TRNSFR_AWRD_RESP_FLAG NUMBER(1,0) DEFAULT 0 NOT NULL;

ALTER TABLE PROC_RFI_EVENTS
	ADD TRNSFR_AWRD_RESP_FLAG NUMBER(1,0) DEFAULT 0 NOT NULL;

--PH-3249
ALTER TABLE PROC_PRODUCT_CONTRACT
	ADD IS_EDITABLE NUMBER(1) DEFAULT 1 NOT NULL;

ALTER TABLE PROC_ERP_SETUP ADD (ERP_CREATOR_ID varchar2(64));

ALTER TABLE PROC_ERP_SETUP ADD CONSTRAINT
	FK_ERP_CREATOR_ID FOREIGN KEY (ERP_CREATOR_ID) REFERENCES PROC_USER (ID);


--PH-3383
ALTER TABLE PROC_USER ADD EMAIL_NOTIFICATIONS  NUMBER(1) DEFAULT 1 NOT NULL;
-- to off  email notification when user status is inActive
UPDATE PROC_USER
SET EMAIL_NOTIFICATIONS = 0
WHERE ACCOUNT_ACTIVE = 0
--to reset email notification
UPDATE PROC_USER SET EMAIL_NOTIFICATIONS = 0 WHERE ACCOUNT_ACTIVE = 0 AND EMAIL_NOTIFICATIONS IS NULL
UPDATE PROC_USER SET EMAIL_NOTIFICATIONS = 1 WHERE ACCOUNT_ACTIVE = 1 AND EMAIL_NOTIFICATIONS IS NULL

// PH-3666
ALTER TABLE PROC_RFP_EVENT_AWARD
	ADD AWARD_DOCUMENT BLOB;

ALTER TABLE PROC_RFT_EVENT_AWARD
	ADD AWARD_DOCUMENT BLOB;

ALTER TABLE PROC_RFA_EVENT_AWARD
	ADD AWARD_DOCUMENT BLOB;

ALTER TABLE PROC_RFQ_EVENT_AWARD
	ADD AWARD_DOCUMENT BLOB;

/// PH-3666
ALTER TABLE PROC_RFP_EVENT_AWARD ADD AWARD_ATTACH_FILE_NAME VARCHAR2(500 CHAR)

ALTER TABLE PROC_RFT_EVENT_AWARD ADD AWARD_ATTACH_FILE_NAME VARCHAR2(500 CHAR)

ALTER TABLE PROC_RFA_EVENT_AWARD ADD AWARD_ATTACH_FILE_NAME VARCHAR2(500 CHAR)

ALTER TABLE PROC_RFQ_EVENT_AWARD ADD AWARD_ATTACH_FILE_NAME VARCHAR2(500 CHAR)


// PH-3666

ALTER TABLE PROC_RFQ_EVENT_AWARD ADD AWARD_ATTACH_CONT_TYPE VARCHAR2(160)

ALTER TABLE PROC_RFA_EVENT_AWARD ADD AWARD_ATTACH_CONT_TYPE VARCHAR2(160)

ALTER TABLE PROC_RFT_EVENT_AWARD ADD AWARD_ATTACH_CONT_TYPE VARCHAR2(160)

ALTER TABLE PROC_RFP_EVENT_AWARD ADD AWARD_ATTACH_CONT_TYPE VARCHAR2(160)
--PH-2746
-- Alter the table to increase the length of ITEM_DESCRIPTION to 2100
ALTER TABLE PROC_PR_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2100);
ALTER TABLE PROC_PO_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2100);
ALTER TABLE PROC_DO_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2100);
ALTER TABLE PROC_INVOICE_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2100);
ALTER TABLE PROC_GRN_ITEM MODIFY ITEM_DESCRIPTION VARCHAR2(2100);

--CR-3407
--SupplierTag

ALTER TABLE PROC_RFX_TEMPLATE ADD IS_OPTIONAL_SUPPLIER_TAGS NUMBER(1) default 0;
ALTER TABLE PROC_RFX_TEMPLATE ADD IS_VISIBLE_SUPPLIER_TAGS NUMBER(1) default 0;

--Geographical Coverage

ALTER TABLE PROC_RFX_TEMPLATE ADD IS_OPTIONAL_GEOGRAPHICAL_COVERAGE NUMBER(1) default 0;
ALTER TABLE PROC_RFX_TEMPLATE ADD IS_VISIBLE_GEOGRAPHICAL_COVERAGE NUMBER(1) default 0;

UPDATE PROC_RFX_TEMPLATE
SET
    IS_VISIBLE_SUPPLIER_TAGS =
        CASE
            WHEN ALLOW_SUPPLIER_BASED_ON_STATE = 1 AND RESTRICT_SUPPLIER_BY_STATE = 1 THEN 1
            WHEN ALLOW_SUPPLIER_BASED_ON_STATE = 1 AND RESTRICT_SUPPLIER_BY_STATE = 0 THEN 1
            ELSE 0
            END;

UPDATE PROC_RFX_TEMPLATE
SET
    IS_OPTIONAL_SUPPLIER_TAGS =
        CASE
            WHEN ALLOW_SUPPLIER_BASED_ON_STATE = 1 AND RESTRICT_SUPPLIER_BY_STATE = 1 THEN 0
            WHEN ALLOW_SUPPLIER_BASED_ON_STATE = 1 AND RESTRICT_SUPPLIER_BY_STATE = 0 THEN 1
            ELSE 0
            END;

UPDATE PROC_RFX_TEMPLATE
SET
    RESTRICT_SUPPLIER_BY_STATE = IS_VISIBLE_SUPPLIER_TAGS,
    ALLOW_SUPPLIER_BASED_ON_STATE = IS_OPTIONAL_SUPPLIER_TAGS;


CREATE INDEX PROC_RFQ_EVENT_SUPPLIERS_FEE_REFERENCE_IDX ON PROC_PROD_DB.PROC_RFQ_EVENT_SUPPLIERS (FEE_REFERENCE);
CREATE INDEX PROC_RFT_EVENT_SUPPLIERS_FEE_REFERENCE_IDX ON PROC_PROD_DB.PROC_RFT_EVENT_SUPPLIERS (FEE_REFERENCE);
CREATE INDEX PROC_RFI_EVENT_SUPPLIERS_FEE_REFERENCE_IDX ON PROC_PROD_DB.PROC_RFI_EVENT_SUPPLIERS (FEE_REFERENCE);
CREATE INDEX PROC_RFA_EVENT_SUPPLIERS_FEE_REFERENCE_IDX ON PROC_PROD_DB.PROC_RFA_EVENT_SUPPLIERS (FEE_REFERENCE);



--ADD NEW COLUM PH-4113===

ALTER TABLE proc_test_db.proc_po
ADD COLUMN IS_PO_DETAIL_COMPLETED INTEGER DEFAULT 1;

ALTER TABLE proc_test_db.proc_po
ADD COLUMN IS_DOCUMENT_COMPLETED INTEGER DEFAULT 0;

ALTER TABLE proc_test_db.proc_po
ADD COLUMN IS_SUPPLIER_COMPLETED INTEGER DEFAULT 0;

ALTER TABLE proc_test_db.proc_po
ADD COLUMN IS_DELIVERY_COMPLETED INTEGER DEFAULT 0;

ALTER TABLE proc_test_db.proc_po
ADD COLUMN IS_PO_ITEM_COMPLETED INTEGER DEFAULT 0;

ALTER TABLE proc_test_db.proc_po
ADD COLUMN IS_REMARK_COMPLETED INTEGER DEFAULT 0;

ALTER TABLE proc_test_db.proc_po
ADD COLUMN IS_SUMMARY_COMPLETED INTEGER DEFAULT 0;

ALTER TABLE proc_test_db.proc_po_item
ADD COLUMN LOCKED_QUANTITY INTEGER DEFAULT 0;

ALTER TABLE proc_test_db.proc_po_item
ADD COLUMN BALANCE_QUANTITY INTEGER DEFAULT 0;

ALTER TABLE proc_test_db.proc_po_item
ADD COLUMN PRICE_PER_UNIT INTEGER DEFAULT 0;

-- END PH-4113